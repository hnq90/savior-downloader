webpackJsonp([0],[,function(t,e,i){"use strict";var n=i(5),r=function(){};r.QL_HIGH="High",r.QL_MEDIUM="Medium",r.QL_LOW="Low",r.QL_VIDEO_ULTRAHD="Ultra HD",r.QL_VIDEO_FULLHD="Full HD",r.QL_VIDEO_HD="HD",r.QL_VIDEO_STANDARD="Standard",r.QL_VIDEO_MEDIUM="Medium",r.QL_VIDEO_SMALL="Small",r.QL_VIDEO_MOBILE="Mobile";var o={};o[r.QL_VIDEO_ULTRAHD]={quality:r.QL_HIGH,qualityIndex:6,size:3072,videoTitle:"Ultra HD",itag:[38,138]},o[r.QL_VIDEO_FULLHD]={quality:r.QL_HIGH,qualityIndex:5,size:1080,videoTitle:"Full HD",audioTitle:"High",itag:[37,46,137],vimeoQuality:"1080p",zingTag:"f1080",dailymotionQuality:"hd1080",clipvnQuality:"5"},o[r.QL_VIDEO_HD]={quality:r.QL_HIGH,qualityIndex:4,size:720,videoTitle:"HD",audioTitle:"High",itag:[22,45,120,136,247],zingTag:["f720","hq","320"],vimeoQuality:"720p",dailymotionQuality:["hd","hd720"],facebookQuality:["hd_src","hd_src_no_ratelimit"],JWQuality:"highquality",clipvnQuality:"4"},o[r.QL_VIDEO_STANDARD]={quality:r.QL_MEDIUM,qualityIndex:3,size:480,videoTitle:"Standard",audioTitle:"Normal",itag:[44,35,135,244],zingTag:["f480"],dailymotionQuality:"hq",vimeoQuality:"480p",facebookQuality:["sd_src","sd_src_no_ratelimit"],JWQuality:"location",clipvnQuality:"3"},o[r.QL_VIDEO_MEDIUM]={quality:r.QL_MEDIUM,qualityIndex:2,size:360,videoTitle:"Medium",audioTitle:"Normal",itag:[18,43,34,134,243],vimeoQuality:"360p",dailymotionQuality:"sd",zingTag:["source","f360","128"],JWQuality:"lowquality",clipvnQuality:"2"},o[r.QL_VIDEO_SMALL]={quality:r.QL_LOW,qualityIndex:1,size:240,videoTitle:"Small",audioTitle:"Low",itag:[36,5,133,242],dailymotionQuality:"ld",vimeoQuality:"270p",zingTag:["f","f240"],clipvnQuality:"1"},o[r.QL_VIDEO_MOBILE]={quality:r.QL_LOW,qualityIndex:0,size:144,videoTitle:"Mobile",audioTitle:"Low",itag:[17,6,160],vimeoQuality:"",clipvnQuality:"0"};var a={};a[r.QL_HIGH]=o[r.QL_VIDEO_ULTRAHD].qualityIndex,a[r.QL_MEDIUM]=o[r.QL_VIDEO_STANDARD].qualityIndex,a[r.QL_LOW]=o[r.QL_VIDEO_SMALL].qualityIndex,r.prototype={constructor:r,DEFAULT_QUALITY_LEVEL:r.QL_HIGH,QUALITY_LEVELS:[r.QL_HIGH,r.QL_MEDIUM,r.QL_LOW],VIDEO_QUALITY_LEVELS:[r.QL_VIDEO_ULTRAHD,r.QL_VIDEO_FULLHD,r.QL_VIDEO_HD,r.QL_VIDEO_STANDARD,r.QL_VIDEO_MEDIUM,r.QL_VIDEO_SMALL,r.QL_VIDEO_MOBILE],DEFAULT_QUALITY_TYPE:r.QL_VIDEO_STANDARD,QUALITY_TYPES:o,getFacebookQuality:function(t){return this._getVideoQuality("facebookQuality",t).videoTitle},getDailymotionQuality:function(t){return this._getVideoQuality("dailymotionQuality",t).videoTitle},getZingVideoQuality:function(t){return this._getVideoQuality("zingTag",t).videoTitle},getZingAudioQuality:function(t){return this._getVideoQuality("zingTag",t).audioTitle},getYoutubeQuality:function(t,e){var i=this._getVideoQuality("itag",+t,e);return i&&i.videoTitle},getVimeoQuality:function(t){return this._getVideoQuality("vimeoQuality",t).videoTitle},getClipvnQuality:function(t){return this._getVideoQuality("clipvnQuality",t).videoTitle},getJWQuality:function(t){return this._getVideoQuality("JWQuality",t).videoTitle},getQualityBySize:function(t){return this._getVideoQuality("size",t).videoTitle},getSizeByQuality:function(t){return(o[t]||{}).size||0},_getVideoQuality:function(t,e,i){for(var n in this.QUALITY_TYPES){var r=this.QUALITY_TYPES[n][t];if(Array.isArray(r)||(r=[r]),-1!==r.indexOf(e))return this.QUALITY_TYPES[n]}return i?null:this.QUALITY_TYPES[this.DEFAULT_QUALITY_TYPE]},_getTypeByQualityType:function(t){for(var e in this.QUALITY_TYPES)if(t===e||t===this.QUALITY_TYPES[e].videoTitle||t===this.QUALITY_TYPES[e].audioTitle)return this.QUALITY_TYPES[e];return this.QUALITY_TYPES[this.DEFAULT_QUALITY_TYPE]},_calculateWeight:function(t,e){var i=n.b[t.get("type")].extensions_weight,r=i.indexOf(t.get("ext")),o=this._getTypeByQualityType(t.get("quality")).qualityIndex;return r/i.length+Math.abs(e-o)/7},getQualityLevelByType:function(t){return Object.keys(this.QUALITY_TYPES).indexOf(this._getTypeByQualityType(t).videoTitle)},getVideoQualityIndex:function(t){return this.VIDEO_QUALITY_LEVELS.concat().reverse().indexOf(t)},getOneClickQualityIndex:function(t){return this.QUALITY_LEVELS.concat().reverse().indexOf(t)},getQualityLevelByQualityType:function(t){return this._getTypeByQualityType(t).quality},chooseBestDownload:function(t,e,i){var n=t.length;if(i)for(var r=0;r<n;++r){var o=t[r];if(o.extQuality()===i)return o}e=e||this.DEFAULT_QUALITY_LEVEL;for(var s=a[e],l=1e3,c=-1,u=0;u<n;++u){var d=t[u],h=this._calculateWeight(d,s);l>h&&(l=h,c=u)}return t[c]}},e.a=new r},function(t,e,i){"use strict";var n=i(0),r=function(){};r.SERVER_LOG_URL="https://coccoc.com/s_log",r.SOURCE_POPUP_PAGE=0,r.SOURCE_OPTIONS_PAGE=10,r.SOURCE_CONTENT_SCRIPT=20,r.SOURCE_BACKGROUND_PAGE=30,r.prototype={LEGACY_METRICS_NAME_MAP:{ButtonClicked:"TryItNowButtonClicked",CheckBoxClicked:"OneClickCheckbox"},get source(){if(!chrome.extension.getBackgroundPage)return r.SOURCE_CONTENT_SCRIPT;switch(document.location.pathname){case"/popup.html":return r.SOURCE_POPUP_PAGE;case"/options.html":return r.SOURCE_OPTIONS_PAGE;case"/background.html":return r.SOURCE_BACKGROUND_PAGE;default:return}},_getFullName:function(t){return"Savior."+(this.LEGACY_METRICS_NAME_MAP[t]||t)},_getTotalValue:function(t,e,i){return 0===t.indexOf("Refr")||i||"PageShown"===t||"number"!=typeof e?e:e+this.source},_doLog:function(t,e,i){var n=this._getFullName(e);if(this.source===r.SOURCE_CONTENT_SCRIPT)chrome.runtime.sendMessage({requestType:"metrics",method:"log",params:{name:e,value:i}});else if(chrome.metricsPrivate)switch(t){case"recordSmallCount":chrome.metricsPrivate.recordValue({metricName:n,type:chrome.metricsPrivate.MetricTypeType.HISTOGRAM_LINEAR,min:0,max:100,buckets:100},i);break;case"recordValue":chrome.metricsPrivate.recordValue({metricName:n,type:chrome.metricsPrivate.MetricTypeType.HISTOGRAM_LINEAR,min:0,max:1e3,buckets:1002},i);break;case"recordSerpData":case"recordClickData":chrome.metricsPrivate[t](i)}},_getMethodByName:function(t){switch(t){case"Refr":case"RefrSE":case"RefrFE":return"recordValue";case"SerpData":return"recordSerpData";case"SerpClickData":return"recordClickData";default:return"recordSmallCount"}},log:function(t,e,i){var n=this._getMethodByName(t),r=this._getTotalValue(t,e,i);this._doLog(n,t,r)},logFromContentScript:function(t,e){this.log(t,e,!0)},serverLog:function(t,e){var i=new Image,o=[];e=Object.assign({action:t,source:this.source,version:n.SAVIOR_VERSION},e),Object.keys(e).reduce(function(t,i){return o.push(i+"="+encodeURIComponent(e[i])),o},o),i.src=r.SERVER_LOG_URL+"?"+o.join("&")},PAGE_WELCOME_SCREEN:0,PAGE_DOWNLOADS_LIST:1,PAGE_ONE_CLICK_DOWNLOAD:2,PAGE_NO_MEDIA_FOUND:3,PAGE_OPTIONS:4,PAGE_CONTENT_SHOW_CONTROLS:5,PAGE_CONTENT_NO_MEDIA:9,DOWNLOAD_AUTO:0,DOWNLOAD_BUTTON:1,DOWNLOAD_ALL:2,DOWNLOAD_REQUEST_SIZE:3,DOWNLOAD_REQUEST_SIZE_FAILED:4,DOWNLOAD_SOUND_ONLY:5,DOWNLOAD_CANCELED:7,DOWNLOAD_SUBTITLES:9,BUTTON_MAIN:0,BUTTON_TRY_IT_NOW:1,BUTTON_SHOW_DOWNLOADS:2,BUTTON_HIDE_DOWNLOADS:3,BUTTON_DOWNLOAD_ALL:4,BUTTON_CHECK_ALL:5,BUTTON_CHECK_NONE:6,BUTTON_FAKE_QUALITY:7,BUTTON_DETACH:8,BUTTON_HIDE:9,CHECK_BOX_ENABLE_ONE_CLICK:0,CHECK_BOX_SHOW_ON_PAGE_BUTTONS:2,CHECK_BOX_PREFER_LAST_QUALITY:4,CHECK_BOX_DETACH_ENABLED:6,PIP_DETACH_CLICK:0,PIP_RESTORE_CLICK:1,PIP_SITE_LINK_CLICK:2,PLAY_NOW_SHOWN:0,PLAY_NOW_WIDGET_CLICKED:1,PLAY_NOW_TOOLTIP_SHOWN:2,PLAY_NOW_TOOLTIP_CLOSED:3,PLAY_NOW_TOOLTIP_NOT_SHOW_AGAIN:4,PLAY_NOW_TOOLTIP_BOTTOM_SHOWN:5,PLAY_NOW_TOOLTIP_BOTTOM_CLOSED:6,PLAY_NOW_TOOLTIP_BOTTOM_NOT_SHOW_AGAIN:7},e.a=new r},function(t,e,i){"use strict";var n=function(){this._storage=chrome.storage.local,this._options={},this._default={detach_enabled:!0,on_page_buttons:!0,min_stream_size:30720,prefer_last_quality:!0,hide_play_now_tooltip:!1,hide_play_now_tooltip_bottom:!1};var t=this;chrome.storage.onChanged.addListener(function(e,i){if("local"===i)for(var n in e)t._options[n]=e[n].newValue})};n.prototype={load:function(){var t=this;return new Promise(function(e){t._storage.get(null,function(i){t._options=i,e(i)})})},set:function(t,e){var i={};("string"==typeof t||"number"==typeof t&&void 0!==e)&&(i[t]=e,this._options[t]=e,this._storage.set(i))},get:function(t){return t in this._options?this._options[t]:this._default[t]}},e.a=new n},function(t,e,i){"use strict";function n(t){return!!t&&!l.a.check(t)}function r(t){if(!n(t))return null;if(-1!==["PARAM","SOURCE"].indexOf(t.tagName)&&(t=t.parentElement),"OBJECT"===t.tagName){var e=t.querySelectorAll("embed");e&&1===e.length&&(t=e[0])}return t}function o(t){var e=t.parse,i=t.request;if(!i)return e;var n=i.url||function(t){return t},r=i.params||function(){},o=i.headers||function(){};return function(t){var a=n(t);return a?new Promise(function(n,s){c.Utils.send(i.method,a,r(t),o(t)).then(function(t){try{var i=e(a,t);Array.isArray(i)||(i=[i]),Promise.all(i).then(function(t){n(t)}).catch(function(t){s(t)})}catch(t){s()}}).catch(function(t){})}):e(t)}}function a(t){return{nocache:!!t.nocache,getPlaylist:o(t)}}function s(t,e,i){function n(e,n,r,o){var a=i&&i.pip||null,s={name:t,node:e,ids:n,opts:o||{},scraper:r,getMedia:function(){var e=[],i=c.Utils.flatten(this.ids);if(!i.length)return e;var n=this.scraper;return n?(i.forEach(function(i){if(n.nocache)return void e.push(n.getPlaylist(i));if(!i.url||!l.a.check(i.url)){var r=t+"_"+(i.url||i),o=new Promise(function(t){h.a.get(r).then(function(e){return t(e)}).catch(function(){Promise.resolve(n.getPlaylist(i)).then(function(e){h.a.put(r,e),t(e)})})});e.push(o)}}),e):(e.push.apply(e,i),e)}};return a&&a.restore&&a.detach&&(s.restore=a.restore,s.detach=a.detach),s}var o=Boolean(i&&i.dynamic),a=o?function(){this._ids=[]}:function(){};return a.prototype={constructor:a,name:t,getMediaPlayers:e,makePlayer:function(t,e,i,o){return n(r(t),e,i,o)},makePlayer0:n},o&&(a.prototype.processRequest=function(t){t&&-1===this._ids.indexOf(t)&&this._ids.push(t)}),a}i.d(e,"a",function(){return a}),i.d(e,"b",function(){return s}),i.d(e,"e",function(){return p}),i.d(e,"c",function(){return f}),i.d(e,"d",function(){return r});var l=i(7),c=i(0),u=i(5),d=i(1),h=i(19),f={extract:function(t){var e=t.getAttribute("flashvars").split("&"),i=void 0;return e.forEach(function(t){t=t.split("="),"file"===t[0]&&(i=decodeURIComponent(t[1]))}),i},parsePlaylist:function(t,e){var n=c.Utils.xmlParser.parseFromString(e,"text/xml"),r=[];return c.Utils.queryAll("track",n).forEach(function(t){c.Utils.queryAll("location, highquality, lowquality",t).forEach(function(e){var n=e.textContent.trim(),o=c.UrlUtils.parse(n);if(!i.i(u.c)(o.ext)){var a=[t.querySelector("title").textContent.trim()],s=t.querySelector("creator");s&&""!==s.textContent.trim()&&a.unshift(s.textContent.trim()),o.type="mp3"===o.ext?"audio":"video",o.title=a.join(" â€“ "),o.quality=d.a.getJWQuality(e.nodeName),r.push(o)}})}),r}},p={_getMedia:function(t){var e=c.UrlUtils.parse(t);return e.type="video",e.ext="m3u8",e},parsePlaylist:function(t,e){var i=[];if(0!==e.indexOf("#EXTM3U"))return i;for(var n=c.UrlUtils.parse0(t),r=0,o=0,a=void 0,s=void 0,l=e.split("\n"),u=0;u<l.length;u++){var d=l[u];if(d)if(0===d.indexOf("#"))0===d.indexOf("#EXTINF:")?r=1:0===d.indexOf("#EXT-X-STREAM-INF:")&&(r=2);else{switch(r){case 1:o+=1;break;case 2:a=c.UrlUtils.resolve(d,n),s=p._getMedia(a),s&&i.push(s)}r=0}}return 0===i.length&&o>0&&(s=p._getMedia(t))&&i.push(s),i}}},,,,function(t,e,i){"use strict";function n(t){var e=t.url,i=t.quality,n=!!t.soundOnly;return t="object"===(void 0===e?"undefined":h(e))?e.videoUrl+"\n"+e.audioUrl:e+(n?"mp3_"+i:""),l.Utils.hash(t).toString()}function r(t,e){var n=e[0],o={};if(!n){if(t.length>1)for(var a=0;a<t.length;++a){var s=t[a],c=s.url();if("object"===(void 0===c?"undefined":h(c))&&(c=c.videoUrl),-1!==c.indexOf(".googlevideo.com"))return[s]}return[t[0]]}return t.forEach(function(t){var e=t[n]&&t[n]()||"";o[e]=o[e]||[],o[e].push(t)}),Object.keys(o).map(function(t){var a=r(o[t],e.slice(1)),s={media:a};return s[n]=l.Utils.defined(t)?t:void 0,s.is_only=1===a.length&&(!l.Utils.defined(a[0].is_only)||a[0].is_only),s["i18n_"+n]=i.i(l.i18n)("media_fields_"+n+"_"+t),a.length&&"function"==typeof a[0].soundOnly&&(s.soundOnly=a[0].soundOnly()),s})}function o(t){return t.forEach(function(t){var e=t.type;t.media.forEach(function(t){t.media=t.media.sort(function(t,i){return c.b[e].extensions.indexOf(t.ext)-c.b[e].extensions.indexOf(i.ext)})})}),t}function a(t){return t.ext?(t.media=t.media.sort(function(t,e){return u.a.getQualityLevelByType(t.quality)-u.a.getQualityLevelByType(e.quality)}),t):(Array.isArray(t)?t=t.map(a):t.media=a(t.media),t)}function s(t){return a(o(t))}i.d(e,"a",function(){return f}),i.d(e,"b",function(){return p});var l=i(0),c=i(5),u=i(1),d=i(2),h="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},f=function(t){this._date=Date.now(),this._values={},this._sizePromise=null,this._hls=!1,this.merge(t)};f.MAX_FILE_NAME_LENGTH=128,f.isValidData=function(t){if(l.BrFeatures.M3U8&&i.i(c.c)(t.ext))return!0;var e=c.b[t.type],n=e&&e.extensions;return e&&-1!==n.indexOf(t.ext)},f.prototype._createFieldGetter=function(t){var e=this;this[t]=function(){return e.get(t)}},f.prototype._generateFakeName=function(){return[this._values.type,n(this._values)].join("-").replace(/-+/g,"-")},f.prototype.get=function(t){if("string"==typeof t||"number"==typeof t)return this._values[t]},f.prototype.set=function(t,e){return"string"!=typeof t&&"number"!=typeof t||this._values[t]===e||(this._values[t]=e,this[t]||this._createFieldGetter(t)),this},f.prototype.merge=function(t){var e=t instanceof f?t._values:t;for(var n in e)this.set(n,void 0!==e[n]?e[n]:e[n]||null);return i.i(c.c)(this.get("ext"))&&(this.set("ext","mp4"),this._hls=!0),this},f.prototype.getName=function(){return l.Utils.replaceEntities(this._values.title||this._values.filename||this._generateFakeName())},f.prototype.title=function(){return this.getName().substr(0,f.MAX_FILE_NAME_LENGTH)},f.prototype.getFilename=function(){var t=this.getName(),e="."+this._values.ext,i=0;return t.endsWith(e)&&(i=e.length+1),t=t.replace(/\s+/g," ").replace(/[\/\\:*?"<>|\u200c\u200d]/g,"-").substr(0,f.MAX_FILE_NAME_LENGTH-i)+e},f.prototype.extQuality=function(){return(this.get("ext")||"")+"/"+(this.get("quality")||"")},f.prototype.size=function(){var t=this.get("size");return t?"("+l.Utils.beautifyFileSize(t)+")":""},f.prototype.getSize=function(){var t=this;if(t._sizePromise)return t._sizePromise;var e=new Promise(function(i,n){function r(t){t&&a.push(l.Utils.getSize(t))}var o=t.get("size");if((o=l.Utils.defined(o)?o:0)||null===o||t._hls)return i(o);var a=[],s=t.get("url");if("object"===(void 0===s?"undefined":h(s))){[s.audioUrl,s.videoUrl].forEach(r)}else r(s);a=a.length>0?1===a.length?a[0]:Promise.all(a):Promise.reject();var c=t.get("altUrl");a.then(function(){for(var e=arguments.length,n=Array(e),r=0;r<e;r++)n[r]=arguments[r];for(var o=l.Utils.flatten(n),a=0,s=o.length-1;s>=0;s--)a+=o[s];t.set("size",a),i(a)}).catch(function(){if(c){var i=l.Utils.getSize(c);i.then(function(e){t.set("size",e)}).catch(function(t){n(t)}),e.bind(i)}else n(null)})});return t._sizePromise=e,e};var p=function(t,e,i){this.api=window.downloads,this._uninitialized=!0,l.Utils.defined(e)||(e=-1),this._tid=e,this.data=[],this.setMediaData(t,i)};p.prototype={setMediaData:function(t,e){var i=this;return new Promise(function(r){if(!t)return r(i,!1),e&&e(),this;Promise.all([t]).then(function(t){var o=t[0];if(i._uninitialized&&0===o.length)return i._uninitialized=!1,void r(i,!0);i._uninitialized=!1;var a=i.data,s=new Array(a.length),l=a.map(function(t){return t.id()});o.forEach(function(t){t.id=t.id||n(t);var e=l.indexOf(t.id),r=void 0;-1===e?(l.push(t.id),r=new f(t),a.push(r)):(e<s.length&&(s[e]=!0),r=a[e],r.merge(t)),r._ditem=i.api.item(i._tid,t.id)});for(var c=s.length!==a.length,u=s.length-1;u>=0;u--)s[u]||(c=!0,a.splice(u,1));r({model:i,updated:c}),e&&e()})})},getMediaCount:function(){var t=this.data;if(0===t.length)return 0;for(var e=0,i={},n=0;n<t.length;++n){var r=t[n],o=r.title()+r.type();i[o]||(i[o]=!0,++e)}return e},getMedia:function(t){return this.data.filter(function(e){return e.id()===t})[0]},getMediaGroup:function(t){return this.data.filter(function(e){return-1!==t.indexOf(e.id())})},download:function(t){var e=this.getMedia(t);if(e){var i={id:e.id(),url:e.url(),filename:e.getFilename(),referrer:e.referrer(),hls:e._hls};"function"==typeof e.soundOnly&&(i.soundOnly=e.soundOnly()),"function"==typeof e.quality&&(i.quality=e.quality());var n=this.api.download(this._tid,i);return n.then(function(t){e._ditem=t}),void 0!==i.soundOnly&&i.soundOnly&&d.a.log("Download",d.a.DOWNLOAD_SOUND_ONLY),i.filename&&i.filename.match(/\.yt_srt$/i)&&d.a.log("Download",d.a.DOWNLOAD_SUBTITLES),n}},onChange:function(t){this.api.onChange(this._tid,t)},group:function(){return s(r(this.data,["type","title","ext","quality"]))},filterByCommonFields:function(t,e,i){var n=this.getMedia(t);return i=i||[],this.data.filter(function(r){return t!==r.id&&e.reduce(function(t,e){return t&&n[e]&&r[e]&&n[e]()===r[e]()},!0)&&i.reduce(function(t,e){return t&&n[e]&&r[e]&&n[e]()!==r[e]()},!0)})},getSameQualityMediaFormats:function(t){var e=this.filterByCommonFields(t,["title","type","quality"],["ext"]).map(function(t){return t.ext&&t.ext()});return Array.from(new Set(e))},getSameFormatMediaQuality:function(t){var e=this.filterByCommonFields(t,["title","type","ext"],["quality"]).map(function(t){return t.quality?u.a.getSizeByQuality(t.quality()):0});return Array.from(new Set(e))},getAllMediaFormats:function(t){return this.filterByCommonFields(t,["title","type"]).reduce(function(t,e){var i=e.ext&&e.ext(),n=e.quality?u.a.getSizeByQuality(e.quality()):0;return i?(t[i]||(t[i]=[]),-1===t[i].indexOf(n)&&t[i].push(n),t):t},{})},isOneMedia:function(){for(var t=this.data,e={},i=void 0,n=void 0,r=0,o=0;r<t.length&&o<=1;++r)if(i=t[r],n=i.title()+i.type(),!e[n]&&(e[n]=!0,++o>1))return!1;return!0}}},function(t,e,i){"use strict";var n=i(0),r=i(75),o=i(77),a=(i(76),i(14)),s=function(){this.detector=new r.a,this._savedStyles=new Map,this._appliedStyles=new Map,this._observer=new MutationObserver(this._onStylePropertyChange.bind(this))};s.prototype={PIPED_PLAYER_STYLE:{left:"0!important",top:"0!important",padding:"0!important",margin:"0!important",border:"0px none!important",width:"100%!important",height:"100%!important","min-width":"100%!important","max-width":"none!important","min-height":"100%!important","max-height":"none!important",transform:"none!important"},PLAYER_SIBLINGS_STYLE:{display:"none!important",visibility:"hidden!important",opacity:"0!important",width:"0!important",height:"0!important",margin:"0!important",padding:"0!important",border:"0px none!important",overflow:"hidden!important"},GENERATE_STACKING_CONTEXT_STYLE:{left:"0!important",top:"0!important",padding:"0!important",margin:"0!important",border:"0px none!important",width:"100%!important",height:"100%!important","min-width":"100%!important","max-width":"none!important","min-height":"100%!important","max-height":"none!important",overflow:"hidden!important",transform:"none!important"},GENERATE_STACKING_OUTER_STYLE:{"font-size":"0!important","line-height":"0!important","z-index":Number.MAX_SAFE_INTEGER-1+"!important"},FLASH_DIMENSION_PROPS:{width:"100%!important",height:"100%!important",_width:"100%",_height:"100%"},TAGS_NON_AFFECTING_LAYOUT:"head, script, style, link, meta",MUTATION_OBSERVER_CONFIG:{childList:!1,attributes:!0,characterData:!1,subtree:!1,attributeOldValue:!1,characterDataOldValue:!1,attributeFilter:["style","width","height"]},_onStylePropertyChange:function(t){var e=t.filter(function(t){var e=t.target,i=e.getAttribute(t.attributeName)||"",r=this._appliedStyles.get(e),o=void 0,a=void 0,s=void 0;switch(t.attributeName){case"style":o=n.Utils.dom.parseStyleAttr(i);for(s in r)if(o[s]!==r[s])return!0;return!1;case"width":case"height":return a="_"+t.attributeName,r[a]!==i}return!1}.bind(this)).map(function(t){return t.target});this._reApplyStyles(e)},_watchStyleChanges:function(){this._appliedStyles.forEach(function(t,e){this._observer.observe(e,this.MUTATION_OBSERVER_CONFIG)}.bind(this))},_stopWatchingStyleChanges:function(){this._observer.disconnect()},_getNodeSize:function(t){var e=n.Utils.dom.getEmbedSize(t);return{width:e.width||640,height:e.height||480}},_iterateSiblings:function(t,e){for(var i=t.parentNode&&t.parentNode.children,n=0;i&&n<i.length;n++)i[n]!==t&&e(i[n])},_nodeInDocument:function(t){for(;t&&t!==document;)t=t.parentNode;return t===document},_saveStyle:function(t){var e=t.style,i={};for(var n in e)e.hasOwnProperty(n)&&""!==e[n]&&(i[n]=t.style[n]);["OBJECT","EMBED","IFRAME"].indexOf(t.tagName.toUpperCase())>-1&&t.width&&(i._width=t.width,i._height=t.height),0!==t.scrollTop&&(i._scrollTop=t.scrollTop),this._savedStyles.set(t,i)},_restoreStyle:function(t){var e=t.style,i=this._savedStyles.get(t);if(i){for(var n in e)e.hasOwnProperty(n)&&(n in i?e[n]=i[n]:""!==e[n]&&(e[n]=""));i._width&&(t.width=i._width),i._height&&(t.height=i._height),i._scrollTop&&(t.scrollTop=i._scrollTop)}},detachPlayerOrNode:function(t){var e=void 0,i=void 0;if(!this._currentPiP){if(t instanceof HTMLElement){if(!this._nodeInDocument(t))return;i=t,e=!1}else i=t.node,e=Boolean(t.restore&&t.detach);o.a.hasSpecialSupport()&&(i=o.a.getNode());var n=this._getNodeSize(i),r=void 0;if(e){if(!t.detach(this._maximizeNode.bind(this)))return;r={player:t}}else this._maximizeNode(i),r={node:i};this._currentPiP=r,chrome.extension.inIncognitoContext&&(n.incognito=!0),this.emit("tab_detached",n)}},_saveAppliedStyle:function(t,e){var i=this._appliedStyles.get(t)||{};for(var n in e)e.hasOwnProperty(n)&&(i[n]=e[n]);this._appliedStyles.set(t,i)},_applyStyleForNode:function(t){var e=this._appliedStyles.get(t);e&&n.Utils.dom.setStyleAttr(t,e),e._width&&(t.width=e._width),e._height&&(t.height=e._height)},_maximizeNode:function(t){var e=null,i=!1,n=this._getNodeSize(t);this._savedStyles.clear(),this._appliedStyles.clear(),this._saveAppliedStyle(t,this.PIPED_PLAYER_STYLE);var r=t.querySelector("embed");r&&(this._saveStyle(r),this._saveAppliedStyle(r,this.FLASH_DIMENSION_PROPS));for(var o=t;o&&o!==document;o=o.parentNode)if(!o.matches(this.TAGS_NON_AFFECTING_LAYOUT)){if(this._saveStyle(o),this._saveAppliedStyle(o,this.GENERATE_STACKING_CONTEXT_STYLE),i&&this._saveAppliedStyle(o,this.GENERATE_STACKING_OUTER_STYLE),o.matches("object, embed")&&this._saveAppliedStyle(o,this.FLASH_DIMENSION_PROPS),o.matches("iframe"))i=!0;else if(!i&&(Math.min(o.parentNode.scrollWidth,o.parentNode.offsetWidth)!==n.width||Math.min(o.parentNode.scrollHeight,o.parentNode.offsetHeight)!==n.height)){i=!0,e=window.getComputedStyle(o);var a={"font-size":e["font-size"]+"!important","line-height":e["line-height"]+"!important","z-index":Number.MAX_SAFE_INTEGER-1+"!important"};this._saveAppliedStyle(o,a)}i&&this._iterateSiblings(o,function(t){t.matches(this.TAGS_NON_AFFECTING_LAYOUT)||(this._saveStyle(t),this._saveAppliedStyle(t,this.PLAYER_SIBLINGS_STYLE))}.bind(this))}var s=function(){this._reApplyStyles(),this._watchStyleChanges()}.bind(this);window.addEventListener("resize",s)},_restoreNode:function(){this._savedStyles.forEach(function(t,e){this._restoreStyle(e)}.bind(this)),this._savedStyles.clear(),this._appliedStyles.clear()},_reApplyStyles:function(t){Array.isArray(t)?t.forEach(this._applyStyleForNode.bind(this)):this._appliedStyles.forEach(function(t,e){this._applyStyleForNode(e)}.bind(this))},restore:function(){this._currentPiP&&(this._stopWatchingStyleChanges(),this._currentPiP.player?this._currentPiP.player.restore(this._restoreNode.bind(this)):this._restoreNode(this._currentPiP.node),this._currentPiP=null,this.emit("tab_restored",null))},get isPanelMode(){return!!this._currentPiP}},a(s.prototype),e.a=new s},function(t,e,i){"use strict";function n(){}var r=i(17);n.prototype={constructor:n,verify:function(t){var e=this,i=t.split("."),n=i[0],o=i[1],a=i[2];return window.crypto.subtle.importKey("jwk",r.a,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]).then(function(t){return window.crypto.subtle.verify({name:"RSASSA-PKCS1-v1_5"},t,e._base64UrlToUint8Array(a),e._stringToArrayBuffer(n+"."+o))}).then(function(t){var i=e.parsePayload(o);return null===i?Promise.reject("Cannot parse JWT"):{data:i,valid:t}})},shouldHideWidget:function(t,e){var i=this;return new Promise(function(n){return i.verify(t).then(function(t){n(t.valid&&t.data&&i.checkURLPattern(t.data.host,e)&&i.checkTime(t.data.exp,t.data.iat)?!0:!1)}).catch(function(t){n(!1)})})},checkURLPattern:function(t,e){var i=e.replace("www.","");if(i===t)return!0;var n=new RegExp("^"+t.replace("*.","(?:\\w+\\.)*")+"$");return!!i.match(n)},checkTime:function(t,e){var i=Date.now();return 1e3*t>i&&1e3*e<=i},parsePayload:function(t){var e=void 0;try{e=JSON.parse(this._base64UrlToString(t))}catch(t){return null}return e},_stringToBase64Url:function(t){return btoa(t).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")},_base64UrlToString:function(t){return atob(this._base64UrlToBase64(t))},_base64ToBase64Url:function(t){return t.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")},_base64UrlToBase64:function(t){return(t+"===".slice((t.length+3)%4)).replace(/-/g,"+").replace(/_/g,"/")},_base64UrlToUint8Array:function(t){return this._base64ToUint8Array(this._base64UrlToBase64(t))},_stringToArrayBuffer:function(t){for(var e=new ArrayBuffer(t.length),i=new Uint8Array(e),n=0,r=t.length;n<r;n++)i[n]=t.charCodeAt(n);return e},_base64ToUint8Array:function(t){var e=atob(t).split(""),i=e.map(function(t){return t.charCodeAt(0)});return new Uint8Array(i)}},e.a=new n},function(t,e,i){"use strict";var n=i(0),r=i(2),o=i(20),a=n.Utils.query.bind(n.Utils),s=n.Utils.getNodePropOrEmptyString.bind(n.Utils),l=function(t,e,i,n,r){this._node=e,this._docId=n,this._index=r,this._data=this._extractData(e,i),this._validateAndSetDataType(t),this._attachClickHandler()};l.prototype={TITLE_SELECTOR:"h3 a",VISIBLE_URL_SELECTOR:"cite",LINK_SELECTOR:"h3 a:not([id])",DESC_SELECTOR:".st",_extractData:function(t,e){var i=a(this.TITLE_SELECTOR,t),n=a(this.VISIBLE_URL_SELECTOR,t),r=a(this.DESC_SELECTOR,t),o=a(this.LINK_SELECTOR,t);return{url:s(o,"href"),visibleUrl:s(n,"textContent"),position:e,title:s(i,"textContent"),description:s(r,"textContent"),addRawContent:""}},_validateAndSetDataType:function(t){this._isDataValid(this._data)?this._data.type=t:this._data.type="unknown"},_isDataValid:function(t){return Boolean(t.title&&t.visibleUrl&&t.url&&t.description)},_attachClickHandler:function(){this._clickHandler=this._onClick.bind(this),this._node.addEventListener("click",this._clickHandler,!0)},_onClick:function(t){var e=n.Utils.nearestParent(t.target,"a"),i=void 0,r=void 0;return e&&e.nodeType===Node.ELEMENT_NODE&&(i=e.getAttribute("href"),i.trim().match(/^(#|javascript:)/)||(r=e.dataset.href||e.href||this.data.url||"",o.a.triggeResultClicked(),this._reportClick(r))),!0},_reportClick:function(t){r.a.log("SerpClickData",{serpId:this._docId,itemIndex:this._index,timestamp:Date.now(),url:t})},_reportClickConsole:function(t){},destroy:function(){this._node.removeEventListener("click",this._clickHandler),this._node=null,this._data=null},get data(){return this._data},renderToConsole:function(){this.data.type;this.data.addRawContent}},e.a=l},function(t,e,i){"use strict";function n(t){this._widget=t,this._downloads=null,location.protocol.includes("chrome")&&location.pathname.includes("popup.html")&&this.initPlayNowListener(),s.a.load()}var r=i(0),o=i(18),a=i(2),s=i(3),l=i(1),c=i(6),u=i.n(c),d=!r.Utils.IS_CONTENT_SCRIPT;n.prototype={setDownloads:function(t){this._downloads=t},render:function(t,e,n){e.downloads=this._downloads.group(),d&&(e.is_only=this._downloads.isOneMedia());var a=r.Utils.query("#downloads",this._widget);a.innerHTML=u.a.render(t,e,{media_template:s.a.get("template-media")}),a.classList.add("content");var l=this.applyCurrentValues(n);if(d){var c=r.Utils.query(".downloads-list",this._widget);c.scrollHeight>c.offsetHeight&&(i.i(o.a)(r.Utils.queryAll("h1",this._widget),c),c.addEventListener("scroll",this._getSizeOfVisibleMedia.bind(this),!1),r.Utils.query("#close-popup",this._widget).classList.add("pulled")),this._widget.classList.add("done")}return l},initPlayNowListener:function(){var t=this;chrome.runtime.onMessage.addListener(function(e){if("downloads"===e.requestType&&"widget_progress"===e.method){var i=e.params;if(i.mime&&i.mime.includes("video")&&!i.filename.match(/\.mp3$/)){var n=i.url,o=t._widget.querySelector('a[data-url="'+n+'"]'),a=void 0;if(!o)return;a=r.Utils.nearestParent(o,"li.j-media-scope"),i.exists&&(i.playable||"complete"===i.state)?t._handleProgress(a,i):"interrupted"!==i.state&&i.exists||t._changeWidgetMode(a,"select_media")}}})},_handleProgress:function(t,e){var n=0,o=t.querySelector(".play-now-btn"),s=parseInt(o.dataset.downloadId);if(s&&s===e.id||(o.dataset.downloadId=e.id),t.matches(".progress-mode")||(this._changeWidgetMode(t,"progress"),a.a.log("PlayNow",a.a.PLAY_NOW_SHOWN)),"complete"!==e.state){var l=(e.bytesReceived/e.totalBytes*100).toFixed(0);l<0&&(l=0),n=l+"%"}else n="100%";var c=t.querySelector(".progress-bar .bar");c&&(c.style.width=n);var u=r.Utils.beautifyFileSize(e.totalBytes,!0),d=r.Utils.beautifyFileSize(e.bytesReceived,!0),h=t.querySelector(".progress-box .progress-text");h&&(h.innerText="100%"!==n?d+" "+i.i(r.i18n)("play_now_received_from")+" "+u:u);var f=t.dataset.prevReceived||0,p=e.bytesReceived-f;p<0&&(p=Math.abs(p)),p<0&&(p=0);var _=r.Utils.beautifyFileSize(p,!0),m=t.querySelector(".progress-box .speed-text");m&&(m.innerHTML="100%"!==n?'<span class="green-arrow">&#129095;</span> '+_+"/"+i.i(r.i18n)("play_now_per_second"):""),t.dataset.prevReceived=e.bytesReceived},_changeWidgetMode:function(t,e){t.classList.remove("progress-mode","select-mode"),t.classList.add(e+"-mode")},_checkFileSize:function(t){var e=this,i=this._downloads.getMedia(t);if(i&&!i.get("size")){a.a.log("Download",a.a.DOWNLOAD_REQUEST_SIZE);var n=r.Utils.query("#size_"+i.id(),this._widget);i.getSize().then(function(t){n&&(n.classList.add("done"),n.textContent=i.size(),t||a.a.log("Download",a.a.DOWNLOAD_REQUEST_SIZE_FAILED))}).catch(function(){n.classList.add("done"),n.textContent="(Error)",r.Utils.query("#media_"+i.id(),e._widget).setAttribute("disabled","disabled")})}},_applyCurrentValues:function(t){var e=t.querySelector(".j-quality-selector"),i=e.value;r.Utils.queryAll(".j-quality-option, .j-quality-download",t).forEach(function(t){t.hidden=t.dataset.quality!==i,d||t.hidden||!t.classList.contains("j-quality-download")||this._checkFileSize(t.dataset.id)},this),d&&this._getSizeOfVisibleMedia()},applyCurrentValues:function(t){var e=this._downloads,i=s.a.get("prefer_last_quality")&&s.a.get("preferred_quality:"+t),n=r.Utils.queryAll(".j-media-scope",this._widget);return n.forEach(function(n){var o=r.Utils.queryAll(".j-quality-download",n);if(o.length>1){var a=o.map(function(t){return t.dataset.id}),s=l.a.chooseBestDownload(e.getMediaGroup(a),t,i),c=r.Utils.query(".j-quality-selector",n);c&&(c.value=s.extQuality())}this._applyCurrentValues(n)},this),n},_getSizeOfVisibleMedia:function(){for(var t=r.Utils.query(".downloads-list",this._widget),e=t.scrollTop,i=t.offsetHeight,n=r.Utils.queryAll(".j-quality-download:not([hidden])",t),o=0,a=n.length;o<a;++o){var s=n[o];if(s.offsetTop>e+i+10)break;this._checkFileSize(s.dataset.id)}},getMetricsParams:function(t,e){var i=t instanceof Node?t.dataset.id:t,n=this._downloads,r=n.getMedia(i),o=e||{},a=n.getAllMediaFormats(i),s=[];for(var c in a)s.push(c+":"+a[c].join("|"));var u=r.ext?r.ext():"unknown";return o.size=r.quality?l.a.getSizeByQuality(r.quality()):0,o.ext=u,o.same_size_exts=n.getSameQualityMediaFormats(i).join("|"),o.same_ext_sizes=n.getSameFormatMediaQuality(i).join("|"),o.total=s.join(","),o},download:function(t){if(!t.classList.contains("j-disabled"))return t.classList.add("j-disabled"),t.classList.add("btn-progress"),this._downloads.download(t.dataset.id).then(function(){t.classList.remove("btn-progress"),t.classList.add("btn-started")}).catch(function(e){t.classList.remove("btn-progress"),t.classList.remove("j-disabled")})}},e.a=n},function(t,e,i){"use strict";var n=i(43)();t.exports=function(t){return t!==n&&null!==t}},function(t,e,i){"use strict";var n,r,o,a,s,l,c,u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},d=i(42),h=i(52),f=Function.prototype.apply,p=Function.prototype.call,_=Object.create,m=Object.defineProperty,y=Object.defineProperties,v=Object.prototype.hasOwnProperty,g={configurable:!0,enumerable:!1,writable:!0};n=function(t,e){var i;return h(e),v.call(this,"__ee__")?i=this.__ee__:(i=g.value=_(null),m(this,"__ee__",g),g.value=null),i[t]?"object"===u(i[t])?i[t].push(e):i[t]=[i[t],e]:i[t]=e,this},r=function(t,e){var i,r;return h(e),r=this,n.call(this,t,i=function(){o.call(r,t,i),f.call(e,this,arguments)}),i.__eeOnceListener__=e,this},o=function(t,e){var i,n,r,o;if(h(e),!v.call(this,"__ee__"))return this;if(i=this.__ee__,!i[t])return this;if(n=i[t],"object"===(void 0===n?"undefined":u(n)))for(o=0;r=n[o];++o)r!==e&&r.__eeOnceListener__!==e||(2===n.length?i[t]=n[o?0:1]:n.splice(o,1));else n!==e&&n.__eeOnceListener__!==e||delete i[t];return this},a=function(t){var e,i,n,r,o;if(v.call(this,"__ee__")&&(r=this.__ee__[t]))if("object"===(void 0===r?"undefined":u(r))){for(i=arguments.length,o=new Array(i-1),e=1;e<i;++e)o[e-1]=arguments[e];for(r=r.slice(),e=0;n=r[e];++e)f.call(n,this,o)}else switch(arguments.length){case 1:p.call(r,this);break;case 2:p.call(r,this,arguments[1]);break;case 3:p.call(r,this,arguments[1],arguments[2]);break;default:for(i=arguments.length,o=new Array(i-1),e=1;e<i;++e)o[e-1]=arguments[e];f.call(r,this,o)}},s={on:n,once:r,off:o,emit:a},l={on:d(n),once:d(r),off:d(o),emit:d(a)},c=y({},l),t.exports=e=function(t){return null==t?_(c):y(Object(t),l)},e.methods=s},,,function(t,e,i){"use strict";e.a={kty:"RSA",n:"t5P2Nmmm7TCeGMx4YKXP-lhdeKpTDIGtqPcgI8CtkKPrsCz51RsD9nstDkSQJycx4Jwbepu2J14OqDYYAU_JcnJTxoDOD2ixk9HlqPkeYj2U7LKfANFnLwXZ_Ug1EjYH6iN6lM_NSbXwNkgWksZvBcADfpjsSAD01TV89Xw-3gU",e:"AQAB"}},function(t,e,i){"use strict";function n(t,e){function i(){for(var t=e.scrollTop,i=-1;i<r-1&&n[i+1].top<=t;)i++;return-1!==i&&(o!==i&&(-1!==o&&(n[o].node.style.position="static",n[o].placeholder.hidden=!0),n[i].node.style.position="fixed",n[i].placeholder.hidden=!1,o=i),i!==r-1&&t+n[i].height>n[i+1].top?(n[i].node.style.top=10-(t+n[i].height-n[i+1].top)+"px",n[i].node.classList.contains("pulled")||n[i].node.classList.add("pulled")):(n[i].node.style.top="10px",n[i].node.classList.contains("pulled")&&n[i].node.classList.remove("pulled")),!1)}var n=[],r=t.length,o=-1;r<1||(e.style.position="relative",n=t.map(function(t){var e=document.createElement("div");return e.style.height=t.offsetHeight+"px",e.hidden=!0,t.parentNode.insertBefore(e,t),{node:t,top:t.offsetTop,height:t.offsetHeight,placeholder:e}}),e.addEventListener("scroll",i,!1))}e.a=n},function(t,e,i){"use strict";var n=function(){};n.prototype={constructor:n,_sendMessage:function(t,e,i){chrome.runtime.sendMessage({requestType:"cache",method:t,params:e},i)},get:function(t){return new Promise(function(e,i){this._sendMessage("get",{key:t},function(t){t&&"reject"!==t.success?e(t.data):i(t)})}.bind(this))},put:function(t,e,i){this._sendMessage("put",{key:t,value:e,ttl:i})},delete:function(t){this._sendMessage("delete",{key:t})},proxy:function(t,e,i,n){var r=this;return new Promise(function(o){this.get(e+n).then(o).catch(function(){new Promise(i.call(t,n)).then(function(t){r.put(e+n,t)}).then(function(t){o(t)})})}.bind(this))}},e.a=new n},function(t,e,i){"use strict";var n=i(0),r=i(95),o=n.Utils.query.bind(n.Utils),a=function(){n.Utils.g.isSERPHost(location.host)&&(this._lastQs=null,this._currentQParams=n.Utils.g.getSearchParams(location.href),this._isLastWasIndex=this._isIndexPage,window.addEventListener("popstate",this._onPopState.bind(this)),window.addEventListener("hashchange",this._onPopState.bind(this)),this._startPolling())};a.prototype={POLLING_INTERVAL:200,SERP_URL_PATTERN:/[#?&]q=.+/,get _isOrganic(){return!n.Utils.g.getSearchParams(location.href).tbm},_clearResults:function(){this._currentResults&&this._currentResults.destroy(),this._currentResults=null,this._currentQParams=null},_reportResultsIfQueriesMatch:function(){this._currentResults&&this._currentResults.isSameSearchAs(this._currentQParams)&&(this._currentResults.report(this._isLastWasIndex),this._isLastWasIndex=!1)},_onPopState:function(){if(!this._isOrganic)return void this._clearResults();this._currentQParams=n.Utils.g.getSearchParams(location.href),this._reportResultsIfQueriesMatch()},_onResultsRendered:function(){if(!this._isOrganic)return void this._clearResults();this._currentResults&&this._currentResults.destroy(),this._currentResults=new r.a,this._reportResultsIfQueriesMatch()},triggeResultClicked:function(){if(!this._isOrganic)return void this._clearResults();this._currentResults&&(this._currentResults.report(this._isLastWasIndex),this._isLastWasIndex=!1)},get _isDOMStateDifferent(){var t=o(".qs");return!!t&&(t!==this._lastQs&&(this._lastQs=t,!0))},get _areQParamsDifferent(){var t=n.Utils.g.getSearchParams(location.href);return!this._currentQParams&&t.q||t.q!==this._currentQParams.q||t.s!=this._currentQParams.s},get _isResultBlockVisible(){var t=o("#search");return!!t&&"hidden"!==t.style.visibility},get _isIndexPage(){return!this.SERP_URL_PATTERN.test(window.location.href)},_startPolling:function(){setInterval(this._onTimerTick.bind(this),this.POLLING_INTERVAL)},_onTimerTick:function(){this._isResultBlockVisible&&this._isDOMStateDifferent&&this._onResultsRendered(),this._areQParamsDifferent&&this._onPopState(),this._isLastWasIndex||(this._isLastWasIndex=this._isIndexPage)}},e.a=new a},,,,function(t,e,i){"use strict";Object.defineProperty(e,"__esModule",{value:!0});var n=i(0),r=i(3),o=i(19),a=i(36),s=i(37),l=i(38),c=i(9),u=i(10),d=i(33),h=i(35),f=i(34);i(20);i(39),window.downloads=h.a;var p=function(){this._options=r.a,this._cache=o.a,this._manager=a.a,this._mediaScanner=new s.a(this._manager),this._overlay=l.a,this._options.load().then(this._init.bind(this)),this._pip=c.a,this._exportGlobals(),this._controls=null,this._jwtTool=u.a,this._shouldHideWidget=!1,this._isPanelWindow=!1};p.prototype={constructor:p,_init:function(){this.onMediaUpdate=this._onMediaUpdate.bind(this),this.onUnload=this._onUnload.bind(this),this.onMessageReceived=this._onMessageReceived.bind(this),window.onbeforeunload=this.onUnload,this._mediaScanner.on("media_update",this.onMediaUpdate),this._pip.on("tab_detached",this._onPiPDetach.bind(this)),chrome.runtime.onMessage.addListener(this.onMessageReceived),this.doNotShowWidgetByToken().then(function(t){this._shouldHideWidget=t}.bind(this)).catch(function(t){}),this.checkEmbedYoutube()},_exportGlobals:function(){window.cache=this._cache,document.addEventListener("DOMContentLoaded",function(){window.pageComm=new d.a})},_hasMedia:function(t){return!!n.Utils.flatten(n.Utils.toArray(t)).filter(function(t){return!!(t&&t.ids&&Array.isArray(t.ids)&&n.Utils.flatten(t.ids).length>0)}).length},_onMediaUpdate:function(t){var e=this._hasMedia(t);if(!n.BGUtils.sendMessage({requestType:"media",method:"set_present",params:e}))return void this.onUnload();this._controls||!document.documentElement||!this.canShowControls||this._shouldHideWidget||this._isPanelWindow||(this._controls=i.i(f.a)(document.documentElement)),this._controls&&this._controls.setMediaPlayers(this._manager,t)},_onMessageReceived:function(t,e,n){var r=null;switch(t.requestType){case"get_media":a.a.getMedia().then(function(t){n(t)});break;case"downloads":r=window.downloads.processRequest(t.method,t.params);break;case"request.matched":a.a.processRequest(t);break;case"restore_tab":this._mediaScanner.start(),this._pip.restore();break;case"yt_change":this._controls.destroy(),this._controls=i.i(f.a)(document.documentElement);break;case"hide_playnow_tooltip":this._controls&&this._controls.playNowBottomTooltip&&this._controls.playNowBottomTooltip.hide()}return r&&r.then(function(t){n({success:r.state===Promise.RESOLVED,data:t})}),!0},_onPiPDetach:function(t){this._mediaScanner.pause(),n.BGUtils.sendMessage({requestType:"pip",method:"detachTab",params:t}),this._controls&&this._controls.playNowBottomTooltip&&this._controls.playNowBottomTooltip.hide()},_onUnload:function(){this._controls&&this._controls.destroy(),this._overlay.destroy(),this._mediaScanner.destroy(),this._pip.isPanelMode&&n.BGUtils.sendMessage({requestType:"pip",method:"restorePanelToTab",params:null})},doNotShowWidgetByToken:function(){return new Promise(function(t){var e=n.Utils.query("[data-savior-token]");e||t(!1);var i=e.getAttribute("data-savior-token"),r=location.host,o=this._jwtTool.parsePayload(i.split(".")[1]);null===o&&t(!1),this._jwtTool.checkURLPattern(o.host,r)?n.BGUtils.sendMessage({requestType:"verify_token",params:{token:i,host:r}},function(e){t(e.data)}):t(!1)}.bind(this))},checkEmbedYoutube:function(){window.location.href.match(/https?:\/\/(?:www)\.youtube\.com\/embed\//)&&(this._isPanelWindow=!0,chrome.runtime.sendMessage({requestType:"should_show_widget"},function(t){t&&"resolve"===t.success&&t.data&&(this._isPanelWindow=!1)}.bind(this)))},get canShowControls(){return"file:"!==location.protocol&&""!==location.hostname&&"localhost"!==location.hostname},start:function(){n.BGUtils.sendMessage({requestType:"media",method:"reset_all"}),this._mediaScanner.start()}};var _=new p;_.start(),e.default=_},function(t,e,i){"use strict";var n=i(4),r=i(0),o=void 0,a={"3072p":"Super HD","2160p":"Ultra HD","1440p":"Quad HD","1080p":"Full HD","720p":"HD","480p":"Standard","360p":"Medium","270p":"Small","240p":"Small","144p":"Mobile"};!function(){function t(t){for(var e=void 0,i=0;i<d.length;++i)if(e=t.match(d[i]))return e[1];return null}function e(){var e=t(location.href);if(!e){var i=r.Utils.query("[data-video-id]");e=i&&i.dataset.videoId}return e||null}function s(t){return new Promise(function(e,i){return r.Utils.getYoutubeInfo(h+t).then(function(t){return c(e.bind(this),t)}).catch(function(t){return i(t)})})}function l(t,e){if(!t.caption_tracks)return null;var n={},o={};if(t.caption_tracks.split(",").forEach(function(t){var e=t.split("&").reduce(function(t,e){var i=e.split("="),n=i[0],r=decodeURIComponent(i[1]);return t[n]=r,t},{});n[e.lc]=e}),0===Object.keys(n).length)return null;var a=n.en||n[Object.keys(n)[0]];return e.forEach(function(t){var e=n[t],s=i.i(r.i18n)("subtitles_lang_"+t)||t.toUpperCase(),l=void 0;e?l=e.u:(s+=" "+i.i(r.i18n)("subtitles_auto_translated"),l=a.u+"&tlang="+t),o[s]=l}),o}function c(t,e){var n={},o=[],s=null;r.BrFeatures.SUBTITLES&&(s=l(e,["en","vi"]));var c=e.formats.map(function(t){t.resolution&&a[t.resolution]&&(t.quality=a[t.resolution]);var i={ext:t.container,filename:e.title,quality:t.quality,url:t.url,type:r.Utils.getMediaType(t.type)},s=r.UrlUtils.parse(t.url);return s.host=t.fallback_host,s.host&&(i.altUrl=r.UrlUtils.format(s)),!t.encoding&&t.audioEncoding&&(n[t.container]=n[t.container]||{audioBitrate:0},n[t.container].audioBitrate<t.audioBitrate&&(n[t.container]=t)),t.audioEncoding||o.push(i),i});if(o.forEach(function(t){if(!n[t.ext]||!n[t.ext].url||!_[t.ext])return t.url=null,void(t.quality=null);var e=t.url;t.url={videoUrl:decodeURIComponent(e),audioUrl:decodeURIComponent(n[t.ext].url)}}),s){var u=Object.keys(s).map(function(t){var n=r.UrlUtils.parse(s[t]);return n.ext="yt_srt",n.i18n_ext=i.i(r.i18n)("media_fields_ext_yt_srt"),n.filename=e.title,n.quality=t,n.type="video",n.isSubtitles=!0,n});c=c.concat(u)}t(c.filter(function(t){return!!t.url&&"m4a"!==t.ext}))}var u="https:"===location.protocol.toLowerCase()?"https:":"http:",d=[/^https?:\/\/(?:www\.)?youtube(?:-nocookie)?(?:\.googleapis)?\.com\/(?:(?:v)|(?:embed)|(?:e))\/(?!videoseries)([^&?]+)/i,/https?:\/\/(?:www\.)?youtu\.be\/([^#&?]+)/i,/https?:\/\/(?:www\.)?youtube\.com\/.*(?:\?|&)v=([^#&?]+)/i],h=u+"//www.youtube.com/watch?v=",f=[/^https?:\/\/(?:www\.)?facebook.com\//i],p=r.Utils.isMatches(document.location.href,f),_=r.BrFeatures.YT,m=i.i(n.a)({parse:function(t){return s(t)}});o=i.i(n.b)("youtube",function(){var e=this,o=[],a=[],s=void 0,l=r.Utils.query('meta[itemprop="isLiveBroadcast"]');if(l&&"True"===l.content)return o;if(r.Utils.query(".ytd-live-chat-frame"))return o;if(!r.Utils.query("#player-unavailable:not(.hid)")){s=r.Utils.query(".html5-video-player")||r.Utils.query("#player, #movie_player, #movie_player-html5, #movie_player-flash");var c=r.Utils.queryAll('embed[type="application/x-shockwave-flash"]',s);if(1===c.length&&(c=i.i(n.d)(c[0]))&&(s=c),s){s=e.makePlayer(s,[],m);var u=t(location.href);u&&(s.ids.push(u),a.push(u))}}var d=r.Utils.query(".channels-video-player, #upsell-video");if(d){var h=d.dataset;if(d=e.makePlayer(d,[],m),h){var f=h.videoId;f&&(d.ids.push(f),a.push(f))}s||(s=d,d=null)}return r.Utils.queryAll('iframe[src*="youtube"], embed[src*="youtube"]').forEach(function(i){var n=t(i.src);n&&-1===a.indexOf(n)&&(a.push(n),o.push(e.makePlayer(i,[n],m)))}),p&&r.Utils.queryAll('a[href*="youtube.com"], a[href*="youtu.be"]').forEach(function(i){var n=t(decodeURIComponent(i.href));n&&-1===a.indexOf(n)&&(a.push(n),i=null,o.push(e.makePlayer(i,[n],m,{aggressive:!0})))}),d&&d.ids.length&&o.splice(0,0,d),s&&s.ids.length&&o.splice(0,0,s),o.push(e.makePlayer(null,this._ids,m)),o},{dynamic:!0,pip:{detach:function(t){if(this.node.matches("iframe, embed"))return t(this.node),!0;var i=e();if(!i)return!1;var n="https://www.youtube";n+=".com/embed/"+i+"?showinfo=0&autohide=1&enablejsapi=1";var o=r.Utils.closest(this.node,"video");o.length&&(o=o[0],this._videoNode=o,o.currentTime>0&&(n+="&start="+Math.floor(o.currentTime)),o.ended||(n+="&autoplay=1"),o.pause()),document.body.style.overflow="hidden",document.documentElement.style.overflow="hidden";var a=document.createElement("iframe");r.Utils.dom.style(a,{position:"fixed",left:0,right:0,top:0,bottom:0,width:"100%",height:"100%","z-index":Number.MAX_SAFE_INTEGER-1}),a.setAttribute("allowfullscreen",!0),a.src=n;var s=document.body.children[0];return s?document.body.insertBefore(a,s):document.body.appendChild(a),this._pipNode=a,!0},restore:function(i){if(this.node.matches("iframe, embed"))return i(this.node);if(this._pipNode){var n=this._pipNode&&this._pipNode.contentWindow,r=n&&n.document.querySelector("video"),o=n&&n.document.querySelector("a.ytp-title-link");if(r&&o){e()!==t(o.href)?location.href=o.href+"#t="+Math.floor(r.currentTime):this._videoNode&&(this._videoNode.currentTime=r.currentTime,this._videoNode[r.paused?"pause":"play"]())}document.body.removeChild(this._pipNode),document.body.style.overflow="auto",document.documentElement.style.overflow="auto"}}}}),o.getMoviesById=s}(),e.a=o},,,,,,,,function(t,e,i){"use strict";var n=i(102),r=function(){var t=function(){this.port=Math.floor(Math.random()*Math.pow(2,32)),this.msgId=0,this._promises={},this._initPage(),window.addEventListener("message",this._listener.bind(this))};return t.prototype={send:function(t){var e=this;return t={data:t,id:this.msgId,port:this.port,type:"coc_crx2page"},new Promise(function(i){e._promises[e.msgId]=i,e.msgId++,window.postMessage(t,location.origin)})},_initPage:function(){var t=document.head||document.body;if(t){var e=document.createElement("script"),i="("+n.a.toString()+")(window,"+this.port+")";e.innerText=i,t.appendChild(e),setTimeout(function(){t.removeChild(e)},100)}},_listener:function(t){if(t.origin===location.origin&&t.data&&t.data.port===this.port&&"coc_page2crx"===t.data.type){var e=t.data;try{this._promises[e.id](e.data)}finally{delete this._promises[e.id]}}}},t}();e.a=r},function(t,e,i){"use strict";function n(t){return(t.createShadowRoot||t.webkitCreateShadowRoot).call(t)}function r(t,e){for(e=e.parentNode;e&&e!==t;)e=e.parentNode;return!!e}function o(t){t=t||{};var e=i.i(f.a)("div"),r=n(e),o=i.i(f.a)("style"),a="";(t.styles||chrome.runtime.getManifest().web_accessible_resources||[]).forEach(function(t){h.Utils.endsWith(t,".css")&&(a+='@import "'+chrome.runtime.getURL(t)+'";\n')}),o.innerHTML=a,r.appendChild(o);var s=i.i(f.a)("div","body");return r.appendChild(s),{element:e,shadowElement:s}}function a(t){function e(t){return-1!==["mouseenter","mouseover","touchstart","touchmove"].indexOf(t)}function i(i){var n=t.getTarget(i.target);if(n)return r(n,e(i.type)),!0}function n(t){var e=o[t.type];e&&(null!==s&&(s=t),e(t)&&(t.preventDefault(),t.stopPropagation()))}var r=h.Utils.debounce(t.onFocus.bind(this),g,!1),o={mouseenter:i,mouseleave:i},a=Object.keys(o),s=void 0;return{emitLastEvent:function(){var t=s&&o[s.type];t&&t(s),s=null},attach:function(t){for(var e=a.length-1;e>=0;e--)t.addEventListener(a[e],n,!0)},detach:function(t){for(var e=a.length-1;e>=0;e--)t.removeEventListener(a[e],n,!0)}}}function s(t,e){for(;e&&e!==document;){var i=t.getComputedStyle(e);if(i&&"fixed"===i.getPropertyValue("position"))return"fixed";e=e.parentNode}return"absolute"}function l(t){try{if(t.matches("object, embed")){var e=t.parentNode&&t.parentNode.matches("object")?t.parentNode:t.querySelector("embed");e&&e.offsetHeight>t.offsetHeight&&(t=e)}var i=t.ownerDocument.defaultView,n=s(i,t),r=t.getBoundingClientRect(),o=r.top,a=r.left;"fixed"!==n&&(o+=i.pageYOffset,a+=i.pageXOffset),t.matches("video")&&t.controls&&t.offsetHeight<35&&(a+=5,o=o+t.offsetHeight-35);return h.Utils.dom.getOffset(t).top<=w&&(o+=w),{position:n,top:o+"px",left:a+"px",height:r.height+"px",width:r.width+"px"}}catch(t){return null}}function c(t){function e(t){if(t){for(var e=t.parentNode;e;)t=e,e=t.parentNode;return t.activeElement}}function n(){c.hidden&&p.a.log("PageShown",p.a.PAGE_CONTENT_SHOW_CONTROLS),setTimeout(function(){c.hidden=!1},0)}function r(){setTimeout(function(){if(u.hide){var t=h.Utils.query(".downloads-multi #downloads",c);t&&(t.hidden=!0),c.hidden=!0}},v)}function o(){if(u.node){var t="",e=l(u.node);Object.keys(e).forEach(function(i){t+=i+":"+e[i]+";"}),c.setAttribute("style",t)}}function s(){h.Utils.isFullscreen()&&(u.hide=!0,r())}var c=i.i(f.a)("div","base overlay");c.innerHTML="&nbsp;",c.hidden=!0;var u={hide:!0,node:null,forced:!1};window.addEventListener("resize",o),document.addEventListener("webkitfullscreenchange",s);var d=a({onFocus:function(t,i){if(!u.forced){var a=void 0;if(!i&&(a=e(c))&&a.matches("select")){if("o"===t)return;a.blur()}if(!i||!y.a.get("on_page_buttons"))return u.hide=!0,void r();if(u.hide=!1,"o"!==t){u.node=t.node;var s=t.widget;s&&s.isReady()&&t.node.offsetParent&&(s.attach(c),o(),n())}}},getTarget:function(e){return e?e===c?"o":t.findEntry(e):e}});return d.attach(c),d.attach(document),{attach:function(t){t.appendChild(c),d.emitLastEvent()},destroy:function(){d.detach(document),d.detach(c),window.removeEventListener("resize",o),document.removeEventListener("webkitfullscreenchange",s)},forceShow:function(e){var i=t.findEntry(e);return!(!i||!i.widget.isReady())&&(u.hide=!1,u.node=e,u.forced=!0,i.widget.attach(c),o(),n(),i.widget)},cancelForced:function(){u.hide=!0,u.forced=!1,u.node=null,r()}}}function u(){this.reset(),this.nodeWithoutPlayer=null}function d(t){var e=new u,i=c(e),n=void 0,r=new m.a,a=new _.a;return r.overlayCtl={forceShow:i.forceShow,cancelForced:i.cancelForced},{destroy:function(){i&&(i.destroy(),i=null),n&&(t.removeChild(n.element),n=null),e.reset()},setMediaPlayers:function(s,l){e.setMediaPlayers(s,l)&&!n&&(n=o(),t.appendChild(n.element),i.attach(n.shadowElement),r.attach(n.shadowElement),h.BrFeatures.PLAY_NOW_BOTTOM_TOOLTIP&&(a.init(),a.attach(n.shadowElement))),r.processPlayers(s,h.Utils.flatten(l))},playNowBottomTooltip:h.BrFeatures.PLAY_NOW_BOTTOM_TOOLTIP?a:null}}e.a=d;var h=i(0),f=i(93),p=i(2),_=i(78),m=i(92),y=i(3),v=1500,g=50,w=26;u.prototype={reset:function(){this._nodesToMedia=new Map},findEntry:function(t,e){if(e)return this._nodesToMedia.get(t);for(var i=this._nodesToMedia.entries(),n=i.next();!n.done;n=i.next())if(n.value[0]===t||r(n.value[0],t)||n.value[1].coverNodesSet&&n.value[1].coverNodesSet.has(t))return{node:n.value[0],widget:n.value[1].widget};return null},setMediaPlayers:function(t,e){var i=0,n=[];e=this._removeEmptyPlayers(e),e=this._overlayCase(e);var r=this._getNotPipNodes(e);e=this._filterDescendant(e,r),e.forEach(function(e){var r=e.node;if(!r)return void(e.ids.length&&n.push(e));e.ids.length||this.nodeWithoutPlayer&&this._isNodeStillExist(this.nodeWithoutPlayer)||(this.nodeWithoutPlayer=r),this._nodesToMedia.forEach(function(t,e){r!==e&&(e.contains(r)||r.contains(e))&&this._nodesToMedia.delete(e)}.bind(this));var o=this._nodesToMedia.get(r),a=o?o.widget:null,s=this._getTopCoverNodesSet(r);a?s.size&&(o.coverNodesSet=s):(a=new f.b(r,r===this.nodeWithoutPlayer),this._nodesToMedia.set(r,{widget:a,coverNodeSet:s}),++i),a.setMediaData(t,e)}.bind(this));var o=this._nodesToMedia.get(this.nodeWithoutPlayer);return o=o?o.widget:null,this.nodeWithoutPlayer&&o&&n.forEach(function(e){var i=o.getWidgetPlayerName();(e.name===i||"pip"===i&&!e.opts.aggressive)&&(e.node=e.node?e.node:this.nodeWithoutPlayer,o.setMediaData(t,e))}.bind(this)),!!i},_removeEmptyPlayers:function(t){return t[0].filter(function(t){return t.node||t.ids.length&&h.Utils.flatten(t.ids).length})},_getNotPipNodes:function(t){return t.filter(function(t){return"pip"!==t.name&&t.node}).map(function(t){return t.node})},_filterDescendant:function(t,e){return t.filter(function(t){var i=t.node;return!("pip"===t.name&&(-1!==e.indexOf(i)||this._checkDescendant(e,i)))}.bind(this))},_checkDescendant:function(t,e){var i=!1;return t.forEach(function(t){(t.contains(e)||e.contains(t))&&(i=!0)}),i},_getTopCoverNodesSet:function(t){var e=new Set,i=t.getBoundingClientRect(),n=i.width,r=i.height;return[{x:i.left+n/4,y:i.bottom-r/4},{x:i.left+n/4,y:i.bottom-.75*r},{x:i.left+.75*n,y:i.bottom-.75*r}].forEach(function(i){var n=document.elementFromPoint(i.x,i.y);n!==t&&e.add(n)}),e},_overlayCase:function(t){var e=[];return t.forEach(function(t){var i=t.node;i&&(i.parentNode instanceof Node&&i.parentNode.matches("object")&&(i=i.parentNode),(location.host.match(/^([\w\d_-]+\.)*fptplay.net$/)&&i.matches("object")||location.host.match(/^([\w\d_-]+\.)*vnexpress.net$/)&&i.matches("video#media-video, video.video-js")||location.host.match(/^([\w\d_-]+\.)*nhaccuatui.com$/)&&i.matches("video#videonctPlayer"))&&(t.node=i.parentNode)),e.push(t)}),e},_isNodeStillExist:function(t){for(var e=t,i=!1,n=void 0;n=e.parentNode;){if(n===document){i=!0;break}e=n}return i}}},function(t,e,i){"use strict";function n(){var t=this;t._callbacks=[],t._data={},t._media2id={}}var r=i(0);n.prototype={processRequest:function(t,e){var i=this;switch(t){case"created":i._onCreated(e);break;case"erased":delete i._data[e];break;case"changed":i._onChange(e)}},_sendMessage:function(t,e,i){chrome.runtime.sendMessage({requestType:"downloads",method:t,params:e},i)},_onCreated:function(t){var e=this;if(t){var i=t.item.id;e._data[i]=t,e._media2id[t.mid]=i}},_onChange:function(t){var e=this,i=e._data[t.id];if(i){var n=i.item;for(var o in t)"id"!==o&&(n[o]=t[o].current);r.Utils.call(e._callbacks,e,i.mid,n,t)}},onChange:function(t,e){this._callbacks.push(e)},download:function(t,e){var i=this,n=e.id;return new Promise(function(t,r){this._sendMessage("download",e,function(e){var o=e.data;e.success?(i._data[o.id]={item:o,mid:n},i._media2id[n]=o.id,t(o)):r(o)})}.bind(this))},item:function(t,e){var i=this,n=i._media2id[e],r=i._data[n];return r&&r.item},pause:function(t){this._sendMessage("pause",t)},resume:function(t){this._sendMessage("resume",t)},cancel:function(t){this._sendMessage("cancel",t)},open:function(t){this._sendMessage("open",t)},show:function(t){this._sendMessage("show",t)}},e.a=new n},function(t,e,i){"use strict";function n(t,e){Array.prototype.push.apply(t,e)}function r(t){return new Promise(function(e){var n=t.map(function(t){return void 0!==t.promise?t.promise:t});Promise.all(n).then(function(){var t=i.i(a.a)(),n=[];o.Utils.flatten(Array.from(arguments)).forEach(function(e){e&&(s.a.isValidData(e)||e.force)&&(/&\w+;/.exec(e.title)&&(e.title=o.Utils.unescapeHTML(e.title)),e.referrer=e.referrer||location.href,!e.title&&t&&t.test(e)&&(e.title=t.title),n.push(e))}),e(n)})})}var o=i(0),a=i(74),s=i(8),l=i(80),c=i(25),u=i(88),d=i(81),h=i(91),f=i(83),p=i(87),_=i(79),m=i(84),y=i(85),v=i(86),g=i(82),w=i(90),E=i(89),S="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(t){return typeof t}:function(t){return t&&"function"==typeof Symbol&&t.constructor===Symbol&&t!==Symbol.prototype?"symbol":typeof t},b=function(){this._providers=[new l.a,new c.a,new u.a,new d.a,new h.a,new f.a,new p.a,new _.a,new m.a,new y.a,new v.a,new g.a,new w.a,new E.a]};b.prototype={constructor:b,processRequest:function(t){for(var e=t.name,i=0;i<this._providers.length;++i){var n=this._providers[i];if(n.name===e&&n.processRequest){n.processRequest(t.result);break}}},getMedia:function(t){var e=t||this._players;if(!e)return new Promise(function(t,e){e([])});var i=[];e.forEach(function(t){n(i,t.getMedia())});var a=this;return new Promise(function(t){r(i).then(function(e){if(o.BrFeatures.SOUND_ONLY&&e.length){var i=a.createMP3Resources(e);e=e.concat(i);var n=o.Utils.splitMediaSourcesByFilename(e),r=[];n.forEach(function(t){r=r.concat(t)}),e=r}t(e)}.bind(this))})},createMP3Resources:function(t){function e(t,e){var i=parseInt(e),n=t.filter(function(){return!0}),r=t.filter(function(t){return"mp4"===t.ext});r.length&&(n=r);var o=n.filter(function(t){return t.quality&&"full hd"===t.quality.toLowerCase()}),a=n.filter(function(t){return t.quality&&"hd"===t.quality.toLowerCase()}),s=n.filter(function(t){return t.quality&&["normal","medium","standard"].includes(t.quality.toLowerCase())});switch(i){case 320:o.length?n=o:a.length?n=a:s.length&&(n=s);break;case 128:default:s.length?n=s:a.length?n=a:o.length&&(n=o)}var l=n.filter(function(t){return"object"===S(t.url)&&t.url.audioUrl});return l.length&&(n=l),n[0]}var i=function(t){return t.filter(function(t){return"video"===t.type&&("object"===S(t.url)&&t.url.audioUrl||"string"==typeof t.url)})}(t),n=["128 kbps","320 kbps"],r=[];return i.length?(o.Utils.splitMediaSourcesByFilename(i).forEach(function(t){var i=n.map(function(i){var n=e(t,i),r=Object.assign({},n);return r.url=r.url.audioUrl||r.url,r.ext="mp3",r.soundOnly=!0,r.quality=i,r});r=r.concat(i)}),r):r},getMediaForPlayer:function(t){return r(t.getMedia())},getMediaPlayers:function(){var t=[];return this._providers.forEach(function(e){n(t,e.getMediaPlayers())}),this._players=t,t}},e.a=new b},function(t,e,i){"use strict";var n=i(0),r=i(14),o=function(t){this._manager=t,this._timeout=null,this._started=!1,this._paused=!1,this._pollCallback=this._poll.bind(this)};o.prototype={RECHECK_PERIOD:3e3,_init:function(){document.addEventListener("webkitvisibilitychange",this._pollCallback,!1)},_getPlayerNodes:function(t){for(var e,i=[],n=t.length;e=t[--n];)e.node&&e.ids.length&&i.push(e.node);return i},_poll:function(){if(clearTimeout(this._timeout),!this._paused&&!document.webkitHidden){var t=this._manager.getMediaPlayers(),e=t.map(function(t){return new Promise(function(e){Promise.all(t.ids).then(function(i){t.ids=[],i&&(t.ids=t.ids.concat(i)),e(t)})})});Promise.all(e).then(function(){var e=n.Utils.toArray(arguments),i=this._getPlayerNodes(t);this.emit("media_update",e,i),this._timeout=setTimeout(this._pollCallback,this.RECHECK_PERIOD)}.bind(this))}},start:function(){this._started?this._paused&&(this._paused=!1,this._poll()):(this._init(),this._poll(),this._started=!0)},pause:function(){clearTimeout(this._timeout),this._paused=!0},destroy:function(){clearTimeout(this._timeout),document.removeEventListener("webkitvisibilitychange",this._pollCallback,!1)}},r(o.prototype),e.a=o},function(t,e,i){"use strict";function n(){this._init()}var r=i(0);n.prototype={STYLE:{background:"#000000",position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px",opacity:.6,zIndex:2147483647},_init:function(){var t=document.createElement("savior:overlay");r.Utils.dom.style(t,this.STYLE),this._overlay=t,this._warp=document.createDocumentFragment(),this._styleElement=document.createElement("style"),this._styleElement.innerHTML="body { -webkit-filter: blur(3px)!important; }",t.addEventListener("mouseup",this.hide.bind(this),!0),t.addEventListener("mousedown",this.hide.bind(this),!0),this._port=null,this._onConnectCallback=this._onConnect.bind(this),this._onDisconnectCallback=this._onDisconnect.bind(this),chrome.runtime.onConnect.addListener(this._onConnectCallback)},_onConnect:function(t){this._port=t,"overlay"===t.name&&(this.show(),t.onDisconnect.addListener(this._onDisconnectCallback))},_onDisconnect:function(){this.hide(),this._port&&this._port.onDisconnect.removeListener(this._onDisconnectCallback),this._port=null},hide:function(t){this._warp&&(t&&t.stopPropagation&&(t.stopPropagation(),t.preventDefault()),this._warp.appendChild(this._overlay),this._warp.appendChild(this._styleElement))},show:function(){document.body.appendChild(this._overlay),document.head.appendChild(this._styleElement)},destroy:function(){this.hide(),this._port&&this._port.onConnect.removeListener(this._onConnectCallback),this._port=null,this._styleElement=null,this._overlay=null,this._warp=null}},e.a=new n},function(t,e){},,,function(t,e,i){"use strict";var n,r=i(44),o=i(51),a=i(47),s=i(54);n=t.exports=function(t,e){var i,n,a,l,c;return arguments.length<2||"string"!=typeof t?(l=e,e=t,t=null):l=arguments[2],null==t?(i=a=!0,n=!1):(i=s.call(t,"c"),n=s.call(t,"e"),a=s.call(t,"w")),c={value:e,configurable:i,enumerable:n,writable:a},l?r(o(l),c):c},n.gs=function(t,e,i){var n,l,c,u;return"string"!=typeof t?(c=i,i=e,e=t,t=null):c=arguments[3],null==e?e=void 0:a(e)?null==i?i=void 0:a(i)||(c=i,i=void 0):(c=e,e=i=void 0),null==t?(n=!0,l=!1):(n=s.call(t,"c"),l=s.call(t,"e")),u={get:e,set:i,configurable:n,enumerable:l},c?r(o(c),u):u}},function(t,e,i){"use strict";t.exports=function(){}},function(t,e,i){"use strict";t.exports=i(45)()?Object.assign:i(46)},function(t,e,i){"use strict";t.exports=function(){var t,e=Object.assign;return"function"==typeof e&&(t={foo:"raz"},e(t,{bar:"dwa"},{trzy:"trzy"}),t.foo+t.bar+t.trzy==="razdwatrzy")}},function(t,e,i){"use strict";var n=i(48),r=i(53),o=Math.max;t.exports=function(t,e){var i,a,s,l=o(arguments.length,2);for(t=Object(r(t)),s=function(n){try{t[n]=e[n]}catch(t){i||(i=t)}},a=1;a<l;++a)e=arguments[a],n(e).forEach(s);if(void 0!==i)throw i;return t}},function(t,e,i){"use strict";t.exports=function(t){return"function"==typeof t}},function(t,e,i){"use strict";t.exports=i(49)()?Object.keys:i(50)},function(t,e,i){"use strict";t.exports=function(){try{return Object.keys("primitive"),!0}catch(t){return!1}}},function(t,e,i){"use strict";var n=i(13),r=Object.keys;t.exports=function(t){return r(n(t)?Object(t):t)}},function(t,e,i){"use strict";var n=i(13),r=Array.prototype.forEach,o=Object.create,a=function(t,e){var i;for(i in t)e[i]=t[i]};t.exports=function(t){var e=o(null);return r.call(arguments,function(t){n(t)&&a(Object(t),e)}),e}},function(t,e,i){"use strict";t.exports=function(t){if("function"!=typeof t)throw new TypeError(t+" is not a function");return t}},function(t,e,i){"use strict";var n=i(13);t.exports=function(t){if(!n(t))throw new TypeError("Cannot use null or undefined");return t}},function(t,e,i){"use strict";t.exports=i(55)()?String.prototype.contains:i(56)},function(t,e,i){"use strict";var n="razdwatrzy";t.exports=function(){return"function"==typeof n.contains&&(!0===n.contains("dwa")&&!1===n.contains("foo"))}},function(t,e,i){"use strict";var n=String.prototype.indexOf;t.exports=function(t){return n.call(this,t,arguments[1])>-1}},,,,,,,,,,,,,,,,,,function(t,e,i){"use strict";function n(t,e,i,n){return{match:function(e){if(t.filename&&t.filename!==e.filename)return!1;var i=e.host;if(!i||e.title)return!1;if(!t.hosts)return!0;for(var n=t.hosts.length-1;n>=0;n--)if(s.Utils.endsWith(i,t.hosts[n]))return!0;return!1},location:Array.isArray(e)?e:[e],selector:i,auxSelector:n}}function r(t,e,i){return n({hosts:[".googlevideo.com","docs.google.com"],filename:"videoplayback"},t,e,i)}function o(t,e){return r(t,"title",e)}function a(){var t=location.href;if(!d.test(t))return null;t=t.replace(d,"");for(var e=void 0,i=void 0,n=0;n<l.length;++n)if(i=l[n],s.Utils.isMatches(t,i.location)){try{var r=s.Utils.queryAll(i.selector);if(r.length?e=r.pop().textContent:(e=s.Utils.query("title").textContent,i.selector="title"),"title"===i.selector&&(e=e.replace(c,"").replace(u,"")),i.auxSelector){var o=s.Utils.query(i.auxSelector).textContent.trim();o&&(e+=" ("+o+")")}e=e.replace(/\s+/g," ").trim()}catch(t){}if(e)return{title:e,test:i.match}}return t.match(/^fptplay\.net/i)?{title:null,test:function(t){var e=t.pathname.split("/"),i=e.length-1,n=e[i];return"chunklist.m3u8"===n&&i>0&&(n=e[i-1]),n&&(this.title=n),!0}}:null}e.a=a;var s=i(0),l=[n({hosts:["ustream.tv"]},/^ustream.tv\/recorded\/([0-9]+)/i,"#ViewerContent h2"),n({hosts:["yan.vn"]},/^yan\.vn/i,'title, [role="complementary"] h3'),n({hosts:["vcdn.vn",".googlevideo.com","docs.google.com"]},/^phim22\.com/i,"title"),n({hosts:["olivia24.com"]},/^olivia24\.com/,"h1.visible-lg.visible-md"),n({},/vipphim\.net/,"title"),n({},/kenh14\.vn/,"h1.title"),n({},/vtv\.vn/,"h1.news-title,h1.video-title"),n({},/dantri\.com\.vn/,"#video-title"),n({hosts:[".memeclip.com"]},/nguoiduatin\.vn/,"title"),r(/^phim3s.net\/phim/i,"h2.title a",".serverlist .server li a.active"),r(/^thegioiphim\.eu\/movie-episode-full\.php/i,".category-main"),r(/^hayghe\.com\/xem-phim/i,"#tit_player"),r(/^phim14\.net\/xem-phim/i,".blocktitle h1 a",".server_item .active a"),r(/^phimnhanh\.net\/movie/i,"h1 > a",".epicurrent"),r(/^xemnghe\.com\/phim/i,"h1"),r(/^phimhd\.vn\/xem-phim/i,"h1.title","a.playing"),o(/^phimmoi\.net\/phim/i,".episode-link.active"),o(/^phimtv\.vn\/xem-phim/i,"a.playing"),n({hosts:["203.162.121.25:88","110.164.180.35","130.211.247.87"]},/^m-viet\.com/i,"h1"),n({hosts:["memeclip.com"]},/^meme\.vn/i,"h1"),n({hosts:["memeclip.com"]},/^doisongphapluat\.com/,"title"),n({},/^keeng\.vn\/video\//,"title"),n({},/^vlxx\.tv\/video/,"title"),o(/phim/i)],c=/^((xem )?phim)|(video:)/i,u=/(-? picasaweb( \d+)?)|(\| server .*)?$/i,d=/^https?:\/\/(www\.)?/i},function(t,e,i){"use strict";var n=i(0),r=i(7),o=function(){this._nodes=new Set([]),r.a.check(window.location.href,"pip")&&(this.checkPage=n.Utils.noop)};o.prototype={_MARK_PIP_NODES_:!1,MIN_PROPORTION:1,MAX_PROPORTION:3,MEDIA_SELECTOR:"embed, object, iframe, video",FULLSCREENABLE_NODES_SELECTOR:'embed[allowfullscreen="true"], iframe[allowfullscreen], video',_getMediaSize:function(t){return t.offsetWidth*t.offsetHeight},_isVideoProportion:function(t,e){return t>=e*this.MIN_PROPORTION&&t<=e*this.MAX_PROPORTION},_isLargeEnough:function(t){return t>240},_isChildOf:function(t,e){for(var i=!1;t&&t.tagName&&"body"!==t.tagName.toLowerCase();){if(e.has(t)){i=!0;break}t=t.parentNode}return i},_isBanned:function(t){var e=!1,i=t.querySelector("embed");return i&&(e=r.a.check(i)),e||r.a.check(t)},_isFullscreenable:function(t){var e=!t.matches(this.MEDIA_SELECTOR)&&n.Utils.queryAll(this.MEDIA_SELECTOR,t);if(e&&e.reduce(function(t,e){return t||this._isFullscreenable(e)}.bind(this),!1))return!0;if(t.matches(this.FULLSCREENABLE_NODES_SELECTOR)||r.a.check(t,"pip-allowfullscreen-false"))return!0;if("OBJECT"===t.tagName){return!!n.Utils.queryAll('param[value="true"]',t).filter(function(t){return t.name&&"allowfullscreen"===t.name.toLowerCase()}).length}return!1},isVideoNode:function(t){var e=n.Utils.dom.getEmbedSize(t),i=e.width,r=e.height;return this._isLargeEnough(i,r)&&this._isVideoProportion(i,r)&&this._isFullscreenable(t)&&this._isVideoNodeContainsSource(t)&&!this._isBanned(t)},_isVideoNodeContainsSource:function(t){return"video"!==t.tagName.toLowerCase()||!(!t.attributes.src&&!t.querySelector("source"))},_findVideos:function(){if(!r.a.check(location.href,"pip"))for(var t,e=n.Utils.queryAll(this.MEDIA_SELECTOR),i=0,o=e.length;i<o;i++){t=e[i];var a=t.querySelector("embed");this._isChildOf(t,this._nodes)||a&&this._isChildOf(a,this._nodes)||!this.isVideoNode(t)||t.dataset.linkSaviorIgnore||this._nodes.add(t)}},markCandidate:function(t){if(this._MARK_PIP_NODES_&&!t.__hasOverlay){var e=n.Utils.dom.getOffset(t),i={position:"absolute",background:"linear-gradient(135deg, #000 25%, transparent 25%) -50px 0,linear-gradient(225deg, #000 25%, transparent 25%) -50px 0,linear-gradient(315deg, #000 25%, transparent 25%),linear-gradient(45deg, #000 25%, transparent 25%)","background-size":"20px 20px","background-color":"#EC173A",opacity:"0.5","pointer-events":"none","z-index":Number.MAX_SAFE_INTEGER-1,top:e.top+"px",left:e.left+"px",width:t.offsetWidth+"px",height:t.offsetHeight+"px"},r=document.createElement("div");n.Utils.dom.setStyleAttr(r,i),document.body.appendChild(r),t.__hasOverlay=!0}},checkPage:function(t){return this._nodes.clear(),this._nodes=new Set(t),this._findVideos(),Array.from(this._nodes)}},e.a=o},function(t,e,i){"use strict";var n=i(0);!function(){var t={width:640,height:480};location.host.match(/^(?:[\w\d_-]+\.)*coccoc.com$/)&&document.addEventListener("click",function(e){if(e.target&&e.target.matches("a[x-coccoc-pip-url]")){var i=e.target,r=i.getAttribute("x-coccoc-pip-url"),o=i.getAttribute("x-coccoc-pip-size"),a=o&&/^(\d+)x(\d+)/.exec(o);o=a?{width:+a[1],height:+a[2]}:t,n.BGUtils.sendMessage({requestType:"pip",method:"pipUrl",params:{url:r,width:o.width,height:o.height}}),e.preventDefault(),e.stopPropagation()}})}()},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),o=function(){function t(){n(this,t),this.hostMapping={"24h.com.vn":".media-player","phimmoi.net":".media-player"}}return r(t,[{key:"hasSpecialSupport",value:function(){return Object.keys(this.hostMapping).some(function(t){return window.location.host.includes(t)})}},{key:"getNode",value:function(t){t=t||window.location.host;var e=t.replace("www.",""),i=this.hostMapping[e];return i?document.querySelector(i):null}}]),t}();e.a=new o},function(t,e,i){"use strict";function n(){this.node=null,this.isShown=!1,this.playCallback=null}var r=i(2),o=i(0),a=i(3),s=i(6),l=i.n(s);n.prototype={constructor:n,init:function(){if(!this.node){var t=document.createElement("div");t.innerHTML=l.a.render(a.a.get("template-tooltip-play-now-bottom"),{i18n_play_now:i.i(o.i18n)("play_now_play_now"),i18n_play_text:i.i(o.i18n)("play_now_click_to_play"),i18n_play_not_show:i.i(o.i18n)("play_now_do_not_show")}),this.node=t.firstElementChild,this._addListeners(),chrome.runtime.onMessage.addListener(function(t){"widget"===t.requestType&&"new_download"===t.method&&this._processNewDownload()}.bind(this))}},_addListeners:function(){this.node.addEventListener("click",function(t){switch(t.target.id){case"close-play-now-tooltip-bottom":this.hide();break;case"play-now-not-show-check-bottom":var e=t.target.checked;a.a.set("hide_play_now_tooltip_bottom",e),e&&r.a.log("PlayNow",r.a.PLAY_NOW_TOOLTIP_BOTTOM_NOT_SHOW_AGAIN);break;default:t.target.matches('label[for="play-now-not-show-check-bottom"]')||(this._playVideo(),this.hide())}}.bind(this))},_processNewDownload:function(){this.isShown&&this.hide()},attach:function(t){t.appendChild(this.node),setTimeout(function(){this.node.removeAttribute("hidden")}.bind(this),0)},show:function(t){a.a.get("hide_play_now_tooltip_bottom")||(this.node.classList.add("tooltip-shown"),this.isShown=!0,this._notifyBgScript(),"function"==typeof t&&(this.playCallback=t),r.a.log("PlayNow",r.a.PLAY_NOW_TOOLTIP_BOTTOM_SHOWN))},_playVideo:function(){"function"==typeof this.playCallback&&this.playCallback()},_notifyBgScript:function(){chrome.runtime.sendMessage({requestType:"downloads",method:"bottom_tooltip_shown"})},hide:function(){this.isShown&&(this.node.classList.remove("tooltip-shown"),this.isShown=!1,r.a.log("PlayNow",r.a.PLAY_NOW_TOOLTIP_BOTTOM_CLOSED))}},e.a=n},function(t,e,i){"use strict";var n=i(4),r=i(1),o=i(0),a=void 0;!function(){function t(t){t=t||{};try{var i=void 0;switch(t.tagName){case"IFRAME":i=t.src.match(e);break;case"PARAM":i=t.getAttribute("value").match(l);break;default:i=location.pathname.match(s)}return(i||[])[1]}catch(t){return}}var e=/https?:\/\/clip\.vn\/embed\/([0-9a-z_-]+)/i,s=/\/watch\/[^,]+,([0-9a-z_-]+)\/?$/i,l=/(?:^|&)id=([0-9a-z_-]+)/i,c=i.i(n.a)({request:{method:"POST",url:function(t){return"http://clip.vn/movies/nfo/"+t},params:function(){return{referrer:encodeURIComponent(btoa(location.href)),onsite:"clip"}},headers:function(){return{"X-REFERRER":location.href,"Content-type":"application/x-www-form-urlencoded"}}},parse:function(t,e){var i=o.Utils.xmlParser.parseFromString(e,"text/xml"),n=i.querySelector("ClipInfo title");return o.Utils.queryAll("ClipInfo enclosure",i).map(function(t){var e=t.getAttribute("url"),i=o.UrlUtils.parse(e),a=t.getAttribute("quality");return i.type="video",n&&(i.title=n.textContent),i.quality=r.a.getClipvnQuality(a),i})}});a=i.i(n.b)("clipvn",function(){function e(t,e){t&&-1===r.indexOf(t)&&(r.push(t),n.push(i.makePlayer(e,[t],c)))}var i=this,n=[],r=[];return location.hostname.match(/([^.]+\.)*clip\.vn/i)&&e(t(),o.Utils.query("#player_wrapper object")),o.Utils.queryAll('param[name="flashvars"][value*="clip.vn"], iframe[src*="clip.vn"]').forEach(function(i){e(t(i),i)}),n})}(),e.a=a},function(t,e,i){"use strict";function n(t){return!!t&&o.Utils.endsWith(t,"adnetwork.vn")}var r=i(4),o=i(0),a=i(5),s=i(7),l=i(8),c=void 0;!function(){function t(t){return o.Utils.isMatches(t,a.d)}var e=i.i(r.a)({request:{method:"GET",url:function(t){return i.i(a.c)(t.ext)?t.url:null}},parse:function(t,e){return e?r.e.parsePlaylist(t,e):[t]}});c=i.i(r.b)("default",function(){var a=location.host,s=[];if(t(a))return s;var c=o.Utils.queryAll("[src]");c=c.filter(function(t){return t.tagName&&!["script","img"].includes(t.tagName.toLocaleLowerCase())});for(var u=[],d=0,h=c.length;d<h;++d){var f=c[d],p=f.src,_=o.UrlUtils.getMediaType(p);if(_&&f.getAttribute("src")){var m=o.UrlUtils.parse(p);n(m.host)||(p.includes("videoplayback")&&p.includes("mp4")&&(m.ext="mp4"),m.type=_,l.a.isValidData(m)&&(f=i.i(r.d)(f),m.quality="Normal",f?s.push(this.makePlayer0(f,[m],e)):u.push(m)))}}return u.length&&s.push(this.makePlayer(null,u,e)),this._ids.length&&s.push(this.makePlayer0(null,this._ids,e)),s},{dynamic:!0}),s.a.check(location.href,"download")&&(c.prototype.processRequest=o.Utils.noop)}(),e.a=c},function(t,e,i){"use strict";var n=i(0),r=i(1),o=i(4),a=void 0;!function(){function t(t,e,i){var o=n.UrlUtils.parse(t);return o.type="video",o.title=e||o.title,o.quality=r.a.getFacebookQuality(i),o}function e(t){var e=d.exec(t);return e=e&&e.length?e[0].replace(d,"$1"):null}function s(t){var e=t.parentNode.querySelectorAll('a[href^="/"]');if(e&&/\/videos\/\d+\/?$/.test(e.href))return e;var i=n.Utils.nearestParent(t,'[role="article"]');if(i){var r=i.querySelector("a[data-video-id]");if(r)return r.href;var o=i.querySelector('a[target][rel="theater"]');if(o)return o.href}return location.href.match(/permalink\/[0-9]+/)?location.href:null}var l=/^blob:https?:\/\/(www)?\.?facebook\.com\/[A-z0-9-]+$/,c=["sd_src","hd_src","sd_src_no_ratelimit","hd_src_no_ratelimit"],u='"?video_id"?:\\s?"{{{ID}}}"',d=/<title.*>([\s\S]*)<\/title>/gim,h=new Set,f=i.i(o.a)({request:{method:"GET",url:function(t){return t}},parse:function(i,n){h.add(i);var r=i.split("/").filter(function(t){return!!t}),o=r[r.length-1],a=e(n),s=n.match(/"?videoData"?:\s?\[[\s\S]*?\}\]/g);if(s){var l=new RegExp(u.replace("{{{ID}}}",o),"g"),d=Array.from(s).filter(function(t){return l.test(t)});if(!d.length){if(!location.href.includes("permalink"))return;d=s}var f=void 0,p=void 0,_=void 0,m=d[0].replace(/"?videoData"?:/,"");try{f=JSON.parse(m)[0]}catch(t){if(_=m.match(/(?:h|s)d_src(?:_no_ratelimit)?:"([^"]+)"+?/g),!_.length)return null;p=_.map(function(t){return t.replace(/(?:h|s)d_src(?:_no_ratelimit)?:"([^"]+)"+?/g,"$1")})}var y=[];return f&&c.forEach(function(e){f[e]&&y.push(t(f[e],a,e))}),p&&p.length&&p.forEach(function(e){var i="sd_src";_.forEach(function(t){t.includes(e)&&(i=t.includes("hd_")?"hd_src":"sd_src")}),y.push(t(e,a,i))}),y}}});a=i.i(o.b)("facebook",function(){var t=this,e=[];if(location.host.match(/(\.|^)(facebook|fb).com$/i)){n.Utils.queryAll("video").forEach(function(i){var n=i.src;if(n&&l.test(n)){var r=s(i);r&&e.push(t.makePlayer(i,[r],f))}})}return e})}(),e.a=a},function(t,e,i){"use strict";var n=i(4),r=i(0),o=i(1),a=void 0;!function(){function t(t){var e=t.match(s);return e&&e.length?parseInt(e[1]):null}function e(t){return t.replace(s,"")}var s=/_([0-9]{3,4})p/,l=i.i(n.a)({request:{method:"GET"},parse:function(i,n){var a=[],s=void 0;try{s=JSON.parse(n)}catch(t){return a}return(s.html5||s.mp4||[]).forEach(function(i){var n=r.UrlUtils.parse(i),s=t(i);n.quality=s?o.a.getQualityBySize(s):"normal",n.title=document.title,n.filename=e(n.filename),n.type="video",a.push(n)}),a}});a=i.i(n.b)("kenh14",function(){var t=this,e=[];return e.push(t.makePlayer(null,[this._ids],l)),e},{dynamic:!0})}(),e.a=a},function(t,e,i){"use strict";var n=i(4),r=i(0),o=void 0;!function(){function t(){if("www.nhaccuatui.com"!==location.hostname)return null;var t=r.Utils.query("video#videonctPlayer");if(t)return e(t)?null:t;var o=r.Utils.queryAll('object[type="application/x-shockwave-flash"]');if(1!==o.length)return null;var a=o[0],s=a.getAttribute("data");return s&&s.match(/flash\/player\.nct/)?a:i.i(n.d)(a)}function e(t){var e=t.parentNode;return!!e&&!!e.querySelector(".prerollAdv")}var a=i.i(n.a)({request:{method:"GET",headers:function(){return{"X-Savior-Replace-Cookie":document.cookie+"; touchEnable=true;"}}},parse:n.c.parsePlaylist}),s=function(t){var e=t.location.replace(/^[\n\s]*|[\n\s]*$/gm,"");if(!e)return null;var i=r.UrlUtils.parse(e);return i.type="audio",i.title=t.title.replace(/^[\n\s]*|[\n\s]*$/gm,""),i.force=!0,i.ext="mp3",i};o=i.i(n.b)("nhaccuatui",function(){function e(t,e){var i=l.indexOf(t);-1!==i?c[i]||(c[i]=e):(l.push(t),c.push(e))}function i(t,e){o.push(n.makePlayer(c[e],[t],a))}var n=this,o=[],l=[],c=[];if(r.Utils.queryAll('meta[content*="flash/xml?key"], param[value*="flash/xml?key"], embed[flashvars*="flash/xml?key"]').forEach(function(t){var i=t.getAttribute("content")||t.getAttribute("value")||t.getAttribute("flashvars")||"",n=i.match(/https?:\/\/[^?]+xml\?key.*/),r=n&&n[0];r&&t&&"meta"!==t.tagName.toLowerCase()&&e(r,t)}),l.length&&l.forEach(i),window.pageComm&&location.host.match(/^([\w\d_-]+\.)*nhaccuatui.com$/)){var u=new Promise(function(t){window.pageComm.send({method:"report",args:[["__data","flashPlayer","mp3"]]}).then(function(e){if(!Array.isArray(e))return void t([]);e=e.map(s).filter(function(t){return t}),t(e)})});o.push(n.makePlayer0(null,[u]))}return o.push(this.makePlayer0(t(),this._ids,a)),o},{dynamic:!0})}(),e.a=o},function(t,e,i){"use strict";var n=i(4),r=i(0),o=void 0;!function(){function t(t){var e=void 0,i=void 0;if(t.src){if(i=t.src.match(/^https?:\/\/nhacso.net\/embed\/([^\/]+)\/(.+)/i),3!==i.length)return null;switch(i[1]){case"album":e=u+i[2];break;case"video":e=c+i[2];break;default:return null}}else e=t.value.replace(/^.*xmlPath=([^&]+).*$/i,"$1");return e}function e(t,e){var i=p[e];if(i&&t)return location.origin+i+encodeURIComponent(t)}function a(t){var i=t.getAttribute("object-id"),n=t.getAttribute("object-type");return i?e(i,n):null}function s(){if(!location.host.match(d))return!1;var t=location.pathname;return 0===t.indexOf("/xem-video/")||0===t.indexOf("/nghe-playlist/")||0===t.indexOf("/nghe-album/")||0===t.indexOf("/nghe-nhac/")}var l=['param[name="flashvars"][value*="xmlPath=http://nhacso.net"]','iframe[src*="http://nhacso.net/embed"]','param[name="movie"][value*="xmlPath=http://nhacso.net"]'].join(","),c="http://nhacso.net/flash/video2/xnl/1/id/",u="http://nhacso.net/flash/album/xnl/1/uid/X1xQVUNcZgQEBQ==,",d=/(\w+\.)?nhacso\.net$/,h=i.i(n.a)({request:{method:"GET"},parse:function(t,e){var i=r.Utils.xmlParser.parseFromString(e,"text/xml"),n=[];return r.Utils.queryAll("track, song",i).forEach(function(t){try{var e=[t.querySelector("name, title").textContent],i=t.querySelector("artist");i&&""!==i.textContent.trim()&&e.unshift(i.textContent.trim());var o=t.querySelector("sourceUrl, url, mp3link").textContent,a=r.UrlUtils.parse(o);a.type="mp3"===a.ext?"audio":"video",a.title=e.join(" â€“ "),n.push(a)}catch(t){}}),n}}),f=i.i(n.a)({nocache:!0,request:{method:"GET"},parse:function(t,e){var i=JSON.parse(e),n=(i.object_name||"").trim();n&&(n+=" - ");for(var o=i.songs||[],a=o.filter(function(t){return t.link_mp3}),s=0;s<o.length;s++){var l=o[s],c=l.link_mp3;if(c){var u=r.UrlUtils.parse(c);u.type="audio",u.title=n+(l.name||"").trim(),a.push(u)}}return a}}),p={album:"/albums/ajax-get-detail-album?dataId=",playlist:"/playlists/ajax-get-detail-playlist?dataId=",song:"/songs/ajax-get-detail-song?dataId="},_=function(t){var e=t.url;if(!e)return null;var i=r.UrlUtils.parse(e);i.type="audio";var n=t.singer[0]?t.singer[0].alias+" - ":"";return i.title=n+(t.name||"").trim(),i};o=i.i(n.b)("nhacso",function(){var e=this,i=[],n=[];if(r.Utils.queryAll(l).forEach(function(r){var o=t(r);o&&-1===n.indexOf(o)&&(n.push(o),i.push(e.makePlayer(r,[o],h)))}),window.pageComm&&location.host.match(d)){var o=new Promise;window.pageComm.send({method:"report",args:[["myPeakPlayer","songs"]]}).then(function(t){if(!Array.isArray(t))return void o.resolve([]);t=t.map(_).filter(function(t){return t}),o.resolve(t)}),i.push(e.makePlayer0(null,[o]))}if(!s())return i;var c=[];return r.Utils.queryAll("a.play[object-type]").forEach(function(t){var e=a(t);e&&-1===c.indexOf(e)&&c.push(e)}),c.length>0&&i.push(e.makePlayer(null,c,f)),r.Utils.queryAll(".video-details").forEach(function(t){var n=r.Utils.query("video",t),o=n&&n.src;if(o){var a=r.UrlUtils.parse(o);a.type="video";var s=r.Utils.query(".singer-link",t);s=s&&s.textContent.trim()||"";var l=r.Utils.query("h3.name");l=l&&l.textContent.trim()||"",s&&l&&(l=s+" - "+l),l&&(a.title=l),i.push(e.makePlayer(n,[a]))}}),i})}(),e.a=o},function(t,e,i){"use strict";var n=i(4),r=i(9),o=void 0;!function(){o=i.i(n.b)("pip",function(){var t=[];return r.a.detector.checkPage().forEach(function(e){t.push(this.makePlayer0(e,[],null))}.bind(this)),t},{dynamic:!0})}(),e.a=o},function(t,e,i){"use strict";var n=i(4),r=i(0),o=void 0;!function(){var t="https://api-v2.soundcloud.com/tracks?ids={{track_id}}&client_id={{client_id}}",e=function(t,e){e||(e=window.location.href),t=t.replace(/[[\]]/g,"\\$&");var i=new RegExp("[?&]"+t+"(=([^&#]*)|&|#|$)"),n=i.exec(e);return n?n[2]?decodeURIComponent(n[2].replace(/\+/g," ")):"":null},a=i.i(n.a)({request:{method:"GET"},parse:function(i,n){return new Promise(function(o,a){var s=[],l=void 0;try{l=JSON.parse(n)}catch(t){return a([])}if(l.http_mp3_128_url){var c=r.UrlUtils.parse(l.http_mp3_128_url),u=i.match(/soundcloud\.com\/i1\/tracks\/(\d+)\//);if(!u||!u.length)return a([]);var d=u[1],h=e("client_id",i);window.fetch(t.replace("{{track_id}}",d).replace("{{client_id}}",h)).then(function(t){return t.json()}).then(function(t){if(!t.length)return a([]);var e=t[0];c.title=e.title,c.quality="Normal",c.type="audio",s.push(c),o(s)}).catch(function(){a([])})}}.bind(this))}});o=i.i(n.b)("soundcloud",function(){var t=this,e=[];return window.location.pathname.replace("/","")&&e.push(t.makePlayer(null,[this._ids],a)),e},{dynamic:!0})}(),e.a=o},function(t,e,i){"use strict";var n=i(4),r=i(25),o=i(0),a=void 0;!function(){var t=i.i(n.a)({nocache:!0,parse:function(t){return r.a.getMoviesById(t)}}),e=i.i(n.a)({request:{method:"GET"},parse:n.c.parsePlaylist});a=i.i(n.b)("vietgiaitri",function(){var i=this,r=[],a=location.href.match(/vietgiaitri\.com\/.*id\.([^.]+)\.vgt/i),s=(a||[])[1];if(s){var l=o.Utils.query("object#youtube");r.push(this.makePlayer(l,[s],t))}return location.host.match(/vietgiaitri\.com/i)&&o.Utils.queryAll('embed[src*="vietgiaitri.com"]').forEach(function(t){var o=n.c.extract(t);o&&r.push(i.makePlayer(t,[o],e))}),r})}(),e.a=a},function(t,e,i){"use strict";var n=i(4),r=i(0),o=i(1),a=void 0;!function(){function t(t){for(var e,i=0;i<u.length;++i)if((e=t.match(u[i]))&&e[1])return e[1];return null}function e(t){return(t.match(d)||[])[1]}function s(t){var e=[],i=[];try{i=r.Utils.getProp(t,"request.files.progressive")||[]}catch(t){return e}return i.forEach(function(i){e.push({type:"video",title:t.video.title,filename:t.video.title,ext:"mp4",url:i.url,quality:o.a.getVimeoQuality(i.quality)})}),e}function l(i){switch(i.tagName){case"IFRAME":return t(i.src);case"PARAM":return e(i.value);case"VIDEO":return e(i.src);default:return t(i.getAttribute("data-fallback-url")||"")}}var c="https:"===location.protocol.toLowerCase()?"https:":"http:",u=[/\/\/(?:player\.)?vimeo\.com(?:\/video)?\/([0-9]+)/i,/\/\/vimeo.com\/couchmode\/.*\/([0-9]+)/i,/\/\/player.vimeo.com\/v[0-9]\/video\/([0-9]+)/i,/\/\/player.vimeo.com\/moog\/([0-9]+)/i],d=/(?:&|\?)clip_id=([0-9]+)(?:&|$)/i,h=c+"//player.vimeo.com/video/{{id}}/config",f=i.i(n.a)({request:{method:"GET",url:function(t){return t.match(/\/video\/(\d+)\/config(\?|$)/i)?t:h.replace("{{id}}",t).replace("{{location}}",location.href)},headers:function(){return{"X-Savior-Replace-Referer":document.location.href}}},parse:function(t,e){return s(JSON.parse(e))}});a=i.i(n.b)("vimeo",function(){var e=this,i=[],n=[];if(r.Utils.queryAll('iframe[src*="vimeo.com"], param[value*="vimeo.com"], video[src*="vimeo.com"], .player[data-fallback-url]').forEach(function(t){var r=l(t);r&&-1===n.indexOf(r)&&(n.push(r),i.push(e.makePlayer(t,[r],f)))}),"vimeo.com"===location.host||"player.vimeo.com"===location.host){var o=r.Utils.query("#videos_gallery li.selected a"),a=o&&o.href||location.href,s=t(a);s&&-1===n.indexOf(s)&&(n.push(s),i.push(e.makePlayer(o,[s],f)))}return i.push(e.makePlayer(null,e._ids,f)),i},{dynamic:!0})}(),e.a=a},function(t,e,i){"use strict";var n=i(4),r=i(0),o=i(1),a=void 0;!function(){function t(){for(var t=document.querySelector(".infobar > strong"),e=t.firstChild,i=[];e;)3===e.nodeType&&i.push(e.data),e=e.nextSibling;return i.join("").trim()}var e=i.i(n.a)({request:{method:"GET"},parse:function(){return new Promise(function(e){window.pageComm.send({method:"eval",args:["return [html5player.url_high, html5player.url_low]"]}).then(function(i){if(i&&i.length){var n=i.map(function(e){var i=r.UrlUtils.parse(e);return i.type="video",i.title=t()||document.title,i.quality=o.a.getQualityBySize(e.includes("3gp")?240:480),i});e(n)}}).catch(function(t){})})}});a=i.i(n.b)("xnxx",function(){var t=[],i=this;if(location.href.match(/xnxx\.com\/video-/)&&window.pageComm){var n=r.Utils.query("#html5video");t.push(i.makePlayer(n,[window.location.href],e))}return t},{dynamic:!0})}(),e.a=a},function(t,e,i){"use strict";var n=i(4),r=i(0),o=i(1),a=void 0;!function(){function t(){for(var t=document.querySelector("#main h2"),e=t.firstChild,i=[];e;)3===e.nodeType&&i.push(e.data),e=e.nextSibling;return i.join("").trim()}var e=i.i(n.a)({request:{method:"GET"},parse:function(){return new Promise(function(e){window.pageComm.send({method:"eval",args:["return [html5player.url_high, html5player.url_low]"]}).then(function(i){if(i&&i.length){var n=i.map(function(e){var i=r.UrlUtils.parse(e);return i.type="video",i.title=t()||document.title,i.quality=o.a.getQualityBySize(e.includes("3gp")?240:480),i});e(n)}}).catch(function(t){})})}});a=i.i(n.b)("xvideos",function(){var t=[],i=this;if(location.href.match(/w?\.xvideos\.com\/video[0-9]+\//)&&window.pageComm){var n=r.Utils.query("#html5video");t.push(i.makePlayer(n,[window.location.href],e))}return t},{dynamic:!0})}(),e.a=a},function(t,e,i){"use strict";var n=i(4),r=i(0),o=i(94),a=i(5),s=i(1),l=void 0;!function(){function t(t){try{return o.a.AES.decrypt({ciphertext:o.a.enc.Hex.parse(t),salt:""},o.a.enc.Utf8.parse(d),{iv:o.a.enc.Utf8.parse(h),mode:o.a.mode.CBC,padding:o.a.pad.NoPadding}).toString(o.a.enc.Utf8)}catch(t){return""}}function e(t){return o.a.AES.encrypt(o.a.enc.Utf8.parse(t),o.a.enc.Utf8.parse(d),{iv:o.a.enc.Utf8.parse(h),mode:o.a.mode.CBC,padding:o.a.pad.NoPadding}).ciphertext.toString(o.a.enc.Hex)}function c(t){return new Promise(function(e){r.Utils.get(location.href,{"X-Savior-Replace-User-Agent":"Mozilla/5.0 (iPhone; CPU iPhone OS 8_0 like Mac OS X) AppleWebKit/600.1.3 (KHTML, like Gecko) Version/8.0 Mobile/12A4345d Safari/600.1.4"}).then(function(i){for(var n=/<source\s+src="([^"]+)"([^>]+type="([^"]+)")?([^>]+data-res="([^"]+))?"/gi,o=[],a=void 0;a=n.exec(i);){var l=r.UrlUtils.parse(a[1]);l=r.Utils.detectMediaTypeAndExt(l,a[3]),l.quality=s.a.getQualityBySize(+a[5]),l.title=t,l.size=null,o.push(l)}e(o)})})}function u(t){var e=[];return t&&t.data&&t.data?((void 0!==t.data.item?t.data.item:t.data).forEach(function(t){var i=t.source_list.filter(function(t){return!!t}),n=void 0!==t.thumbnail?"video":"audio";i.forEach(function(i){var o=r.UrlUtils.parse(i);o.type=n,o.title=t.title||t.artist+" - "+t.name,o.ext="audio"===n?"mp3":"mp4";var a=t.source_list.indexOf(i);o.quality=s.a.getZingAudioQuality(t.qualities[a]),e.push(o)})}),e):e}var d="f_pk_ZingTV_1_@z",h="f_iv_ZingTV_1_@z",f=["f1080","f720","hq","f480","f360","source","f240","f"],p={f360:/source:\s"(https?:\/\/\S+)",\n?\s+label:\s?'360p'/,f480:/source:\s"(https?:\/\/\S+)",\n?\s+label:\s?'480p'/,f720:/video720\s=\s"(https?:\/\/\S+)";/},_=i.i(n.a)({request:{method:"GET"},parse:function(n,o){var l=r.Utils.xmlParser.parseFromString(o,"text/xml"),d=[];if(r.Utils.queryAll("data > item",l).forEach(function(n){var o=n.getAttribute("type"),l=[n.querySelector("title").textContent],u=n.querySelector("performer");u&&""!==u.textContent.trim()&&l.unshift(u.textContent.trim()),l=l.join(" â€“ "),r.Utils.toArray(n.childNodes).forEach(function(n){if(n.nodeType===Node.ELEMENT_NODE&&-1!==f.indexOf(n.tagName)){var c=n.getAttribute("type")||o,u=n.textContent;if(r.Utils.isMatches(u,/^https?:\/\//i)||(u=t(u)),"require vip"!==u&&""!==u&&-1===u.indexOf("/rplaylist")&&r.Utils.isMatches(u,/^https?:\/\//i)){var h=r.UrlUtils.parse(u);if("php"===h.ext){var p=Date.now()+"|0\0";h=r.UrlUtils.parse(u+"&start=0&token="+e(p)),h.size=null}!r.BrFeatures.M3U8&&i.i(a.c)(h.ext)||("mp3"===c?(h.type="audio",h.quality=s.a.getZingAudioQuality(n.tagName)):(h.type="video",h.quality=s.a.getZingVideoQuality(n.tagName)),h.ext=r.UrlUtils.getMediaType(u)?h.ext:c,h.title=l,d.push(h))}}}),"tv.zing.vn"===location.host&&(d=c(l))}),0===d.length){var h=void 0;try{if(h=JSON.parse(o)){var _=u(h);_.length&&(d=d.concat(_))}}catch(t){}}if(window.location.host.match(/tv\.zing\.vn/)){Object.keys(p).map(function(t){return{quality:t,match:o.match(p[t])}}).forEach(function(t){if(t.match&&t.match.length>1){var e=r.UrlUtils.parse(t.match[1]);e.type="video",e.title=document.title,e.quality=s.a.getZingVideoQuality(t.quality),d.push(e)}})}return d}}),m=function(t){var e=t.mp3;if(!e)return null;var i=r.UrlUtils.parse(e);i.type="audio";var n=t.artist?t.artist+" - ":"";return i.title=n+(t.title||"").trim(),i.force=!0,i.ext="mp3",i},y=function(t){var e=t.source[0];if(!e)return null;var i=r.UrlUtils.parse(e);i.type="audio";var n=t.artist?t.artist+" - ":"";return i.title=n+(t.title||"").trim(),i.force=!0,i.ext="mp3",i};l=i.i(n.b)("zingvn",function(){var t=this,e=[];if(e.push(t.makePlayer(null,[this._ids]||[],_)),window.pageComm&&location.host.match(/^([\d\w_-]+\.)*zing\.vn$/)){var i=new Promise(function(t){window.pageComm.send({method:"report",args:[["zmp3HTML5","playlist"]]}).then(function(e){if(!Array.isArray(e))return void t([]);e=e.map(m).filter(function(t){return t}),t(e)})});e.push(t.makePlayer0(null,[i]));var n=new Promise(function(t){window.pageComm.send({method:"eval",args:['return [].map.call(zmCore("li[id^=\'fnPlayerItem\']"),function(el){return zmCore.data(el,"item")})']}).then(function(e){if(!Array.isArray(e))return void t([]);e=e.map(y).filter(function(t){return t}),t(e)})});e.push(t.makePlayer0(null,[n]))}return window.location.host.match(/tv\.zing\.vn/)&&e.push(t.makePlayer(null,[window.location.href]||[],_)),e},{dynamic:!0})}(),e.a=l},function(t,e,i){"use strict";function n(t,e){if(!(t instanceof e))throw new TypeError("Cannot call a class as a function")}var r=i(3),o=i(0),a=i(9),s=i(6),l=i.n(s),c=function(){function t(t,e){for(var i=0;i<e.length;i++){var n=e[i];n.enumerable=n.enumerable||!1,n.configurable=!0,"value"in n&&(n.writable=!0),Object.defineProperty(t,n.key,n)}}return function(e,i,n){return i&&t(e.prototype,i),n&&t(e,n),e}}(),u=function(){function t(){n(this,t),this.STATE={SHOWN:0,HIDDEN:1,DELAYED:2,DONE:3},this.DELAYS={DELAY24H:864e5,DELAY10D:864e6,DELAY30D:2592e6},this.BLOCK_POSITION={CORRECTION_LEFT:28,CORRECTION_TOP:43,MIN_FROM_TOP:10},this.overlayCtl=null,this.currentPlayer=null,this.tourState=r.a.get("pip_tour_state")||this.STATE.SHOWN,this.lastDelay=r.a.get("pip_tour_last_delay")||null,this.nextShow=r.a.get("pip_tour_next_show")||null,this.widgetListenersSet=!1,this.nextShow&&this.tourState!==this.STATE.DONE&&Date.now()>=this.nextShow&&(this.tourState=this.STATE.SHOWN)}return c(t,[{key:"_initDom",value:function(){if(!this.node){var t=document.createElement("div");t.innerHTML=l.a.render(r.a.get("template-sound-only-tour"),{i18n_title:i.i(o.i18n)("pip_tour_title"),i18n_description:i.i(o.i18n)("pip_tour_content"),i18n_lets_try_btn:i.i(o.i18n)("pip_tour_try_btn")}),this.node=t.firstElementChild,this.adjustPosition=this._adjustPosition.bind(this),this.tryClicked=this._tryClicked.bind(this),this.tabDetached=this._tabDetached.bind(this),this.tabRestored=this._tabRestored.bind(this),this._addListeners(),this.tourState>this.STATE.SHOWN&&(this.processPlayers=o.Utils.noop)}}},{key:"_addListeners",value:function(){var t=this;if(this.tourState===this.STATE.SHOWN){this.node.querySelector(".try-now").addEventListener("click",this.tryClicked),a.a.on("tab_detached",this.tabDetached),a.a.on("tab_restored",this.tabRestored),window.addEventListener("resize",this.adjustPosition),document.body.addEventListener("click",function(){t._handleDismiss()})}}},{key:"_setWidgetListeners",value:function(){this.widgetListenersSet||(this.widget.on("playnow_shown",this._handleDismiss.bind(this)),this.widget.on("widget_click",this._handleDismiss.bind(this)),this.widget.on("download",this._handleDownload.bind(this)),this.widgetListenersSet=!0)}},{key:"_adjustPosition",value:function(){if(this.currentPlayer){var t=this.widget.getWidgetRect();if(t){this.node.style.left=Math.floor(t.left+this.BLOCK_POSITION.CORRECTION_LEFT)+"px";var e=Math.floor(t.top+this.BLOCK_POSITION.CORRECTION_TOP);this.node.style.top=Math.floor(e)+"px"}}}},{key:"_tabDetached",value:function(){this._hide(),this.setTourState(this.STATE.HIDDEN)}},{key:"_tabRestored",value:function(){this._hide(),this.setTourState(this.STATE.SHOWN)}},{key:"_tryClicked",value:function(){this._handleDismiss()}},{key:"_handleDownload",value:function(t){t&&this._disable()}},{key:"_handleDismiss",value:function(){if(this.tourState===this.STATE.SHOWN){if(this.lastDelay)switch(this.lastDelay){case this.DELAYS.DELAY24H:this.lastDelay=this.DELAYS.DELAY10D,this.nextShow=Date.now()+this.DELAYS.DELAY10D,r.a.set("pip_tour_next_show",this.nextShow),r.a.set("pip_tour_last_delay",this.lastDelay);break;case this.DELAYS.DELAY10D:this.lastDelay=this.DELAYS.DELAY30D,this.nextShow=Date.now()+this.DELAYS.DELAY30D,r.a.set("pip_tour_next_show",this.nextShow),r.a.set("pip_tour_last_delay",this.lastDelay)}else this.lastDelay=this.DELAYS.DELAY24H,this.nextShow=Date.now()+this.DELAYS.DELAY24H,r.a.set("pip_tour_next_show",this.nextShow),r.a.set("pip_tour_last_delay",this.lastDelay);this._delay()}}},{key:"setTourState",value:function(t){this.tourState=t}},{key:"_hide",value:function(){this.node&&(this.overlayCtl.cancelForced(),this.node.style.display="none",this.currentPlayer=null,this.setTourState(this.STATE.HIDDEN))}},{key:"_delay",value:function(){this._hide(),r.a.set("pip_tour_state",this.STATE.DELAYED)}},{key:"_disable",value:function(){this._hide(),r.a.set("pip_tour_state",this.STATE.DONE)}},{key:"show",value:function(t){this.node&&r.a.get("on_page_buttons")&&this.tourState===this.STATE.SHOWN&&(this.currentPlayer=t,this.widget=this.overlayCtl.forceShow(t.node),this._setWidgetListeners(),setTimeout(function(){this.adjustPosition(),this.node.style.display="block"}.bind(this),50))}},{key:"attach",value:function(t){this._initDom(),t.appendChild(this.node)}},{key:"processPlayers",value:function(t,e){if(this.tourState>this.STATE.SHOWN)return void(this.currentPlayer&&this._hide());if(location.host.match(/([\w\d-]+\.)*youtube.com$/i)){if(!location.pathname.match(/\/watch/))return void this._hide();for(var i=0;i<e.length;i++){var n=e[i];if("youtube"===n.name&&n.node&&n.node!==this.currentTarget){this.show(n);break}}}}}]),t}();e.a=u},function(t,e,i){"use strict";function n(t,e){var i=document.createElement(t);return e&&(i.className=e),i}function r(t){var e=t._dl.render(s.a.get("template-list"),{i18n_check_label:i.i(a.i18n)("popup_check_label"),i18n_check_all:i.i(a.i18n)("popup_check_all"),i18n_check_none:i.i(a.i18n)("popup_check_none"),i18n_download_selected:i.i(a.i18n)("popup_download_selected"),i18n_download:i.i(a.i18n)("popup_download"),i18n_wait:i.i(a.i18n)("popup_download_starting"),i18n_one_click:i.i(a.i18n)("popup_one_click"),i18n_preferred_quality:i.i(a.i18n)("popup_preferred_quality"),i18n_no_media_found:i.i(a.i18n)("popup_no_media_found"),i18n_download_failed:i.i(a.i18n)("popup_download_failed"),i18n_pip_button:i.i(a.i18n)("popup_pip_button"),i18n_sound_only:i.i(a.i18n)("popup_sound_only"),has_pip:l.a.check(window.location.hostname,"pip")},t._preferredQuality),n=1===e.length?e[0]:null;if(n)if("select"===t._make_action){var r=a.Utils.query(".j-quality-selector:not([hidden])",n);r&&setTimeout(function(){var t=document.createEvent("MouseEvents");t.initMouseEvent("mousedown",!0,!0,window),r.dispatchEvent(t)},4)}else if("download"===t._make_action){var c=a.Utils.query(".j-quality-download:not([hidden])",n);c&&t._download(c)&&(o.a.log("Download",o.a.DOWNLOAD_AUTO),t.serverLogDownload(c,{autoselect:1}),t._updateDownloadSelected())}t._make_action=void 0}i.d(e,"b",function(){return y}),i.d(e,"a",function(){return n});var o=i(2),a=i(0),s=i(3),l=i(7),c=i(1),u=i(9),d=i(24),h=i(8),f=i(12),p=i(6),_=i.n(p),m=i(14),y=function(t,e){this._widget=n("div","downloads"),this._node=t,this._mode="select_media",this._downloadingId=-1,this._logShownSent=!1,this._userInitiated=!1,this._ready=!1,this._make_action=void 0,this._rendered=!1,this._hasDownloadLinks=!1,this._isFirstFreeNode=e};y.prototype={constructor:y,_init:function(t){this._widget=t,this._setPreferredQuality(s.a.get("preferred_quality_level")),this._widget.addEventListener("click",this._onWidgetClick.bind(this),!1),this._widget.addEventListener("change",this._onSelectChange.bind(this),!1),chrome.runtime.onMessage.addListener(function(t){if("downloads"===t.requestType&&"widget_progress"===t.method){var e=t.params;this._getWidgetMedialURLs().includes(e.url)&&e.mime&&(e.mime.includes("video")||e.mime.includes("octet-stream")&&e.filename.match(/\.mp4$/))&&!e.filename.match(/\.mp3$/)&&(e.exists&&(e.playable||"complete"===e.state)?(this._downloadingId=e.id,this._handleProgress(e)):"interrupted"!==e.state&&e.exists||this._changeWidgetMode("select_media"))}}.bind(this))},_renderWidget:function(){if(!this._rendered){var t=!l.a.check(location.href,"pip");t=t&&u.a.detector.isVideoNode(this._node),t=t||location.host.match(/^([\w\d_-]+\.)*youtube.com$/),t=t&&s.a.get("detach_enabled"),t&&u.a.detector.markCandidate(this._node),this._widget.innerHTML=_.a.render(s.a.get("template-widget"),{i18n_download:i.i(a.i18n)("popup_download"),i18n_pip_button:i.i(a.i18n)("popup_pip_button"),i18n_play_now:i.i(a.i18n)("play_now_play_now"),i18n_play_text:i.i(a.i18n)("play_now_click_to_play"),i18n_play_not_show:i.i(a.i18n)("play_now_do_not_show"),has_pip:t,no_downloads:!this._player||!this._player.ids.length||!a.Utils.flatten(this._player.ids||[]).length}),this._dl=new f.a(this._widget),this._dl.setDownloads(new h.b),this._rendered=!0,this._init(this._widget)}},attach:function(t){this._renderWidget();var e=t.firstChild;e?e!==this._widget&&t.replaceChild(this._widget,e):t.appendChild(this._widget),this._updateDownloads(),this._userInitiated=!1},_setPreferredQuality:function(t){if(t=t||c.a.DEFAULT_QUALITY_LEVEL,!this._userInitiated&&this._preferredQuality!==t){var e=a.Utils.query("#preferred-select",this._widget);e&&(this._preferredQuality=t,e.value=t,e.innerText=i.i(a.i18n)("popup_preferred_quality_hint")+" "+i.i(a.i18n)("ql_"+t.toLowerCase()))}},_updateDownloads:function(){if(!this._player||!this._userInitiated)return void this._setPreferredQuality(s.a.get("preferred_quality_level"));var t=this._manager._players.filter(function(t){return(t.node===this._node||this._isFirstFreeNode&&null===t.node)&&t.scraper&&t.ids.length&&!t.opts.aggressive}.bind(this));if(t.length){this._dl._downloads.setMediaData(this._manager.getMedia(t)).then(function(t){this._showDownloads(t.model,t.updated)}.bind(this))}this._userInitiated=!1},_showDownloads:function(t,e){if(e){var n=this._widget,s=t.getMediaCount(),l=a.Utils.query("#showhide-all",n);if(0===s&&!this._hasDownloadLinks)return n.className="downloads-empty",l.textContent=l.title=i.i(a.i18n)("popup_no_media_found"),void o.a.log("PageShown",o.a.PAGE_CONTENT_NO_MEDIA);n.className=s>1?"downloads-multi":"downloads-single main",l.textContent=i.i(a.i18n)("popup_how_many_media_found",[s]),r(this),this._updateButtonsStatus()}},_updateButtonsStatus:function(){if(this._rendered){var t=this._player&&this._player.ids.length&&a.Utils.flatten(this._player.ids).length;this._widget.querySelector(".main-panel")[t?"removeAttribute":"setAttribute"]("hidden",!0);var e=this._widget.querySelector("#downloads");t&&"progress"!==this._mode?e.removeAttribute("hidden"):e.setAttribute("hidden","hidden"),t&&!this._hasDownloadLinks&&(this._hasDownloadLinks=!0)}},_onClick:function(t){var e=this,i=t.target;switch(this.emit("widget_click",t),i.id){case"download-main":case"preferred-select":if(!e._userInitiated){i.setAttribute("disabled",!0);var n="preferred-select"===i.id;e._make_action=n?"select":"download",e._userInitiated=!0,o.a.log("ButtonClicked",n?o.a.BUTTON_FAKE_QUALITY:o.a.BUTTON_MAIN),i.innerHTML='<span class="file-size data-loading"></span>',e._updateDownloads()}return;case"showhide-all":var r=a.Utils.query("#downloads",e._widget);if(r){var s=!r.hidden;r.hidden=s,o.a.log("ButtonClicked",s?o.a.BUTTON_HIDE_DOWNLOADS:o.a.BUTTON_SHOW_DOWNLOADS)}return;case"download-selected":return o.a.log("ButtonClicked",o.a.BUTTON_DOWNLOAD_ALL),a.Utils.queryAll(".j-media-scope.selected",e._widget).forEach(function(t){e._download(a.Utils.query(".j-quality-download:not([hidden])",t))&&o.a.log("Download",o.a.DOWNLOAD_ALL)}),void e._updateDownloadSelected();case"check-all":return o.a.log("ButtonClicked",o.a.BUTTON_CHECK_ALL),void e._toggleSelectMedia(a.Utils.queryAll(".j-media-scope",e._widget),!0);case"check-none":return o.a.log("ButtonClicked",o.a.BUTTON_CHECK_NONE),void e._toggleSelectMedia(a.Utils.queryAll(".j-media-scope",e._widget),!1);case"open-pip":return o.a.log("ButtonClicked",o.a.BUTTON_DETACH),void u.a.detachPlayerOrNode(this._player);case"hide-widget":return o.a.log("ButtonClicked",o.a.BUTTON_HIDE),e._hideWidget(),void e.emit("hide");case"play-now":return void this._playNow();case"close-play-now-tooltip":var l=this._widget.querySelector(".tooltip-box");l&&(l.classList.remove("tooltip-shown"),o.a.log("PlayNow",o.a.PLAY_NOW_TOOLTIP_CLOSED))}switch(i.tagName){case"LI":if(i.classList.contains("j-media-scope")){var c=!i.classList.contains("selected");return void e._toggleSelectMedia(i,c)}break;case"A":case"SPAN":var d=i;return"SPAN"===i.tagName.toUpperCase()&&(d=i.parentNode),d.classList.contains("j-quality-download")?void(e._download(d)&&(o.a.log("Download",o.a.DOWNLOAD_BUTTON),this.serverLogDownload(d,{autoselect:0}),e._updateDownloadSelected())):!0;case"SELECT":return;case"INPUT":if("checkbox"===i.type){if(i.matches("#play-now-not-show-check"))return this._doNotShowTooltipAgain(t.target.checked),!0;var h=a.Utils.findParent(i,"j-media-scope");return h&&e._toggleSelectMedia(h,i.checked),!0}}return!0},_doNotShowTooltipAgain:function(t){s.a.set("hide_play_now_tooltip",t),t&&o.a.log("PlayNow",o.a.PLAY_NOW_TOOLTIP_NOT_SHOW_AGAIN)},_onSelectChange:function(t){var e=t.target;if("SELECT"===e.tagName){if("quality-level-selection"===e.id);else{var i=e.value.trim(),n=i.split("/")[1];if(s.a.get("prefer_last_quality")&&1===a.Utils.queryAll(".j-media-scope",this._widget).length){var r=c.a.getQualityLevelByQualityType(n);s.a.set("preferred_quality_level",r),s.a.set("preferred_quality:"+r,i)}var l=a.Utils.findParent(e,"j-media-scope");this._dl._applyCurrentValues(l),o.a.log("VideoQualityChanged",c.a.getVideoQualityIndex(n)),this._updateDownloadSelected()}return!1}},_onWidgetClick:function(t){if(!this._onClick(t))return t.preventDefault(),t.stopPropagation(),!0},_toggleSelectMedia:function(t,e){function i(t){t.classList.toggle("selected",e),a.Utils.query('.filename [type="checkbox"]',t).checked=e}Array.isArray(t)?t.forEach(i):i(t),this._updateDownloadSelected()},_updateDownloadSelected:function(){var t=!0;a.Utils.queryAll(".j-media-scope.selected",this._widget).some(function(e){if(a.Utils.query(".j-quality-download:not([hidden]):not(.j-disabled)",e))return t=!1,!0}),a.Utils.query("#download-selected",this._widget).classList.toggle("disabled",t)},_getMetricsParams:function(t,e){return this._dl.getMetricsParams(t,e)},_download:function(t){var e=!!this._dl.download(t);return e&&this.emit("download",t.dataset.quality),e},_hideWidget:function(){this._widget.setAttribute("hidden","hidden")},_handleProgress:function(t){var e=0;if("select_media"===this._mode&&(this._changeWidgetMode("progress"),this._logShownSent||(o.a.log("PlayNow",o.a.PLAY_NOW_SHOWN),this.emit("playnow_shown"))),"complete"!==t.state){var i=(t.bytesReceived/t.totalBytes*100).toFixed(0);i<0&&(i=0),e=i+"%"}else e="100%";var n=this._widget.querySelector(".progress-box .percent");n&&(n.innerText=e);var r=this._widget.querySelector(".progress-bar .bar");r&&(r.style.width=e)},_playNow:function(){-1!==this._downloadingId&&(chrome.runtime.sendMessage({method:"play",requestType:"downloads",params:this._downloadingId}),o.a.log("PlayNow",o.a.PLAY_NOW_WIDGET_CLICKED))},_changeWidgetMode:function(t){this._mode!==t&&(this._mode=t,this._updateUIMode(this._mode),d.default._controls.playNowBottomTooltip&&("progress"===this._mode?d.default._controls.playNowBottomTooltip.show(this._playNow.bind(this)):d.default._controls.playNowBottomTooltip.hide()))},_updateUIMode:function(t){var e=this._widget.querySelector(".main-panel"),i=this._widget.querySelector(".play-and-progress-box"),n=this._widget.querySelector("#downloads"),r=this._widget.querySelector(".progress-bar .bar"),a=this._widget.querySelector(".tooltip-box");switch(t){case"select_media":i.setAttribute("hidden","hidden"),e.removeAttribute("hidden"),n.removeAttribute("hidden"),a.classList.remove("tooltip-shown");break;case"progress":if(r.style.width=0,e.setAttribute("hidden","hidden"),n.setAttribute("hidden","hidden"),i.removeAttribute("hidden"),!s.a.get("hide_play_now_tooltip")){setTimeout(function(){a.classList.add("tooltip-shown"),o.a.log("PlayNow",o.a.PLAY_NOW_TOOLTIP_SHOWN)}.bind(this),500)}}},_getWidgetMedialURLs:function(){var t=[];try{t=this._dl._downloads.data.map(function(t){return t.url()})}catch(t){}return t},setMediaData:function(t,e){this._manager=t,this._player=e,null!==this._widget.parentNode&&!this._widget.parentNode.hidden&&this._hasDownloadLinks||(this._ready=!0,this._updateDownloads(),this._updateButtonsStatus())},isReady:function(){return this._ready},getWidgetRect:function(){var t=this._widget;return t?t.getBoundingClientRect():null},serverLogDownload:function(t,e){e=Object.assign(e,this._getMetricsParams(t)),o.a.serverLog("Download",e)},getWidgetPlayerName:function(){return this._player.name}},m(y.prototype)},function(t,e,i){"use strict";var n=n||function(t,e){var i={},n=i.lib={},r=function(){},o=n.Base={extend:function(t){r.prototype=this;var e=new r;return t&&e.mixIn(t),e.hasOwnProperty("init")||(e.init=function(){e.$super.init.apply(this,arguments)}),e.init.prototype=e,e.$super=this,e},create:function(){var t=this.extend();return t.init.apply(t,arguments),t},init:function(){},mixIn:function(t){for(var e in t)t.hasOwnProperty(e)&&(this[e]=t[e]);t.hasOwnProperty("toString")&&(this.toString=t.toString)},clone:function(){return this.init.prototype.extend(this)}},a=n.WordArray=o.extend({init:function(t,e){t=this.words=t||[],this.sigBytes=void 0!=e?e:4*t.length},toString:function(t){return(t||l).stringify(this)},concat:function(t){var e=this.words,i=t.words,n=this.sigBytes;if(t=t.sigBytes,this.clamp(),n%4)for(var r=0;r<t;r++)e[n+r>>>2]|=(i[r>>>2]>>>24-r%4*8&255)<<24-(n+r)%4*8;else if(65535<i.length)for(r=0;r<t;r+=4)e[n+r>>>2]=i[r>>>2];else e.push.apply(e,i);return this.sigBytes+=t,this},clamp:function(){var e=this.words,i=this.sigBytes;e[i>>>2]&=4294967295<<32-i%4*8,e.length=t.ceil(i/4)},clone:function(){var t=o.clone.call(this);return t.words=this.words.slice(0),t},random:function(e){for(var i=[],n=0;n<e;n+=4)i.push(4294967296*t.random()|0);return new a.init(i,e)}}),s=i.enc={},l=s.Hex={stringify:function(t){var e=t.words;t=t.sigBytes;for(var i=[],n=0;n<t;n++){var r=e[n>>>2]>>>24-n%4*8&255;i.push((r>>>4).toString(16)),i.push((15&r).toString(16))}return i.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n+=2)i[n>>>3]|=parseInt(t.substr(n,2),16)<<24-n%8*4;return new a.init(i,e/2)}},c=s.Latin1={stringify:function(t){var e=t.words;t=t.sigBytes;for(var i=[],n=0;n<t;n++)i.push(String.fromCharCode(e[n>>>2]>>>24-n%4*8&255));return i.join("")},parse:function(t){for(var e=t.length,i=[],n=0;n<e;n++)i[n>>>2]|=(255&t.charCodeAt(n))<<24-n%4*8;return new a.init(i,e)}},u=s.Utf8={stringify:function(t){try{return decodeURIComponent(escape(c.stringify(t)))}catch(t){throw Error("Malformed UTF-8 data")}},parse:function(t){return c.parse(unescape(encodeURIComponent(t)))}},d=n.BufferedBlockAlgorithm=o.extend({reset:function(){this._data=new a.init,this._nDataBytes=0},_append:function(t){"string"==typeof t&&(t=u.parse(t)),this._data.concat(t),this._nDataBytes+=t.sigBytes},_process:function(e){var i=this._data,n=i.words,r=i.sigBytes,o=this.blockSize,s=r/(4*o),s=e?t.ceil(s):t.max((0|s)-this._minBufferSize,0);if(e=s*o,r=t.min(4*e,r),e){for(var l=0;l<e;l+=o)this._doProcessBlock(n,l);l=n.splice(0,e),i.sigBytes-=r}return new a.init(l,r)},clone:function(){var t=o.clone.call(this);return t._data=this._data.clone(),t},_minBufferSize:0});n.Hasher=d.extend({cfg:o.extend(),init:function(t){this.cfg=this.cfg.extend(t),this.reset()},reset:function(){d.reset.call(this),this._doReset()},update:function(t){return this._append(t),this._process(),this},finalize:function(t){return t&&this._append(t),this._doFinalize()},blockSize:16,_createHelper:function(t){return function(e,i){return new t.init(i).finalize(e)}},_createHmacHelper:function(t){return function(e,i){return new h.HMAC.init(t,i).finalize(e)}}});var h=i.algo={};return i}(Math);!function(){var t=n,e=t.lib.WordArray;t.enc.Base64={stringify:function(t){var e=t.words,i=t.sigBytes,n=this._map;t.clamp(),t=[];for(var r=0;r<i;r+=3)for(var o=(e[r>>>2]>>>24-r%4*8&255)<<16|(e[r+1>>>2]>>>24-(r+1)%4*8&255)<<8|e[r+2>>>2]>>>24-(r+2)%4*8&255,a=0;4>a&&r+.75*a<i;a++)t.push(n.charAt(o>>>6*(3-a)&63));if(e=n.charAt(64))for(;t.length%4;)t.push(e);return t.join("")},parse:function(t){var i=t.length,n=this._map,r=n.charAt(64);r&&-1!=(r=t.indexOf(r))&&(i=r);for(var r=[],o=0,a=0;a<i;a++)if(a%4){var s=n.indexOf(t.charAt(a-1))<<a%4*2,l=n.indexOf(t.charAt(a))>>>6-a%4*2;r[o>>>2]|=(s|l)<<24-o%4*8,o++}return e.create(r,o)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(t){function e(t,e,i,n,r,o,a){return((t=t+(e&i|~e&n)+r+a)<<o|t>>>32-o)+e}function i(t,e,i,n,r,o,a){return((t=t+(e&n|i&~n)+r+a)<<o|t>>>32-o)+e}function r(t,e,i,n,r,o,a){return((t=t+(e^i^n)+r+a)<<o|t>>>32-o)+e}function o(t,e,i,n,r,o,a){return((t=t+(i^(e|~n))+r+a)<<o|t>>>32-o)+e}for(var a=n,s=a.lib,l=s.WordArray,c=s.Hasher,s=a.algo,u=[],d=0;64>d;d++)u[d]=4294967296*t.abs(t.sin(d+1))|0;s=s.MD5=c.extend({_doReset:function(){this._hash=new l.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(t,n){for(var a=0;16>a;a++){var s=n+a,l=t[s];t[s]=16711935&(l<<8|l>>>24)|4278255360&(l<<24|l>>>8)}var a=this._hash.words,s=t[n+0],l=t[n+1],c=t[n+2],d=t[n+3],h=t[n+4],f=t[n+5],p=t[n+6],_=t[n+7],m=t[n+8],y=t[n+9],v=t[n+10],g=t[n+11],w=t[n+12],E=t[n+13],S=t[n+14],b=t[n+15],T=a[0],O=a[1],L=a[2],A=a[3],T=e(T,O,L,A,s,7,u[0]),A=e(A,T,O,L,l,12,u[1]),L=e(L,A,T,O,c,17,u[2]),O=e(O,L,A,T,d,22,u[3]),T=e(T,O,L,A,h,7,u[4]),A=e(A,T,O,L,f,12,u[5]),L=e(L,A,T,O,p,17,u[6]),O=e(O,L,A,T,_,22,u[7]),T=e(T,O,L,A,m,7,u[8]),A=e(A,T,O,L,y,12,u[9]),L=e(L,A,T,O,v,17,u[10]),O=e(O,L,A,T,g,22,u[11]),T=e(T,O,L,A,w,7,u[12]),A=e(A,T,O,L,E,12,u[13]),L=e(L,A,T,O,S,17,u[14]),O=e(O,L,A,T,b,22,u[15]),T=i(T,O,L,A,l,5,u[16]),A=i(A,T,O,L,p,9,u[17]),L=i(L,A,T,O,g,14,u[18]),O=i(O,L,A,T,s,20,u[19]),T=i(T,O,L,A,f,5,u[20]),A=i(A,T,O,L,v,9,u[21]),L=i(L,A,T,O,b,14,u[22]),O=i(O,L,A,T,h,20,u[23]),T=i(T,O,L,A,y,5,u[24]),A=i(A,T,O,L,S,9,u[25]),L=i(L,A,T,O,d,14,u[26]),O=i(O,L,A,T,m,20,u[27]),T=i(T,O,L,A,E,5,u[28]),A=i(A,T,O,L,c,9,u[29]),L=i(L,A,T,O,_,14,u[30]),O=i(O,L,A,T,w,20,u[31]),T=r(T,O,L,A,f,4,u[32]),A=r(A,T,O,L,m,11,u[33]),L=r(L,A,T,O,g,16,u[34]),O=r(O,L,A,T,S,23,u[35]),T=r(T,O,L,A,l,4,u[36]),A=r(A,T,O,L,h,11,u[37]),L=r(L,A,T,O,_,16,u[38]),O=r(O,L,A,T,v,23,u[39]),T=r(T,O,L,A,E,4,u[40]),A=r(A,T,O,L,s,11,u[41]),L=r(L,A,T,O,d,16,u[42]),O=r(O,L,A,T,p,23,u[43]),T=r(T,O,L,A,y,4,u[44]),A=r(A,T,O,L,w,11,u[45]),L=r(L,A,T,O,b,16,u[46]),O=r(O,L,A,T,c,23,u[47]),T=o(T,O,L,A,s,6,u[48]),A=o(A,T,O,L,_,10,u[49]),L=o(L,A,T,O,S,15,u[50]),O=o(O,L,A,T,f,21,u[51]),T=o(T,O,L,A,w,6,u[52]),A=o(A,T,O,L,d,10,u[53]),L=o(L,A,T,O,v,15,u[54]),O=o(O,L,A,T,l,21,u[55]),T=o(T,O,L,A,m,6,u[56]),A=o(A,T,O,L,b,10,u[57]),L=o(L,A,T,O,p,15,u[58]),O=o(O,L,A,T,E,21,u[59]),T=o(T,O,L,A,h,6,u[60]),A=o(A,T,O,L,g,10,u[61]),L=o(L,A,T,O,c,15,u[62]),O=o(O,L,A,T,y,21,u[63]);a[0]=a[0]+T|0,a[1]=a[1]+O|0,a[2]=a[2]+L|0,a[3]=a[3]+A|0},_doFinalize:function(){var e=this._data,i=e.words,n=8*this._nDataBytes,r=8*e.sigBytes;i[r>>>5]|=128<<24-r%32;var o=t.floor(n/4294967296);for(i[15+(r+64>>>9<<4)]=16711935&(o<<8|o>>>24)|4278255360&(o<<24|o>>>8),i[14+(r+64>>>9<<4)]=16711935&(n<<8|n>>>24)|4278255360&(n<<24|n>>>8),e.sigBytes=4*(i.length+1),this._process(),e=this._hash,i=e.words,n=0;4>n;n++)r=i[n],i[n]=16711935&(r<<8|r>>>24)|4278255360&(r<<24|r>>>8);return e},clone:function(){var t=c.clone.call(this);return t._hash=this._hash.clone(),t}}),a.MD5=c._createHelper(s),a.HmacMD5=c._createHmacHelper(s)}(Math),function(){var t=n,e=t.lib,i=e.Base,r=e.WordArray,e=t.algo,o=e.EvpKDF=i.extend({cfg:i.extend({keySize:4,hasher:e.MD5,iterations:1}),init:function(t){this.cfg=this.cfg.extend(t)},compute:function(t,e){for(var i=this.cfg,n=i.hasher.create(),o=r.create(),a=o.words,s=i.keySize,i=i.iterations;a.length<s;){l&&n.update(l);var l=n.update(t).finalize(e);n.reset();for(var c=1;c<i;c++)l=n.finalize(l),n.reset();o.concat(l)}return o.sigBytes=4*s,o}});t.EvpKDF=function(t,e,i){return o.create(i).compute(t,e)}}(),n.lib.Cipher||function(t){var e=n,i=e.lib,r=i.Base,o=i.WordArray,a=i.BufferedBlockAlgorithm,s=e.enc.Base64,l=e.algo.EvpKDF,c=i.Cipher=a.extend({cfg:r.extend(),createEncryptor:function(t,e){return this.create(this._ENC_XFORM_MODE,t,e)},createDecryptor:function(t,e){return this.create(this._DEC_XFORM_MODE,t,e)},init:function(t,e,i){this.cfg=this.cfg.extend(i),this._xformMode=t,this._key=e,this.reset()},reset:function(){a.reset.call(this),this._doReset()},process:function(t){return this._append(t),this._process()},finalize:function(t){return t&&this._append(t),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(t){return{encrypt:function(e,i,n){return("string"==typeof i?_:p).encrypt(t,e,i,n)},decrypt:function(e,i,n){return("string"==typeof i?_:p).decrypt(t,e,i,n)}}}});i.StreamCipher=c.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var u=e.mode={},d=function(t,e,i){var n=this._iv;n?this._iv=void 0:n=this._prevBlock;for(var r=0;r<i;r++)t[e+r]^=n[r]},h=(i.BlockCipherMode=r.extend({createEncryptor:function(t,e){return this.Encryptor.create(t,e)},createDecryptor:function(t,e){return this.Decryptor.create(t,e)},init:function(t,e){this._cipher=t,this._iv=e}})).extend();h.Encryptor=h.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize;d.call(this,t,e,n),i.encryptBlock(t,e),this._prevBlock=t.slice(e,e+n)}}),h.Decryptor=h.extend({processBlock:function(t,e){var i=this._cipher,n=i.blockSize,r=t.slice(e,e+n);i.decryptBlock(t,e),d.call(this,t,e,n),this._prevBlock=r}}),u=u.CBC=h,h=(e.pad={}).Pkcs7={pad:function(t,e){for(var i=4*e,i=i-t.sigBytes%i,n=i<<24|i<<16|i<<8|i,r=[],a=0;a<i;a+=4)r.push(n);i=o.create(r,i),t.concat(i)},unpad:function(t){t.sigBytes-=255&t.words[t.sigBytes-1>>>2]}},i.BlockCipher=c.extend({cfg:c.cfg.extend({mode:u,padding:h}),reset:function(){c.reset.call(this);var t=this.cfg,e=t.iv,t=t.mode;if(this._xformMode==this._ENC_XFORM_MODE)var i=t.createEncryptor;else i=t.createDecryptor,this._minBufferSize=1;this._mode=i.call(t,this,e&&e.words)},_doProcessBlock:function(t,e){this._mode.processBlock(t,e)},_doFinalize:function(){var t=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){t.pad(this._data,this.blockSize);var e=this._process(!0)}else e=this._process(!0),t.unpad(e);return e},blockSize:4});var f=i.CipherParams=r.extend({init:function(t){this.mixIn(t)},toString:function(t){return(t||this.formatter).stringify(this)}}),u=(e.format={}).OpenSSL={stringify:function(t){var e=t.ciphertext;return t=t.salt,(t?o.create([1398893684,1701076831]).concat(t).concat(e):e).toString(s)},parse:function(t){t=s.parse(t);var e=t.words;if(1398893684==e[0]&&1701076831==e[1]){var i=o.create(e.slice(2,4));e.splice(0,4),t.sigBytes-=16}return f.create({ciphertext:t,salt:i})}},p=i.SerializableCipher=r.extend({cfg:r.extend({format:u}),encrypt:function(t,e,i,n){n=this.cfg.extend(n);var r=t.createEncryptor(i,n);return e=r.finalize(e),r=r.cfg,f.create({ciphertext:e,key:i,iv:r.iv,algorithm:t,mode:r.mode,padding:r.padding,blockSize:t.blockSize,formatter:n.format})},decrypt:function(t,e,i,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),t.createDecryptor(i,n).finalize(e.ciphertext)},_parse:function(t,e){return"string"==typeof t?e.parse(t,this):t}}),e=(e.kdf={}).OpenSSL={execute:function(t,e,i,n){return n||(n=o.random(8)),t=l.create({keySize:e+i}).compute(t,n),i=o.create(t.words.slice(e),4*i),t.sigBytes=4*e,f.create({key:t,iv:i,salt:n})}},_=i.PasswordBasedCipher=p.extend({cfg:p.cfg.extend({kdf:e}),encrypt:function(t,e,i,n){return n=this.cfg.extend(n),i=n.kdf.execute(i,t.keySize,t.ivSize),n.iv=i.iv,t=p.encrypt.call(this,t,e,i.key,n),t.mixIn(i),t},decrypt:function(t,e,i,n){return n=this.cfg.extend(n),e=this._parse(e,n.format),i=n.kdf.execute(i,t.keySize,t.ivSize,e.salt),n.iv=i.iv,p.decrypt.call(this,t,e,i.key,n)}})}(),function(){for(var t=n,e=t.lib.BlockCipher,i=t.algo,r=[],o=[],a=[],s=[],l=[],c=[],u=[],d=[],h=[],f=[],p=[],_=0;256>_;_++)p[_]=128>_?_<<1:_<<1^283;for(var m=0,y=0,_=0;256>_;_++){var v=y^y<<1^y<<2^y<<3^y<<4,v=v>>>8^255&v^99;r[m]=v,o[v]=m;var g=p[m],w=p[g],E=p[w],S=257*p[v]^16843008*v;a[m]=S<<24|S>>>8,s[m]=S<<16|S>>>16,l[m]=S<<8|S>>>24,c[m]=S,S=16843009*E^65537*w^257*g^16843008*m,u[v]=S<<24|S>>>8,d[v]=S<<16|S>>>16,h[v]=S<<8|S>>>24,f[v]=S,m?(m=g^p[p[p[E^g]]],y^=p[p[y]]):m=y=1}var b=[0,1,2,4,8,16,32,64,128,27,54],i=i.AES=e.extend({_doReset:function(){for(var t=this._key,e=t.words,i=t.sigBytes/4,t=4*((this._nRounds=i+6)+1),n=this._keySchedule=[],o=0;o<t;o++)if(o<i)n[o]=e[o];else{var a=n[o-1];o%i?6<i&&4==o%i&&(a=r[a>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a]):(a=a<<8|a>>>24,a=r[a>>>24]<<24|r[a>>>16&255]<<16|r[a>>>8&255]<<8|r[255&a],a^=b[o/i|0]<<24),n[o]=n[o-i]^a}for(e=this._invKeySchedule=[],i=0;i<t;i++)o=t-i,a=i%4?n[o]:n[o-4],e[i]=4>i||4>=o?a:u[r[a>>>24]]^d[r[a>>>16&255]]^h[r[a>>>8&255]]^f[r[255&a]]},encryptBlock:function(t,e){this._doCryptBlock(t,e,this._keySchedule,a,s,l,c,r)},decryptBlock:function(t,e){var i=t[e+1];t[e+1]=t[e+3],t[e+3]=i,this._doCryptBlock(t,e,this._invKeySchedule,u,d,h,f,o),i=t[e+1],t[e+1]=t[e+3],t[e+3]=i},_doCryptBlock:function(t,e,i,n,r,o,a,s){for(var l=this._nRounds,c=t[e]^i[0],u=t[e+1]^i[1],d=t[e+2]^i[2],h=t[e+3]^i[3],f=4,p=1;p<l;p++)var _=n[c>>>24]^r[u>>>16&255]^o[d>>>8&255]^a[255&h]^i[f++],m=n[u>>>24]^r[d>>>16&255]^o[h>>>8&255]^a[255&c]^i[f++],y=n[d>>>24]^r[h>>>16&255]^o[c>>>8&255]^a[255&u]^i[f++],h=n[h>>>24]^r[c>>>16&255]^o[u>>>8&255]^a[255&d]^i[f++],c=_,u=m,d=y;_=(s[c>>>24]<<24|s[u>>>16&255]<<16|s[d>>>8&255]<<8|s[255&h])^i[f++],m=(s[u>>>24]<<24|s[d>>>16&255]<<16|s[h>>>8&255]<<8|s[255&c])^i[f++],y=(s[d>>>24]<<24|s[h>>>16&255]<<16|s[c>>>8&255]<<8|s[255&u])^i[f++],h=(s[h>>>24]<<24|s[c>>>16&255]<<16|s[u>>>8&255]<<8|s[255&d])^i[f++],t[e]=_,t[e+1]=m,t[e+2]=y,t[e+3]=h},keySize:8});t.AES=e._createHelper(i)}(),n.pad.NoPadding={pad:function(){},unpad:function(){}},e.a=n},function(t,e,i){"use strict";function n(t){return function(e){return e[t]}}function r(t){var e=a.Utils.toArray(arguments);return e.shift(),function(i){return i[t].apply(i,e)}}var o=i(99),a=i(0),s=i(2),l=a.Utils.query.bind(a.Utils),c=a.Utils.queryAll.bind(a.Utils),u=function(){this._items=[],this._isReported=!1,this._scrape()};u.VERSION=6,u.prototype={ITEMS_PER_PAGE:10,NOT_SERP_NODES_SELECTOR:"hr",IMAGE_NODE_SELECTOR:"#imagebox_bigimages",SEARCH_BLOCKS_SELECTOR:"#ires .g",POI_SERP_SELECTOR:"#rso > div > div[data-hveid] > div[jsl]",POI_SIDE_SELECTOR:"#rhs_block > div",_addItem:function(t,e,i){var n=this._items.length;this._items.push(new o.a(t,e,i,this._docId,n))},_scrapeAds:function(t){var e=this,i={"top-ad":"#tads > ol > li","bottom-ad":"#bottomads ol >li"},n=c(i[t]);return n.forEach(function(i,n){e._addItem(t,i,n)}),n.length},_scrapeSER:function(t,e){var i=this,n=a.Utils.toArray(t.children).filter(function(t){return t.nodeType===Node.ELEMENT_NODE});return n.forEach(function(t,n){i._addItem("organic",t,e+n)}),n.length},_scrapeResults:function(){var t=this,e=c(this.SEARCH_BLOCKS_SELECTOR+", "+this.POI_SERP_SELECTOR),i=0;return e.forEach(function(e){if(""!==e.textContent.trim()&&!e.matches(t.NOT_SERP_NODES_SELECTOR)){var n=e.matches(".srg")?e:e.querySelector(".srg");n?i+=t._scrapeSER(n,i):e.matches(t.IMAGE_NODE_SELECTOR)?t._addItem("image",e,i++):e.matches(t.POI_SERP_SELECTOR)?t._addItem("poi-serp",e,i++):t._addItem("organic",e,i++)}}),i},_generateDocId:function(){return Date.now().toString(32)+"-"+Math.random().toString(32).slice(2)},_scrapeSidePOI:function(){var t=l(this.POI_SIDE_SELECTOR);t&&this._addItem("poi-side",t,this._items.length)},get _q(){function t(t){return t.offsetWidth&&t.offsetHeight}var e=l(".spell_orig b");if(e&&t(e))return e.textContent.trim();var i=l("a.spell_orig");return i&&i.href&&t(i)||(i=l(".qs")),i&&t(i)&&i.href?a.Utils.g.getSearchParams(i.href).q:null},_parsePage:function(){var t=l("#nav .cur");return t?parseInt(t.textContent.trim()):1},_scrape:function(){this._docId=this._generateDocId(),this._s=(this._parsePage()-1)*this.ITEMS_PER_PAGE,this._scrapeAds("top-ad"),this._scrapeResults(),this._scrapeAds("bottom-ad"),this._scrapeSidePOI()},getSERPData:function(){return{type:"gsearch",id:this._docId,domain:window.location.href,referer:this._extractReferer(),searchQuery:this._q,searchStart:this._s,timestamp:Date.now(),items:this._items.map(n("data")),version:u.VERSION}},_extractReferer:function(){if(document.referrer)return document.referrer;if(this._isFromIndexPage)return"g_index";var t=document.location.search,e=document.location.hash,i=/[&?]sourceid=chrome&?/gi;return/#q=./gi.test(e)?"g_serp":i.test(t)?"omnibox":"unknown"},_metricsReport:function(){s.a.log("SerpData",this.getSERPData())},_consoleReport:function(){this._items.forEach(r("renderToConsole"))},isSameSearchAs:function(t){return t&&t.q===this._q&&t.s==this._s},report:function(t){this._isFromIndexPage=t,this._isReported||(this._isReported=!0,this._metricsReport())},destroy:function(){this._items.forEach(r("destroy"))}},e.a=u},function(t,e,i){"use strict";var n=i(11),r=function(){n.a.apply(this,arguments)};r.prototype={__proto__:n.a.prototype,DESC_SELECTOR:".ads-creative",LINK_SELECTOR:"h3 a:last-child",NOT_RAW_CONTENT_SELECTOR:"h3, .ads-visurl, .ads-creative",TITLE_SELECTOR:"h3 a:last-child",_extractAdditionalContent:function(){var t=this,e="";return Array.from(this._node.children).forEach(function(i){i.matches(t.NOT_RAW_CONTENT_SELECTOR)||(e+=i.outerHTML+"\n")}),e},_extractData:function(){var t=n.a.prototype._extractData.apply(this,arguments),e=this._extractAdditionalContent();return t.addRawContent=e,t}},e.a=r},function(t,e,i){"use strict";var n=i(0),r=i(11),o=n.Utils.query.bind(n.Utils),a=n.Utils.getNodePropOrEmptyString.bind(n.Utils),s=function(){r.a.apply(this,arguments)};s.prototype={__proto__:r.a.prototype,IMAGE_NODE_SELECTOR:"#imagebox_bigimages",IMAGE_TITLE:"h3 > a",SEARCH_BLOCKS_SELECTOR:"#ires .g",_validateAndSetDataType:function(t){if(this._node.matches(this.IMAGE_NODE_SELECTOR)){var e=o(this.IMAGE_TITLE,this._node);this._data.type=t,this._data.title=a(e,"textContent"),this._data.url=a(e,"href")}else this._data.type="unknown"}},e.a=s},function(t,e,i){"use strict";var n=i(0),r=i(11),o=n.Utils.getNodePropOrEmptyString.bind(n.Utils),a=function(){r.a.apply(this,arguments)};a.prototype={__proto__:r.a.prototype,LINK_SELECTOR:'a[tabindex="0"]',LINK_MAP:"#lu_map",_validateAndSetDataType:function(t){var e=this._node.querySelector(this.LINK_MAP);if(e){var i=e.parentNode;this._data.url=o(i,"href"),this._data.type=t}else this._data.type="unknown"}},e.a=a},function(t,e,i){"use strict";var n=i(96),r=i(97),o=i(98),a=i(11),s={"top-ad":n.a,"bottom-ad":n.a,image:r.a,"poi-serp":o.a,"poi-side":o.a},l=function(t,e,i,n,r){return new(s[t]||a.a)(t,e,i,n,r)};e.a=l},,,function(t,e,i){"use strict";e.a=function(t,e){var i=new Set(["string","number","boolean","undefined"]),n=function(t){try{if(null===t||i.has(typeof t))return t;if(Array.isArray(t))return t.map(n);if("object"==typeof t&&Object.getPrototypeOf(t)===Object.prototype){var e={};return Object.keys(t).forEach(function(i){e[i]=n(t[i])}),e}return null}catch(t){return null}},r={report:function(e,i){e(Array.isArray(i)?n(i.reduce(function(t,e){return t&&t[e]},t)):null)},eval:function(t,e){var i=null;try{i=new Function(e).call(this)}catch(t){i=t.toString()}t(n(i))}};t.addEventListener("message",function(i){if(i.origin===location.origin&&i.data&&i.data.port===e&&"coc_crx2page"===i.data.type){var n=i.data.id,o=i.data.data,a=function(i){i={data:i,id:n,port:e,type:"coc_page2crx"},t.postMessage(i,location.origin)};"method"in o&&o.method in r&&r[o.method].apply(r,[a].concat(o.args))}})}}],[24]);