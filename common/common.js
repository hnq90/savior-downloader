(window.webpackJsonp=window.webpackJsonp||[]).push([[0],[function(e,t,n){"use strict";n.r(t);var i=n(4);function r(e){return e.split(".").map(function(e){return parseInt(e)})}n.d(t,"BrFeatures",function(){return l}),n.d(t,"UrlUtils",function(){return c}),n.d(t,"BGUtils",function(){return u}),n.d(t,"Utils",function(){return d}),n.d(t,"i18n",function(){return f}),n.d(t,"SAVIOR_VERSION",function(){return h});var o,a,s="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},l=function(e){var t=e.match(/Chrome\/([\d.]+)/);t&&t[1]&&(t=r(t[1]));var n=function(e,t){if(!e)return!1;var n=t.split(" ");if(2!==n.length)return!1;var i=void 0;switch(n[0]){case">":i=1;break;case">=":i=0}var o,a,s,l=r(n[1]);return a=l,(0!=(s=(o=e)[0]-a[0])?s:0!=(s=o[1]-a[1])?s:0!=(s=o[2]-a[2])?s:s=o[3]-a[3])>=i}.bind(null,t);return{YT:{mp4:!0,m4a:!0,webm:n(">= 39.0.2171.103")},M3U8:n("> 62.4.3202.180"),SOUND_ONLY:n("> 55.4.2883.114")||!!t&&50===t[0]&&n("> 50.3.2661.150"),SUBTITLES:n("> 55.4.2883.114")||!!t&&50===t[0]&&n("> 50.3.2661.150"),PLAY_NOW_BOTTOM_TOOLTIP:n("> 55.4.2883.126"),IS_ADS_PIP_PARAMS:n("> 60.4.3112.120"),MEDIA_WEB_REQUEST:n(">= 58.4.3029.118"),SERP_ADD_STRUCTURES:n(">= 62.4.3202.176"),SERP_ADD_INNER_STRUCTURES:n(">= 64.4.3282.200"),MOBILE_TRANSFER_PANEL:!0,CUSTOM_METRICS_JSON:n(">= 64.4.3282.236")}}(window.navigator.userAgent),c=function(){var e=document.createElement("a"),t=/([^/]+)$/i,n=/\.([^/.]*)$/i,r=/^(?:([^:/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:/?#]*)(?::(\d*))?))?((((?:[^?#/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/;function o(e){return e&&0!==e.indexOf("data:image")?r.exec(e):[]}var a=o(document.location.href);return{parse:function(i,r){var o=e;o.setAttribute("href",i);var a=(o.pathname.match(t)||[])[1]||"",s=a.split(".").map(function(e){return e.toLowerCase()});a=decodeURIComponent(a.replace(n,"")),s.shift();var l=s[s.length-1]||"",c={url:i,protocol:o.protocol,host:o.host,port:o.port,pathname:o.pathname,filename:a,ext:l,exts:s,hash:o.hash,search:o.search};return c.port||delete c.port,r&&(c.query={},o.search.replace(/^\?/,"").split(/&/).forEach(function(e){e=e.split("="),c.query[e[0]]=e[1]})),c},parseParamString:function(e){var t={};return(e=e.replace(/^[#?]{1}/,"")).split("&").forEach(function(e){var n=e.split("=");d.defined(n[0])&&d.defined(n[1])&&(t[n[0]]=decodeURIComponent(n[1].replace(/\+/g," ")))}),t},format:function(t){if((t=Object.create(t)).query){for(var n in t.search=[],t.query)void 0!==t.query[n]?t.search.push(n+"="+encodeURIComponent(t.query[n])):t.search.push(n);t.search="?"+t.search.join("&"),delete t.query}for(var i in t)e[i]=t[i];return e.href},parse0:o,resolve:function(e,t){e=o(e),t||(t=a);var n=e[1],i=e[2],r=e[9],s=e[12],l=e[13];n||(n=t[1],i||(i=t[2],r?"/"!==r.charAt(0)&&(r=(t[10]||"/")+r):(r=t[9],s||(s=t[12]))));var c=n+"://"+i+r;return s&&(c+="?"+s),l&&(c+="#"+l),c},getHost:function(e){return o(e)[6]||""},getMediaType:function(e){var t=o(e)[11]||"";if(!t)return"";e.includes("googlevideo.com/videoplayback")&&"videoplayback"===t&&e.includes("mp4")&&(t="video.mp4"),e.includes("videoplayback")&&"videoplayback"===t&&e.includes("mp4")&&(t="video.mp4");var n=t.split("."),r=n.length-1;if(r<=0)return"";var a=n[r].toLowerCase();return i.a.get(a)}}}(),u={sendMessage:function(e,t){try{chrome.runtime.sendMessage(e,t)}catch(e){return!1}return!0}},d={SIZES:["B","KB","MB","GB","TB","PB"],_BASE:-1!==window.navigator.appVersion.indexOf("Win")?1024:1e3,xmlParser:new window.DOMParser,hash:function(e,t){if(t|=0,0===e.length)return t;var n,i=void 0;for(i=0,n=e.length;i<n;i++)t=(t<<5)-t+e.charCodeAt(i),t|=0;return t},query:function(e,t){return(t=t||document).querySelector(e)},queryAll:function(e,t){return t=t||document,d.toArray(t.querySelectorAll(e))},findParent:function(e,t){for(;null!==e&&e.classList&&!e.classList.contains(t);)e=e.parentNode;return e},nearestParent:function(e,t){for(var n=e;null!==n&&n!==document&&!n.matches(t);)n=n.parentNode;return document===n?null:n},closest:function(e,t){return e.matches(t)?[e]:d.queryAll(t,e)},getNodePropOrEmptyString:function(e,t){return e&&e[t]||""},stripTagsExcept:function(e){return e.replace(/<(?!\/?(?:b|em))[^>]+>/g,"")},toArray:function(e){return Array.prototype.slice.call(e)},unique:function(e){return Array.from(new Set(e))},extend:function(e,t){var n=function(){};n.prototype=e.prototype,t.prototype=new n,t.prototype.constructor=t,t._super=e.prototype},isMatches:function(e,t){var n,i=void 0,r=void 0;if(Array.isArray(e)){for(i=0;i<e.length;++i)if(d.isMatches(e[i],t))return!0;return!1}for(i=0,n=(t=Array.isArray(t)?t:[t]).length;i<n;++i)if("string"==typeof(r=t[i])&&-1!==e.indexOf(r)||r instanceof RegExp&&e.match(r))return!0;return!1},_sendBackgroundRequest:function(e,t,n,i,r){return new Promise(function(o,a){chrome.runtime.sendMessage({requestType:"make_http_request",method:e,url:t,params:n,headers:i,includeCredentials:r},function(e){e&&"resolve"===e.success?o(e.data):a(e&&e.data?e.data:null)})})},getYoutubeInfo:function(e){return new Promise(function(t,n){chrome.runtime.sendMessage({requestType:"youtube_get_info",method:"GET",url:e},function(e){e.success?t(e.data):n(e.data)})})},send:function(e,t,n,i){var r=arguments.length>4&&void 0!==arguments[4]&&arguments[4];if(d.IS_CONTENT_SCRIPT)return d._sendBackgroundRequest.apply(null,arguments);var o=null,a=new Headers;if("object"===(void 0===i?"undefined":s(i)))for(var l in i)a.append(l,i[l]);"object"===(void 0===n?"undefined":s(n))&&(o=Object.keys(n).map(function(e){return e+"="+n[e]}).join("&")),"POST"===e&&a.append("Content-type","application/x-www-form-urlencoded");var c={method:e,headers:a,cache:"reload",body:o||void 0};return r&&(c.credentials="include"),window.fetch(t,c).then(function(e){return e.text()})},get:function(e,t){return d.send("GET",e,{},t)},_getSize:function(e){var t=null,n=new XMLHttpRequest;return e=this.addProtocol(e),new Promise(function(i,r){function o(e){e?i(e):r(e),n.abort(),clearTimeout(t),t=null}n.open("GET",e),n.setRequestHeader("Cache-Control","no-cache"),n.url=e,n.onreadystatechange=function(){if(!(this.readyState<2)){var e=null;try{e=+this.getResponseHeader("Content-Length"),Number.isNaN(e)&&(e=null)}catch(e){}null===e&&200!==this.status||(200!==this.status&&(e=null),o(e))}},n.send(null),t=setTimeout(o,1e4)})},getSize:function(e){return new Promise(function(t,n){window.cache.get(e).then(function(n){if(!n)return Promise.reject();t(n),window.cache.put(e,n)}).catch(function(){d._getSize(e).then(function(n){window.cache.put(e,n),t(n)}).catch(function(){console.error("Cannot request file size:",e),n(null)})})})},beautifyFileSize:function(e,t){if(!e)return"";var n=d._BASE,i=void 0;for(i=0;i<d.SIZES.length&&e>=n;++i)e/=n;var r=d.SIZES[i],o=Math.round(10*e)/10;return t&&r&&"kb"===r.toLowerCase()&&(o=o.toFixed(0)),o+d.SIZES[i]},detectMediaTypeAndExt:function(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:"";if(-1!==["application/x-mpegurl","application/vnd.apple.mpegurl","audio/x-mpegurl","audio/mpegurl"].indexOf(t))return e.type="video",e.ext="m3u8",e;var n=d.getMediaType(t,e.exts);return n&&i.b[n]&&(e.type=n,e.exts&&0!==e.exts.length||!t.includes("mp4")||(e.ext="mp4")),e},getMediaType:function(e,t){var n=void 0;for(var r in i.b){if(n=i.b[r],e&&e.match(n.rgxp))return r;if(Array.isArray(t)&&d._findIntersection(t,n.extensions)||-1!==n.extensions.indexOf(t))return r}return null},_findIntersection:function(e,t){for(var n=e.concat(t),i={},r=0;r<n.length;++r){var o=n[r];if(i[o])return o;i[o]=!0}return null},getProp:function(e,t){return function e(t,n){var i=n.shift();return!i||"object"!==(void 0===t?"undefined":s(t))&&"function"!=typeof t||null===t?null:0===n.length?t[i]:e(t[i],n)}(e,t.split("."))},call:function(e,t){if(e&&!(e.length<=0))for(var n=[].slice.call(arguments,2),i=0;i<e.length;i++)e[i].apply(t,n)},noop:function(){},defined:function(e){return void 0!==e},debounce:function(e,t,n){var i=void 0;return function(){var r=this,o=arguments;i?clearTimeout(i):n&&e.apply(r,o),i=setTimeout(function(){n||e.apply(r,o),i=null},t||100)}},replaceEntities:function(e){var t={"&amp;":"&"};return String(e).replace(/&amp;/g,function(e){return t[e]})},isFullscreen:function(){return Boolean(document.fullscreenElement||document.webkitFullscreenElement)},splitMediaSourcesByTitle:function(e){var t=new Map;return e.forEach(function(e){var n=e.title||e.filename;t.has(n)?t.set(n,t.get(n).concat(e)):t.set(n,[e])}),t},flatten:function(e,t){var n=Object.prototype.toString,i=[],r=t&&e||e.slice(),o=void 0;if(!e.length)return i;o=r.pop();do{"[object Array]"===n.call(o)?r.push.apply(r,o):i.push(o)}while(r.length&&void 0!==(o=r.pop()));return i.reverse(),i},addProtocol:function(e,t){return e?(void 0===t&&(t="http"),"//"===e.slice(0,2)?t+":"+e:e):e},isDescendant:function(e,t){for(t=t.parentNode;t&&t!==e;)t=t.parentNode;return!!t},makeId:function(e){var t=e.url,n=e.quality,i=!!e.soundOnly;return e="object"===(void 0===t?"undefined":s(t))?t.videoUrl+"\n"+t.audioUrl:t+(i?"mp3_"+n:""),d.hash(e).toString()},$E:function(e,t){var n=document.createElement(e);return t&&(n.className=t),n},xpath:function(){return{forElement:function(e){return e&&e.id&&!/\d/.test(e.id)?"//"+e.tagName+'[@id="'+e.id+'"]':function(e){for(var t=[];e&&e.nodeType==Node.ELEMENT_NODE;e=e.parentNode){var n=0,i=!1,r=void 0;for(r=e.previousSibling;r;r=r.previousSibling)r.nodeType!=Node.DOCUMENT_TYPE_NODE&&r.nodeName==e.nodeName&&++n;for(r=e.nextSibling;r&&!i;r=r.nextSibling)r.nodeName==e.nodeName&&(i=!0);var o=(e.prefix?e.prefix+":":"")+e.localName,a=n||i?"["+(n+1)+"]":"";t.splice(0,0,o+a)}return t.length?"/"+t.join("/"):null}(e)},find:function(e,t){return t=t||document,document.evaluate(e,t,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}}}(),g:(o=new RegExp("^(www\\.)?google\\.((com|ac|ad|ae|al|am|as|at|az|ba|be|bf|bg|bi|bj|bs|bt|by|ca|cc|cd|cf|cat|cg|ch|ci|cl|cm|cn|cv|cz|de|dj|dk|ee|fi|dm|dz|es|fm|fr|ga|ge|gf|gg|gl|gm|gp|gr|gy|hn|hr|ht|hu|ir|iq|ie|im|io|is|it|je|ki|kg|jo|kz|la|lt|lu|lv|li|lk|md|me|mg|mk|ml|mn|ms|mu|mv|mw|nl|no|nr|nu|pl|ne|pn|ps|pt|ro|rs|ru|rw|sc|se|sh|si|sn|sm|so|tk|tl|tm|to|tn|st|sk|tt|td|vu|ws|vg|tg|us)|(co((\\.(th|id|il|in|jp|ke|ma|kr|mz|ls|nz|tz|ug|uk|uz|ve|vi|za|zm|zw|ao|ck|bw|cr))|m\\.(pr|py|qa|sa|sb|sg|sl|sv|tj|tn|tr|tw|gh|gi|gt|hk|jm|kw|lb|lc|ly|mm|mt|mx|my|na|nf|ng|ni|np|om|pa|pe|ph|pk|pg|ua|uy|vc|vn|af|ag|ai|ar|au|bd|bh|bn|bo|br|bz|kh|co|cu|cy|do|ec|eg|et|fj))))$","i"),a=/[&?]q=[^&]/i,{isSERPHost:function(e){return Boolean(e.match(o))},isSERPRequest:function(e){var t=c.parse(e);return Boolean(this.isSERPHost(t.host)&&t.pathname.match(/\/s(earch)?/i)&&t.search.match(a))},getSearchParams:function(e){var t=c.parse(e),n=c.parseParamString(t.search),i=c.parseParamString(t.hash||"#"),r=d.defined(i.q);return{_rawSearch:n,_rawHash:i,q:r?i.q:n.q||null,s:r?i.start||0:n.start||0,tbm:r?i.tbm:n.tbm||null,isXHR:n.tch,isHash:r}}})};try{chrome.extension.getBackgroundPage(),d.IS_CONTENT_SCRIPT=!1}catch(e){d.IS_CONTENT_SCRIPT=!0}try{d.IS_INCOGNITO=chrome.extension.inIncognitoContext}catch(e){d.IS_INCOGNITO=!1}var h=window.SAVIOR_VERSION||"dev",f=void 0;try{f=chrome.i18n.getMessage}catch(e){}},function(e,t,n){"use strict";var i=n(0),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.SERVER_LOG_URL="https://coccoc.com/s_log",this.SOURCE_POPUP_PAGE=0,this.SOURCE_OPTIONS_PAGE=10,this.SOURCE_CONTENT_SCRIPT=20,this.SOURCE_BACKGROUND_PAGE=30,this.LEGACY_METRICS_NAME_MAP={ButtonClicked:"TryItNowButtonClicked",CheckBoxClicked:"OneClickCheckbox"},this.PAGE_WELCOME_SCREEN=0,this.PAGE_DOWNLOADS_LIST=1,this.PAGE_ONE_CLICK_DOWNLOAD=2,this.PAGE_NO_MEDIA_FOUND=3,this.PAGE_OPTIONS=4,this.PAGE_CONTENT_SHOW_CONTROLS=5,this.PAGE_CONTENT_NO_MEDIA=9,this.DOWNLOAD_AUTO=0,this.DOWNLOAD_BUTTON=1,this.DOWNLOAD_ALL=2,this.DOWNLOAD_REQUEST_SIZE=3,this.DOWNLOAD_REQUEST_SIZE_FAILED=4,this.DOWNLOAD_SOUND_ONLY=5,this.DOWNLOAD_CANCELED=7,this.DOWNLOAD_SUBTITLES=9,this.BUTTON_MAIN=0,this.BUTTON_TRY_IT_NOW=1,this.BUTTON_SHOW_DOWNLOADS=2,this.BUTTON_HIDE_DOWNLOADS=3,this.BUTTON_DOWNLOAD_ALL=4,this.BUTTON_CHECK_ALL=5,this.BUTTON_CHECK_NONE=6,this.BUTTON_FAKE_QUALITY=7,this.BUTTON_DETACH=8,this.BUTTON_HIDE=9,this.CHECK_BOX_ENABLE_ONE_CLICK=0,this.CHECK_BOX_SHOW_ON_PAGE_BUTTONS=2,this.CHECK_BOX_PREFER_LAST_QUALITY=4,this.CHECK_BOX_DETACH_ENABLED=6,this.PIP_DETACH_CLICK=0,this.PIP_RESTORE_CLICK=1,this.PIP_SITE_LINK_CLICK=2,this.PLAY_NOW_SHOWN=0,this.PLAY_NOW_WIDGET_CLICKED=1,this.PLAY_NOW_TOOLTIP_SHOWN=2,this.PLAY_NOW_TOOLTIP_CLOSED=3,this.PLAY_NOW_TOOLTIP_NOT_SHOW_AGAIN=4,this.PLAY_NOW_TOOLTIP_BOTTOM_SHOWN=5,this.PLAY_NOW_TOOLTIP_BOTTOM_CLOSED=6,this.PLAY_NOW_TOOLTIP_BOTTOM_NOT_SHOW_AGAIN=7,this.EXTENSION_MP4=1,this.EXTENSION_MP3=2,this.EXTENSION_WEBM=3,this.EXTENSION_3GP=4,this.EXTENSION_SRT=5,this.EXTENSION_OTHER=6,this.SEND_MOBILE_SHOW=1,this.SEND_MOBILE_CLICK=2,this.SEND_MOBILE_CLICK_CLOSE=3,this.SEND_MOBILE_CLICK_A=4,this.SEND_MOBILE_CLICK_G=5,this.SEND_MOBILE_CLICK_W=6,this.SEND_MOBILE_CLICK_AUDIO=7,this.SEND_MOBILE_ERROR=9}return r(e,[{key:"_getFullName",value:function(e){return"Savior."+(this.LEGACY_METRICS_NAME_MAP[e]||e)}},{key:"_getTotalValue",value:function(e,t,n){return 0===e.indexOf("Refr")||n||"PageShown"===e||"number"!=typeof t?t:t+this.source}},{key:"_doLog",value:function(e,t,n){var i=this._getFullName(t);if(this.source===this.SOURCE_CONTENT_SCRIPT)chrome.runtime.sendMessage({requestType:"metrics",method:"log",params:{name:t,value:n}});else if(chrome.metricsPrivate)switch(e){case"recordSmallCount":chrome.metricsPrivate.recordValue({metricName:i,type:chrome.metricsPrivate.MetricTypeType.HISTOGRAM_LINEAR,min:0,max:100,buckets:100},n);break;case"recordValue":chrome.metricsPrivate.recordValue({metricName:i,type:chrome.metricsPrivate.MetricTypeType.HISTOGRAM_LINEAR,min:0,max:1e3,buckets:1002},n);break;case"recordSerpData":case"recordClickData":chrome.metricsPrivate[e](n)}else console.info("%c[Metrics]","color:gray",e,i,n)}},{key:"recordCustomData",value:function(e){if(chrome.metricsPrivate)chrome.metricsPrivate.recordCustomData(e);else{if(e&&1===e.length)return void console.info("%c[Metrics] %crecordCustomData %c%s","color:gray","color:silver","color: lightgreen",e[0].key,e);console.info("%c[Metrics]","color:gray","recordCustomData",e)}}},{key:"_getMethodByName",value:function(e){switch(e){case"Refr":case"RefrSE":case"RefrFE":case"RefrPin":return"recordValue";case"SerpData":return"recordSerpData";case"SerpClickData":return"recordClickData";case"recordCustomData":return"recordCustomData";default:return"recordSmallCount"}}},{key:"log",value:function(e,t,n){var i=this._getMethodByName(e);if("recordCustomData"!==i){var r=this._getTotalValue(e,t,n);this._doLog(i,e,r)}else this.recordCustomData(t)}},{key:"logYtExtension",value:function(e){switch(e.toLowerCase()){case"mp4":this.log("YtExtension",this.EXTENSION_MP4);break;case"mp3":this.log("YtExtension",this.EXTENSION_MP3);break;case"webm":this.log("YtExtension",this.EXTENSION_WEBM);break;case"3gp":this.log("YtExtension",this.EXTENSION_3GP);break;case"srt":this.log("YtExtension",this.EXTENSION_SRT);break;default:this.log("YtExtension",this.EXTENSION_OTHER)}}},{key:"logSendMobile",value:function(e){this.log("SendMobile",e)}},{key:"logFromContentScript",value:function(e,t){this.log(e,t,!0)}},{key:"serverLog",value:function(e,t){var n=new Image,r=[];t=Object.assign({action:e,source:this.source,version:i.SAVIOR_VERSION},t),Object.keys(t).reduce(function(e,n){return r.push(n+"="+encodeURIComponent(t[n])),r},r),console.info("server log:",r.join("&")),n.src=this.SERVER_LOG_URL+"?"+r.join("&")}},{key:"source",get:function(){if(!chrome.extension.getBackgroundPage)return this.SOURCE_CONTENT_SCRIPT;switch(document.location.pathname){case"/popup.html":return this.SOURCE_POPUP_PAGE;case"/options.html":return this.SOURCE_OPTIONS_PAGE;case"/background.html":return this.SOURCE_BACKGROUND_PAGE;default:return}}}]),e}();t.a=new o},function(e,t,n){"use strict";var i=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var r=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._storage=chrome.storage.local,this._options={},this._default={detach_enabled:!0,on_page_buttons:!0,min_stream_size:30720,prefer_last_quality:!0,hide_play_now_tooltip:!1,hide_play_now_tooltip_bottom:!1};var t=this;chrome.storage.onChanged.addListener(function(e,n){if("local"===n)for(var i in e)t._options[i]=e[i].newValue})}return i(e,[{key:"load",value:function(){var e=this;return new Promise(function(t){e._storage.get(null,function(n){e._options=n,t(n)})})}},{key:"set",value:function(e,t){var n={};("string"==typeof e||"number"==typeof e&&void 0!==t)&&(n[e]=t,this._options[e]=t,this._storage.set(n))}},{key:"get",value:function(e){return e in this._options?this._options[e]:this._default[e]}}]),e}();t.a=new r},function(e,t,n){"use strict";var i=n(4),r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),e.QL_HIGHEST="Highest",e.QL_HIGH="High",e.QL_MEDIUM="Medium",e.QL_LOW="Low",e.QL_VIDEO_ULTRAHD="Ultra HD",e.QL_VIDEO_FULLHD="Full HD",e.QL_VIDEO_HD="HD",e.QL_VIDEO_STANDARD="Standard",e.QL_VIDEO_MEDIUM="Medium",e.QL_VIDEO_SMALL="Small",e.QL_VIDEO_MOBILE="Mobile",this.QUALITY_TYPES={},this.QUALITY_TYPES[e.QL_VIDEO_ULTRAHD]={quality:e.QL_HIGH,qualityIndex:8,size:3072,videoTitle:"Super HD"},this.QUALITY_TYPES[e.QL_VIDEO_ULTRAHD]={quality:e.QL_HIGH,qualityIndex:7,size:2160,videoTitle:"Ultra HD"},this.QUALITY_TYPES[e.QL_VIDEO_ULTRAHD]={quality:e.QL_HIGH,qualityIndex:6,size:1440,videoTitle:"Quad HD"},this.QUALITY_TYPES[e.QL_VIDEO_FULLHD]={quality:e.QL_HIGH,qualityIndex:5,size:1080,videoTitle:"Full HD",audioTitle:"High",vimeoQuality:"1080p",zingTag:["1080p","label1080"],dailymotionQuality:"hd1080",clipvnQuality:"5"},this.QUALITY_TYPES[e.QL_HIGH]=this.QUALITY_TYPES[e.QL_VIDEO_FULLHD],this.QUALITY_TYPES[e.QL_HIGHEST]=Object.assign({},this.QUALITY_TYPES[e.QL_VIDEO_FULLHD]),this.QUALITY_TYPES[e.QL_HIGHEST].qualityIndex+=.01,this.QUALITY_TYPES[e.QL_VIDEO_HD]={quality:e.QL_HIGH,qualityIndex:4,size:720,videoTitle:"HD",audioTitle:"High",zingTag:["720p","label720"],vimeoQuality:"720p",dailymotionQuality:["hd","hd720"],facebookQuality:["hd_src","hd_src_no_ratelimit"],JWQuality:"highquality",clipvnQuality:"4"},this.QUALITY_TYPES[e.QL_VIDEO_STANDARD]={quality:e.QL_MEDIUM,qualityIndex:3,size:480,videoTitle:"Standard",audioTitle:"Standard",zingTag:["480p"],dailymotionQuality:"hq",vimeoQuality:"480p",facebookQuality:["sd_src","sd_src_no_ratelimit"],JWQuality:"location",clipvnQuality:"3"},this.QUALITY_TYPES[e.QL_VIDEO_MEDIUM]={quality:e.QL_MEDIUM,qualityIndex:2,size:360,videoTitle:"Medium",audioTitle:"Medium",vimeoQuality:"360p",dailymotionQuality:"sd",zingTag:["source","360p"],JWQuality:"lowquality",clipvnQuality:"2"},this.QUALITY_TYPES[e.QL_VIDEO_SMALL]={quality:e.QL_LOW,qualityIndex:1,size:240,altSizes:[270],videoTitle:"Small",audioTitle:"Low",dailymotionQuality:"ld",vimeoQuality:"270p",zingTag:["f","f240"],clipvnQuality:"1"},this.QUALITY_TYPES[e.QL_LOW]=this.QUALITY_TYPES[e.QL_VIDEO_SMALL],this.QUALITY_TYPES[e.QL_VIDEO_MOBILE]={quality:e.QL_LOW,qualityIndex:0,size:144,altSizes:[180],videoTitle:"Mobile",audioTitle:"Low",vimeoQuality:"",clipvnQuality:"0"},this.PREFERRED_QUALITY_INDEX={},this.PREFERRED_QUALITY_INDEX[e.QL_HIGH]=this.QUALITY_TYPES[e.QL_VIDEO_ULTRAHD].qualityIndex,this.PREFERRED_QUALITY_INDEX[e.QL_MEDIUM]=this.QUALITY_TYPES[e.QL_VIDEO_STANDARD].qualityIndex,this.PREFERRED_QUALITY_INDEX[e.QL_LOW]=this.QUALITY_TYPES[e.QL_VIDEO_SMALL].qualityIndex,this.DEFAULT_QUALITY_LEVEL=e.QL_HIGH,this.QUALITY_LEVELS=[e.QL_HIGH,e.QL_MEDIUM,e.QL_LOW],this.VIDEO_QUALITY_LEVELS=[e.QL_VIDEO_ULTRAHD,e.QL_VIDEO_FULLHD,e.QL_VIDEO_HD,e.QL_VIDEO_STANDARD,e.QL_VIDEO_MEDIUM,e.QL_VIDEO_SMALL,e.QL_VIDEO_MOBILE],this.DEFAULT_QUALITY_TYPE=e.QL_VIDEO_STANDARD}return r(e,[{key:"getFacebookQuality",value:function(e){return this._getVideoQuality("facebookQuality",e).videoTitle}},{key:"getDailymotionQuality",value:function(e){return this._getVideoQuality("dailymotionQuality",e).videoTitle}},{key:"getZingVideoQuality",value:function(e){return this._getVideoQuality("zingTag",e).videoTitle}},{key:"getZingAudioQuality",value:function(e){return this._getVideoQuality("zingTag",e).audioTitle}},{key:"getVimeoQuality",value:function(e){return this._getVideoQuality("vimeoQuality",e).videoTitle}},{key:"getClipvnQuality",value:function(e){return this._getVideoQuality("clipvnQuality",e).videoTitle}},{key:"getJWQuality",value:function(e){return this._getVideoQuality("JWQuality",e).videoTitle}},{key:"getQualityBySize",value:function(e){return this._getVideoQuality("size",e).videoTitle}},{key:"getSizeByQuality",value:function(e){return(this.QUALITY_TYPES[e]||{}).size||0}},{key:"_getVideoQuality",value:function(e,t,n){for(var i in this.QUALITY_TYPES){var r=this.QUALITY_TYPES[i][e];if(Array.isArray(r)||(r=[r]),-1!==r.indexOf(t))return this.QUALITY_TYPES[i]}return n?null:this.QUALITY_TYPES[this.DEFAULT_QUALITY_TYPE]}},{key:"_getTypeByQualityType",value:function(e){for(var t in this.QUALITY_TYPES)if(e===t||e===this.QUALITY_TYPES[t].videoTitle||e===this.QUALITY_TYPES[t].audioTitle)return this.QUALITY_TYPES[t];return this.QUALITY_TYPES[this.DEFAULT_QUALITY_TYPE]}},{key:"_calculateWeight",value:function(e,t){var n=i.b[e.get("type")].extensions_weight,r=n.indexOf(e.get("ext")),o=this._getTypeByQualityType(e.get("quality")).qualityIndex;return r/n.length+Math.abs(t-o)/7}},{key:"getQualityLevelByType",value:function(e){return Object.keys(this.QUALITY_TYPES).indexOf(this._getTypeByQualityType(e).videoTitle)}},{key:"getVideoQualityIndex",value:function(e){return this.VIDEO_QUALITY_LEVELS.concat().reverse().indexOf(e)}},{key:"getOneClickQualityIndex",value:function(e){return this.QUALITY_LEVELS.concat().reverse().indexOf(e)}},{key:"getQualityLevelByQualityType",value:function(e){return this._getTypeByQualityType(e).quality}},{key:"getQualityIndexByVideoTitleQuality",value:function(e){return void 0!==this.QUALITY_TYPES[e]?this.QUALITY_TYPES[e].qualityIndex:this.getOneClickQualityIndex(e)}},{key:"getQualityNameByResolution",value:function(e){e=parseInt(e);var t=Object.values(this.QUALITY_TYPES),n=t.find(function(t){return t.size===e||t.altSizes&&t.altSizes.includes(e)});if(n)return n.videoTitle;var i=t.find(function(t){return t.size<e});return i?i.videoTitle:null}},{key:"chooseBestDownload",value:function(e,t,n){var i=e.length;if(n)for(var r=n.split("/").filter(function(e){return e}).length>2,o=0;o<i;++o){var a=e[o],s=a.extQuality();if(s===n)return a;if(r){var l=n.replace(/(.+)\/.+/,"$1");if(s.replace(/(.+)\/.+/,"$1")===l)return a}}t=t||this.DEFAULT_QUALITY_LEVEL;var c=e.filter(function(e){return"video"===e.type});c&&c.length||(c=e),i=c.length;for(var u=this.PREFERRED_QUALITY_INDEX[t],d=1e3,h=-1,f=0;f<i;++f){var p=c[f],v=this._calculateWeight(p,u);d>v&&(d=v,h=f)}return c[h]}}]),e}();t.a=new o},function(e,t,n){"use strict";n.d(t,"b",function(){return r}),n.d(t,"a",function(){return a}),n.d(t,"f",function(){return s}),n.d(t,"e",function(){return l}),n.d(t,"c",function(){return c}),n.d(t,"d",function(){return o});var i,r={audio:{title:"Audio",rgxp:/audio/i,extensions:["mp3","flac","m4a","wma","ogg","wav","aif","mid","opus"],extensions_weight:["mp3","flac","m4a","wma","ogg","wav","aif","mid","opus"],ctype2extension:{midi:"mid",mp4:"m4a",m4a:"m4a",mpeg:"mp3",mpeg3:"mp3",wav:"wav",aiff:"aif",opus:"opus"}},video:{title:"Video",rgxp:/video/i,extensions:["mp4","mpeg4","mpg","mpeg","m4v","avi","divx","mov","wmv","movie","asf","webm","flv","3gp","m3u8","m3u"],extensions_weight:["mp4","mpeg4","mpg","mpeg","m4v","avi","divx","mov","wmv","movie","asf","webm","flv","m3u8","m3u","3gp"],ctype2extension:{mpeg:"mp4",mp4:"mp4",m4v:"mp4","3gpp":"3gp",flv:"flv",quicktime:"mov",msvideo:"avi","ms-wmv":"wmv","ms-asf":"asf"}},subtitles:{title:"Subtitles",rgxp:/subtitles/i,extensions:["yt_srt"],extensions_weight:["yt_srt"]}},o=["video","audio","subtitles"],a=(i=new Map,Object.keys(r).forEach(function(e){for(var t=r[e].extensions,n=0;n<t.length;n++)i.set(t[n],e)}),i);function s(e){return-1!==["m3u8","m3u"].indexOf(e)}var l=[/^(.+\.)?youtube.com/i,/^(.+\.)?zing.vn/i,/^(.+\.)?nhaccuatui.com/i,/^(.+\.)?vimeo.com/i,/^(.+\.)?clip.vn/i,/vietgiaitri\.com/i,/^(.+\.)?soundcloud\.com/i,/^(.+\.)?kenh14\.vn/i,/^(.+\.)?xvideos\.com/i,/^(.+\.)?xnxx\.com/i,/^(.+\.)?vtv\.vn/i,/^(.+\.)?afamily\.vn/i,/^tuoitre\.vn/i,/^(.+\.)?gamek\.vn/i],c=[/^(.+\.)?nixcdn\.com/im,/^(.+\.)?vcmedia\.vn/i,/^(.+\.)?kenhhd\.tv/i]},function(e,t,n){"use strict";var i=["/pre-roll/","/preroll/","/ads/","||histats.com/","||adnetwork.vn/","||doubleclick.net/","||admicro/","||adnet.vn/","||ds-vn.serving-sys.com/","||lavanetwork.net/","||video.sgame.vn:8080/","blueseed.tv","||new-cdn.blueseed/","||vcmedia.vn/","||innity.net/","||serving-sys.com/","||ambientplatform.vn/","||gvt1.com/","||comment.dantri.com.vn/","||adsquangcao.com/","||facebook.com/connect","||facebook.com/plugins/likebox.php","||facebook.com/plugins/comments.php","||facebook.com/connect/xd_arbiter","||facebook.com/plugins/page.php","||facebook.com/v*/plugins/*","||googlesyndication.com","||qccoccocmedia.vn/","||coccoc.com/webhp##*","||meme.vn/##*","||ads.phimnhanh.net/","||adsquangcao.com/","||edgecastcdn.net/","||qccoccocmedia.vn/","||dev-qccoccocmedia.vn/","||media.adnetwork.vn/","@@||vhosting.vcmedia.vn/","@@||vcplayer.vcmedia.vn/","@@||vscc.hosting.vcmedia.vn/","@@||vscc.dantri.hosting.vcmedia.vn/","@@||vscc-kenh14-hosting.vcmedia.vn/","@@||hls.vcmedia.vn/","##.adsbygoogle iframe","###adcontainer *","##.ad-container *",'##.facebook-top *, .fb-like-box *, iframe[title^="fb:like_box"]','##iframe[title^="fb:page"]','##[id^="AbdVideoPreroll"]','##[data^="player-ads"]','##[id^="google_ads_iframe_"]',"###pyv-iframe","##.box-ads *","##.ads *","##.video-ads *",'##iframe[onload*="google_iframe_oncopy"]','||youtube.com##[id*="sidebar-ads"] *',"||bit.ly/",'##[name*="zeroclipboard"],[data*="zeroclipboard"]',"||xemphimso.com/##.right-menu *","###AbdPopupAd_left iframe",'||phim.hayhd.vn/###adsdiv iframe,div[class*="ads"] iframe',"||nhaccuatui.com/##.box_right *,#banner-container-bottom *","||adxpansion.com/","||porn99.net##.content-right *","||thuvienanh.org/","||xemvtv.net/###ads-slider *",'||yeucahat.com/##div[id^="adscont"] *',"||sexad.net/","||ads.sex.com/",'||redtube.com/##div[id^="as_"] *','##object[id^="abdPopup"]',"||adnetwork.vn/",'##object[data*=".adnetwork.vn/"]',"||phim3s.net/##.ad_location *","||xhamster.com/###plAds *,.adVideo *,#adBottom *","||exoclick.com/","||trafficstars.com/","||traffichaus.com/","||trafficjunky.net/","||vivo.vn##.content-right-sidebar *",'||dailymotion.com##div[id^="mc_"] *',"||pornhub.com/###pb_block *,.right-ads *",'||xemphimso.com/##[id^="ebAd"],#eyeDiv *','||vivo.vn/##div[class*="ads"] *',"||phim.hayhd.vn/###block-resize-sidebar *","||phim.hayhd.vn/##.container .col-sm-8+.col-sm-4 *","||pornhub.com,tube8.com,youporn.com,redtube.com###pb_template *","||nhac.vui.vn/##.colRight *","||tube8.com/##.blockHtml *","||vkool.net/##.float-ck *,.col-left *,#sidebar *, #boxes *","||comment.vietid.net/comments","||dantri.com.vn/comment","||dantri.com.vn/##.fr.w510 *",'||vnexpress.net/##[id*="_BANNER_"] *, .block_banner *','||24h.com.vn/##[id*="ADS_"] *',"||ngoisao.net/###right *","||nhaccuatui.com/##.coverImage *","||phimsexporn.com/##.balloons-ck *","/twitter\\.com\\/.*cards\\/.*cardname=poll/","##.twitter-tweet.twitter-tweet-rendered",'##[id^="preroll"] *','##[id^="preroll-player_swf_0"]','##[class^="preroll"] *',"||adpoints.media","||media.yomedia.vn","goldendatagroup.*","||stream.nixcdn.com","||video-juice.com","##.jw-flag-ads > .jw-media > .jw-video","||zing.vn###highlight video","*.danet.vn/html/embed","vividobj.*.cdnviet.com","vcdn.media.innity.net","ds-vn.serving-sys.com","###video-anchor_ad iframe","###pagelet_page_cover video","##.jw-flag-ads-googleima.jw-flag-ads *",/https?:\/\/www\.phimmoi\.net\/resource\/video\/blank\d+\.mp4/,"ads-pd.nbcuni.com"],r=["||mail.google.com/","||docs.google.com/","||dropbox.com/","||meme.vn/"],o=["||fptplay.net/##.hls-playback embed","||pubvn.tv/bar/threads/##iframe#player","||www.24h.com.vn/###player_video_kieu_moi iframe",'||facebook.com/##iframe[src^="https://attachment.fbsbx.com/external_iframe.php"]'],a=["||mail.google.com/","||docs.google.com/","||drive.google.com/","||dropbox.com/","||fptplay.net/livetv","||twitch.tv","||talktv.vn","@@||talktv.vn/video/","garena.live","www.dkn.tv","xemphimso.com"],s=["/.*dailymotion.*\\/frag\\(\\d+\\)\\//","||youtube.com/",/https?:\/\/.+\.googlevideo\.com\/videoplayback?.+&source=youtube.+/,"||vimeo.com/","||vimeocdn.com/","||clip.vn/","||subs.xemphimonlines.com/","||dailymotion.com/","||dmcdn.net/","||nhacrap.tv/","||nixcdn.com/","||zdn.vn/","/fptplay\\.net\\/.*?seg\\d*-frag\\d*/","/hlscache\\.fptplay\\.net(?:\\.vn)?\\//","/49ef4358-e34d-484f-a18e-495cd9fe3817","/75247339-7897-437d-9627-55b1a1528700","http://www.phimmoi.net/resource/video/blank.mp4","http://xemvtv.net/kaka/blank2.mp4",/https?:\/\/.+\.gvt1\.com\/videoplayback\/.+/,/https?:\/\/.+\.2mdn\.net\/videoplayback\/.+/,/.+RomanoHangoutNew15s7\.mp4$/,/blank_video/,/media\/beacon\.webm/],l=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var c=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.extra={},this._loadRules(i),this._loadRules(r,"pip"),this._loadRules(o,"pip-allowfullscreen-false"),this._loadRules(a,"download"),this._loadRules(s,"requests")}return l(e,[{key:"check",value:function(e,t){var n=t?this.extra[t]:this.rules;return this._testRules(e,n)}},{key:"_loadRules",value:function(e,t){var n=this._parseFilters(e);t?this.extra[t]=n:this.rules=n}},{key:"_testRules",value:function(e,t){if(!t)return!1;var n=void 0;if("string"==typeof e?n=e:(e.src||e.href)&&(n=e.src||e.href),n){for(var i=t.wlUrls.length,r=0;r<i;r++)if(t.wlUrls[r].test(n))return!1;i=t.blUrls.length;for(var o=0;o<i;o++)if(t.blUrls[o].test(n))return!0}if(!(e instanceof Node))return!1;for(var a=e.ownerDocument.location.href,s=0;s<t.wlCosmetics.length;s++){var l=t.wlCosmetics[s];if(("~"===l.domain[0]&&a.match(l.domain.substr(1))||a.match(l.domain))&&l.selectors.some(e.matches.bind(e)))return!1}for(var c=0;c<t.blCosmetics.length;c++){var u=t.blCosmetics[c];if(("~"===u.domain[0]&&a.match(u.domain.substr(1))||a.match(u.domain))&&u.selectors.some(e.matches.bind(e)))return!0}return!1}},{key:"_convertWildcard",value:function(e){if(/^\/.*?\/$/.test(e)&&/[[\\(){}]/.test(e))return new RegExp(e.replace(/^\/|\/$/g,""),"i");var t=e.replace(/[.?+\\[{()]/g,function(e){return"\\"+e}).replace(/\^/g,"[\\w\\d_.%-]").replace(/\*/g,".*").replace(/\|\|/g,"^\\w+://([\\d\\w-]+\\.)*").replace(/\|/g,"$");return new RegExp(t,"i")}},{key:"_getParsingRegex",value:function(){if(this.regex)return this.regex;return this.regex=new RegExp("^\\s*(@@)?(/(?:[^/]|\\\\/)+/|(?:[^#$]+|#(?!#))+)?(?:(#@#|##)([^$]+))?(?:\\$(.*))?\\s*$","i"),this.regex}},{key:"_parseFilters",value:function(e){var t=e;"string"==typeof t&&(t=t.split(/[\r\n]+/));for(var n={blUrls:[],wlUrls:[],blCosmetics:[],wlCosmetics:[]},i={"":{bl:[],wl:[]}},r=0;r<t.length;r++){var o=t[r];if(!/^\s*!|^\s*\[.*?\]\s*$/.test(o)){var a=this._getParsingRegex().exec(o);if(a){var s={whitelist:a[1],url:a[2],separator:a[3],selector:a[4],comment:a[5]};if(s.separator)for(var l=s.url?s.url.split(/,/):[""],c=void 0,u=0;u<l.length;u++)(c=l[u])in i||(i[c]={bl:[],wl:[]}),c=i[c],"#@#"===s.separator?(s.whiteList||i[""].wl.push(s.selector),c[s.whitelist?"bl":"wl"].push(s.selector)):c[s.whitelist?"wl":"bl"].push(s.selector);else{if(!s.url)continue;var d="@@"===s.whitelist?n.wlUrls:n.blUrls,h=this._convertWildcard(s.url);d.push(h)}}else console.warn("AdFilter: could not parse adblock rule: "+o)}}for(var f=Object.keys(i),p=0;p<f.length;p++){var v=f[p],m=i[v];m.bl.length&&n.blCosmetics.push({domain:this._convertWildcard(v),selectors:i[v].bl}),m.wl.length&&n.wlCosmetics.push({domain:this._convertWildcard(v),selectors:i[v].wl})}return n}}]),e}();t.a=new c},function(e,t,n){"use strict";function i(e,t){return Object.keys(t).forEach(function(n){e.setAttribute(n,t[n])}),e}function r(e,t){return Object.keys(t).forEach(function(n){e.style[n]=t[n]}),e}function o(e){return e.split(";").reduce(function(e,t){var n=t.indexOf(":");if(-1!==n){var i=t.substr(0,n).trim(),r=t.substr(n+1).trim();e[i]=r}return e},{})}t.a={attr:function(e,t){Array.isArray(e)?e.forEach(function(e){i(e,t)}):i(e,t)},style:function(e,t){Array.isArray(e)?e.forEach(function(e){r(e,t)}):r(e,t)},setStyleAttr:function(e,t){var n=function(e){var n=e.getAttribute("style")||"",i=o(n);for(var r in t)t.hasOwnProperty(r)&&(i[r]=t[r]);var a,s=(a=i,Object.keys(a).map(function(e){return e+": "+a[e]}).join("; ")+";");n!==s&&e.setAttribute("style",s)};Array.isArray(e)?e.forEach(n):n(e)},parseStyleAttr:o,parseHTML:function(e){var t=document.createElement("div"),n=document.createDocumentFragment();return t.innerHTML=e,[].slice.call(t.childNodes).forEach(n.appendChild,n),t=null,n},getOffset:function(e){for(var t={top:0,left:0,height:e.offsetHeight,width:e.offsetWidth};e;)t.left+=e.offsetLeft,t.top+=e.offsetTop,e=e.offsetParent;return t},getEmbedSize:function(e){if(!(e instanceof HTMLElement))return{width:0,height:0};e.matches("embed")&&e.parentNode.matches("object")&&(e=e.parentNode);var t=e.querySelector("embed");return t&&t.offsetWidth&&t.offsetHeight&&(e=t),{width:e.offsetWidth,height:e.offsetHeight}}}},function(e,t,n){var i,r,o,a;
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
/*!
 * mustache.js - Logic-less {{mustache}} templates with JavaScript
 * http://github.com/janl/mustache.js
 */
a=function(e){var t=Object.prototype.toString,n=Array.isArray||function(e){return"[object Array]"===t.call(e)};function i(e){return"function"==typeof e}function r(e){return e.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function o(e,t){return null!=e&&"object"==typeof e&&t in e}var a=RegExp.prototype.test;var s=/\S/;function l(e){return!function(e,t){return a.call(e,t)}(s,e)}var c={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;","`":"&#x60;","=":"&#x3D;"};var u=/\s*/,d=/\s+/,h=/\s*=/,f=/\s*\}/,p=/#|\^|\/|>|\{|&|=|!/;function v(e){this.string=e,this.tail=e,this.pos=0}function m(e,t){this.view=e,this.cache={".":this.view},this.parent=t}function g(){this.cache={}}v.prototype.eos=function(){return""===this.tail},v.prototype.scan=function(e){var t=this.tail.match(e);if(!t||0!==t.index)return"";var n=t[0];return this.tail=this.tail.substring(n.length),this.pos+=n.length,n},v.prototype.scanUntil=function(e){var t,n=this.tail.search(e);switch(n){case-1:t=this.tail,this.tail="";break;case 0:t="";break;default:t=this.tail.substring(0,n),this.tail=this.tail.substring(n)}return this.pos+=t.length,t},m.prototype.push=function(e){return new m(e,this)},m.prototype.lookup=function(e){var t,n=this.cache;if(n.hasOwnProperty(e))t=n[e];else{for(var r,a,s=this,l=!1;s;){if(e.indexOf(".")>0)for(t=s.view,r=e.split("."),a=0;null!=t&&a<r.length;)a===r.length-1&&(l=o(t,r[a])),t=t[r[a++]];else t=s.view[e],l=o(s.view,e);if(l)break;s=s.parent}n[e]=t}return i(t)&&(t=t.call(this.view)),t},g.prototype.clearCache=function(){this.cache={}},g.prototype.parse=function(t,i){var o=this.cache,a=o[t];return null==a&&(a=o[t]=function(t,i){if(!t)return[];var o,a,s,c=[],m=[],g=[],y=!1,_=!1;function b(){if(y&&!_)for(;g.length;)delete m[g.pop()];else g=[];y=!1,_=!1}function T(e){if("string"==typeof e&&(e=e.split(d,2)),!n(e)||2!==e.length)throw new Error("Invalid tags: "+e);o=new RegExp(r(e[0])+"\\s*"),a=new RegExp("\\s*"+r(e[1])),s=new RegExp("\\s*"+r("}"+e[1]))}T(i||e.tags);for(var E,w,L,S,O,A,k=new v(t);!k.eos();){if(E=k.pos,L=k.scanUntil(o))for(var I=0,x=L.length;I<x;++I)l(S=L.charAt(I))?g.push(m.length):_=!0,m.push(["text",S,E,E+1]),E+=1,"\n"===S&&b();if(!k.scan(o))break;if(y=!0,w=k.scan(p)||"name",k.scan(u),"="===w?(L=k.scanUntil(h),k.scan(h),k.scanUntil(a)):"{"===w?(L=k.scanUntil(s),k.scan(f),k.scanUntil(a),w="&"):L=k.scanUntil(a),!k.scan(a))throw new Error("Unclosed tag at "+k.pos);if(O=[w,L,E,k.pos],m.push(O),"#"===w||"^"===w)c.push(O);else if("/"===w){if(!(A=c.pop()))throw new Error('Unopened section "'+L+'" at '+E);if(A[1]!==L)throw new Error('Unclosed section "'+A[1]+'" at '+E)}else"name"===w||"{"===w||"&"===w?_=!0:"="===w&&T(L)}if(A=c.pop())throw new Error('Unclosed section "'+A[1]+'" at '+k.pos);return function(e){for(var t,n=[],i=n,r=[],o=0,a=e.length;o<a;++o)switch((t=e[o])[0]){case"#":case"^":i.push(t),r.push(t),i=t[4]=[];break;case"/":r.pop()[5]=t[2],i=r.length>0?r[r.length-1][4]:n;break;default:i.push(t)}return n}(function(e){for(var t,n,i=[],r=0,o=e.length;r<o;++r)(t=e[r])&&("text"===t[0]&&n&&"text"===n[0]?(n[1]+=t[1],n[3]=t[3]):(i.push(t),n=t));return i}(m))}(t,i)),a},g.prototype.render=function(e,t,n){var i=this.parse(e),r=t instanceof m?t:new m(t);return this.renderTokens(i,r,n,e)},g.prototype.renderTokens=function(e,t,n,i){for(var r,o,a,s="",l=0,c=e.length;l<c;++l)a=void 0,"#"===(o=(r=e[l])[0])?a=this.renderSection(r,t,n,i):"^"===o?a=this.renderInverted(r,t,n,i):">"===o?a=this.renderPartial(r,t,n,i):"&"===o?a=this.unescapedValue(r,t):"name"===o?a=this.escapedValue(r,t):"text"===o&&(a=this.rawValue(r)),void 0!==a&&(s+=a);return s},g.prototype.renderSection=function(e,t,r,o){var a=this,s="",l=t.lookup(e[1]);if(l){if(n(l))for(var c=0,u=l.length;c<u;++c)s+=this.renderTokens(e[4],t.push(l[c]),r,o);else if("object"==typeof l||"string"==typeof l||"number"==typeof l)s+=this.renderTokens(e[4],t.push(l),r,o);else if(i(l)){if("string"!=typeof o)throw new Error("Cannot use higher-order sections without the original template");null!=(l=l.call(t.view,o.slice(e[3],e[5]),function(e){return a.render(e,t,r)}))&&(s+=l)}else s+=this.renderTokens(e[4],t,r,o);return s}},g.prototype.renderInverted=function(e,t,i,r){var o=t.lookup(e[1]);if(!o||n(o)&&0===o.length)return this.renderTokens(e[4],t,i,r)},g.prototype.renderPartial=function(e,t,n){if(n){var r=i(n)?n(e[1]):n[e[1]];return null!=r?this.renderTokens(this.parse(r),t,n,r):void 0}},g.prototype.unescapedValue=function(e,t){var n=t.lookup(e[1]);if(null!=n)return n},g.prototype.escapedValue=function(t,n){var i=n.lookup(t[1]);if(null!=i)return e.escape(i)},g.prototype.rawValue=function(e){return e[1]},e.name="mustache.js",e.version="2.3.0",e.tags=["{{","}}"];var y=new g;return e.clearCache=function(){return y.clearCache()},e.parse=function(e,t){return y.parse(e,t)},e.render=function(e,t,i){if("string"!=typeof e)throw new TypeError('Invalid template! Template should be a "string" but "'+(n(r=e)?"array":typeof r)+'" was given as the first argument for mustache#render(template, view, partials)');var r;return y.render(e,t,i)},e.to_html=function(t,n,r,o){var a=e.render(t,n,r);if(!i(o))return a;o(a)},e.escape=function(e){return String(e).replace(/[&<>"'`=\/]/g,function(e){return c[e]})},e.Scanner=v,e.Context=m,e.Writer=g,e},"object"==typeof t&&t&&"string"!=typeof t.nodeName?a(t):(r=[t],void 0===(o="function"==typeof(i=a)?i.apply(t,r):i)||(e.exports=o))},function(e,t){var n;n=function(){return this}();try{n=n||Function("return this")()||(0,eval)("this")}catch(e){"object"==typeof window&&(n=window)}e.exports=n},function(e,t,n){"use strict";var i=n(0),r=n(4),o="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e},a=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var s=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),console.assert(t.id),this._date=Date.now(),this.values={},this._sizePromise=null,this._hls=!1,this.MAX_FILE_NAME_LENGTH=128,t.title||Object.defineProperty(this,"title",{get:function(){return"string"==typeof n._title?n._title:(n._title=n.getName().substr(0,n.MAX_FILE_NAME_LENGTH),n._title)},set:function(){n._title=n.getName().substr(0,n.MAX_FILE_NAME_LENGTH)}}),this.merge(t)}return a(e,[{key:"_createFieldGetter",value:function(e){var t=this;this[e]=function(){return t.get(e)}}},{key:"_generateFakeName",value:function(){return[this.type,i.Utils.makeId(this.values)].join("-").replace(/-+/g,"-")}},{key:"get",value:function(e){if("string"==typeof e||"number"==typeof e)return this.values[e]||this[e]}},{key:"set",value:function(e,t){return"string"!=typeof e&&"number"!=typeof e||this.values[e]===t||(this[e]=t),this}},{key:"merge",value:function(t){var n=t instanceof e?t.values:t;for(var i in n)this.set(i,void 0!==n[i]?n[i]:n[i]||null);return Object(r.f)(this.get("ext"))&&(this.set("ext","mp4"),this._hls=!0),this}},{key:"getName",value:function(){var e="string"==typeof this._title?this._title:"";return i.Utils.replaceEntities(e||this.filename||this._generateFakeName())}},{key:"getFilenameFromTitle",value:function(){var e=this.title,t="."+this.ext,n=0;return e.endsWith(t)&&(n=t.length+1),e=e.replace(/\s+/g," ").replace(/[/\\:*?"<>|\u200c\u200d]/g,"-").substr(0,this.MAX_FILE_NAME_LENGTH-n)+t}},{key:"extQuality",value:function(){return(this.get("ext")||"")+"/"+(this.get("quality")||"")+"/"+(this.get("resolution")||"")}},{key:"getSize",value:function(){var e=this;if(e._sizePromise)return e._sizePromise;if(this._hls)return Promise.resolve(null);var t=new Promise(function(t,n){var r=e.get("size");if((r=i.Utils.defined(r)?r:0)||null===r||e._hls)return t(r);var a=[];function s(e){e&&a.push(i.Utils.getSize(e))}var l=e.get("url");"object"===(void 0===l?"undefined":o(l))?[l.audioUrl,l.videoUrl].forEach(s):s(l);a=a.length>0?1===a.length?a[0]:Promise.all(a):Promise.reject();var c=e.get("altUrl");a.then(function(){for(var n=arguments.length,r=Array(n),o=0;o<n;o++)r[o]=arguments[o];for(var a=i.Utils.flatten(r),s=0,l=a.length-1;l>=0;l--)s+=a[l];e.set("size",s),t(s)}).catch(function(){if(c&&l!==c){var r=i.Utils.getSize(c);return r.then(function(n){e.set("size",n),t(n)}).catch(function(e){n(e)}),r}n(null)})});return e._sizePromise=t,t}}],[{key:"isValidData",value:function(e){if(i.BrFeatures.M3U8&&Object(r.f)(e.ext))return!0;var t=r.b[e.type],n=t&&t.extensions;return t&&-1!==n.indexOf(e.ext)}}]),e}();t.a=s},,,function(e,t){var n,i,r=e.exports={};function o(){throw new Error("setTimeout has not been defined")}function a(){throw new Error("clearTimeout has not been defined")}function s(e){if(n===setTimeout)return setTimeout(e,0);if((n===o||!n)&&setTimeout)return n=setTimeout,setTimeout(e,0);try{return n(e,0)}catch(t){try{return n.call(null,e,0)}catch(t){return n.call(this,e,0)}}}!function(){try{n="function"==typeof setTimeout?setTimeout:o}catch(e){n=o}try{i="function"==typeof clearTimeout?clearTimeout:a}catch(e){i=a}}();var l,c=[],u=!1,d=-1;function h(){u&&l&&(u=!1,l.length?c=l.concat(c):d=-1,c.length&&f())}function f(){if(!u){var e=s(h);u=!0;for(var t=c.length;t;){for(l=c,c=[];++d<t;)l&&l[d].run();d=-1,t=c.length}l=null,u=!1,function(e){if(i===clearTimeout)return clearTimeout(e);if((i===a||!i)&&clearTimeout)return i=clearTimeout,clearTimeout(e);try{i(e)}catch(t){try{return i.call(null,e)}catch(t){return i.call(this,e)}}}(e)}}function p(e,t){this.fun=e,this.array=t}function v(){}r.nextTick=function(e){var t=new Array(arguments.length-1);if(arguments.length>1)for(var n=1;n<arguments.length;n++)t[n-1]=arguments[n];c.push(new p(e,t)),1!==c.length||u||s(f)},p.prototype.run=function(){this.fun.apply(null,this.array)},r.title="browser",r.browser=!0,r.env={},r.argv=[],r.version="",r.versions={},r.on=v,r.addListener=v,r.once=v,r.off=v,r.removeListener=v,r.removeAllListeners=v,r.emit=v,r.prependListener=v,r.prependOnceListener=v,r.listeners=function(e){return[]},r.binding=function(e){throw new Error("process.binding is not supported")},r.cwd=function(){return"/"},r.chdir=function(e){throw new Error("process.chdir is not supported")},r.umask=function(){return 0}},,,,,function(e,t,n){"use strict";var i={kty:"RSA",n:"t5P2Nmmm7TCeGMx4YKXP-lhdeKpTDIGtqPcgI8CtkKPrsCz51RsD9nstDkSQJycx4Jwbepu2J14OqDYYAU_JcnJTxoDOD2ixk9HlqPkeYj2U7LKfANFnLwXZ_Ug1EjYH6iN6lM_NSbXwNkgWksZvBcADfpjsSAD01TV89Xw-3gU",e:"AQAB"},r=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var o=function(){function e(){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e)}return r(e,[{key:"verify",value:function(e){var t=this,n=e.split("."),r=n[0],o=n[1],a=n[2];return window.crypto.subtle.importKey("jwk",i,{name:"RSASSA-PKCS1-v1_5",hash:{name:"SHA-256"}},!1,["verify"]).then(function(e){return window.crypto.subtle.verify({name:"RSASSA-PKCS1-v1_5"},e,t._base64UrlToUint8Array(a),t._stringToArrayBuffer(r+"."+o))}).then(function(e){var n=t.parsePayload(o);return null===n?Promise.reject("Cannot parse JWT"):{data:n,valid:e}})}},{key:"shouldHideWidget",value:function(e,t){var n=this;return new Promise(function(i){return n.verify(e).then(function(e){e.valid&&e.data&&n.checkURLPattern(e.data.host,t)&&n.checkTime(e.data.exp,e.data.iat)?i(!0):i(!1)}).catch(function(e){console.error(e),i(!1)})})}},{key:"checkURLPattern",value:function(e,t){var n=t.replace("www.","");if(n===e)return!0;var i=new RegExp("^"+e.replace("*.","(?:\\w+\\.)*")+"$");return!!n.match(i)}},{key:"checkTime",value:function(e,t){var n=Date.now();return 1e3*e>n&&1e3*t<=n}},{key:"parsePayload",value:function(e){var t=void 0;try{t=JSON.parse(this._base64UrlToString(e))}catch(e){return null}return t}},{key:"_stringToBase64Url",value:function(e){return btoa(e).replace(/\+/g,"-").replace(/\//g,"_").replace(/=+$/,"")}},{key:"_base64UrlToString",value:function(e){return atob(this._base64UrlToBase64(e))}},{key:"_base64ToBase64Url",value:function(e){return e.replace(/\+/g,"-").replace(/\//g,"_").replace(/=/g,"")}},{key:"_base64UrlToBase64",value:function(e){return(e+"===".slice((e.length+3)%4)).replace(/-/g,"+").replace(/_/g,"/")}},{key:"_base64UrlToUint8Array",value:function(e){return this._base64ToUint8Array(this._base64UrlToBase64(e))}},{key:"_stringToArrayBuffer",value:function(e){for(var t=new ArrayBuffer(e.length),n=new Uint8Array(t),i=0,r=e.length;i<r;i++)n[i]=e.charCodeAt(i);return t}},{key:"_base64ToUint8Array",value:function(e){var t=atob(e).split("").map(function(e){return e.charCodeAt(0)});return new Uint8Array(t)}}]),e}();t.a=new o},function(e,t,n){"use strict";
/*!
 * perfect-scrollbar v1.3.0
 * (c) 2017 Hyunje Jun
 * @license MIT
 */function i(e){return getComputedStyle(e)}function r(e,t){for(var n in t){var i=t[n];"number"==typeof i&&(i+="px"),e.style[n]=i}return e}function o(e){var t=document.createElement("div");return t.className=e,t}var a="undefined"!=typeof Element&&(Element.prototype.matches||Element.prototype.webkitMatchesSelector||Element.prototype.msMatchesSelector);function s(e,t){if(!a)throw new Error("No element matching method supported");return a.call(e,t)}function l(e){e.remove?e.remove():e.parentNode&&e.parentNode.removeChild(e)}function c(e,t){return Array.prototype.filter.call(e.children,function(e){return s(e,t)})}var u={main:"ps",element:{thumb:function(e){return"ps__thumb-"+e},rail:function(e){return"ps__rail-"+e},consuming:"ps__child--consume"},state:{focus:"ps--focus",active:function(e){return"ps--active-"+e},scrolling:function(e){return"ps--scrolling-"+e}}},d={x:null,y:null};function h(e,t){var n=e.element.classList,i=u.state.scrolling(t);n.contains(i)?clearTimeout(d[t]):n.add(i)}function f(e,t){d[t]=setTimeout(function(){return e.isAlive&&e.element.classList.remove(u.state.scrolling(t))},e.settings.scrollingThreshold)}var p=function(e){this.element=e,this.handlers={}},v={isEmpty:{configurable:!0}};p.prototype.bind=function(e,t){void 0===this.handlers[e]&&(this.handlers[e]=[]),this.handlers[e].push(t),this.element.addEventListener(e,t,!1)},p.prototype.unbind=function(e,t){var n=this;this.handlers[e]=this.handlers[e].filter(function(i){return!(!t||i===t)||(n.element.removeEventListener(e,i,!1),!1)})},p.prototype.unbindAll=function(){for(var e in this.handlers)this.unbind(e)},v.isEmpty.get=function(){var e=this;return Object.keys(this.handlers).every(function(t){return 0===e.handlers[t].length})},Object.defineProperties(p.prototype,v);var m=function(){this.eventElements=[]};function g(e){if("function"==typeof window.CustomEvent)return new CustomEvent(e);var t=document.createEvent("CustomEvent");return t.initCustomEvent(e,!1,!1,void 0),t}m.prototype.eventElement=function(e){var t=this.eventElements.filter(function(t){return t.element===e})[0];return t||(t=new p(e),this.eventElements.push(t)),t},m.prototype.bind=function(e,t,n){this.eventElement(e).bind(t,n)},m.prototype.unbind=function(e,t,n){var i=this.eventElement(e);i.unbind(t,n),i.isEmpty&&this.eventElements.splice(this.eventElements.indexOf(i),1)},m.prototype.unbindAll=function(){this.eventElements.forEach(function(e){return e.unbindAll()}),this.eventElements=[]},m.prototype.once=function(e,t,n){var i=this.eventElement(e),r=function(e){i.unbind(t,r),n(e)};i.bind(t,r)};var y=function(e,t,n,i,r){var o;if(void 0===i&&(i=!0),void 0===r&&(r=!1),"top"===t)o=["contentHeight","containerHeight","scrollTop","y","up","down"];else{if("left"!==t)throw new Error("A proper axis should be provided");o=["contentWidth","containerWidth","scrollLeft","x","left","right"]}!function(e,t,n,i,r){var o=n[0],a=n[1],s=n[2],l=n[3],c=n[4],u=n[5];void 0===i&&(i=!0);void 0===r&&(r=!1);var d=e.element;e.reach[l]=null,d[s]<1&&(e.reach[l]="start");d[s]>e[o]-e[a]-1&&(e.reach[l]="end");t&&(d.dispatchEvent(g("ps-scroll-"+l)),t<0?d.dispatchEvent(g("ps-scroll-"+c)):t>0&&d.dispatchEvent(g("ps-scroll-"+u)),i&&function(e,t){h(e,t),f(e,t)}(e,l));e.reach[l]&&(t||r)&&d.dispatchEvent(g("ps-"+l+"-reach-"+e.reach[l]))}(e,n,o,i,r)};function _(e){return parseInt(e,10)||0}var b={isWebKit:"undefined"!=typeof document&&"WebkitAppearance"in document.documentElement.style,supportsTouch:"undefined"!=typeof window&&("ontouchstart"in window||window.DocumentTouch&&document instanceof window.DocumentTouch),supportsIePointer:"undefined"!=typeof navigator&&navigator.msMaxTouchPoints,isChrome:"undefined"!=typeof navigator&&/Chrome/i.test(navigator&&navigator.userAgent)},T=function(e){var t=e.element;e.containerWidth=t.clientWidth,e.containerHeight=t.clientHeight,e.contentWidth=t.scrollWidth,e.contentHeight=t.scrollHeight,t.contains(e.scrollbarXRail)||(c(t,u.element.rail("x")).forEach(function(e){return l(e)}),t.appendChild(e.scrollbarXRail)),t.contains(e.scrollbarYRail)||(c(t,u.element.rail("y")).forEach(function(e){return l(e)}),t.appendChild(e.scrollbarYRail)),!e.settings.suppressScrollX&&e.containerWidth+e.settings.scrollXMarginOffset<e.contentWidth?(e.scrollbarXActive=!0,e.railXWidth=e.containerWidth-e.railXMarginWidth,e.railXRatio=e.containerWidth/e.railXWidth,e.scrollbarXWidth=E(e,_(e.railXWidth*e.containerWidth/e.contentWidth)),e.scrollbarXLeft=_((e.negativeScrollAdjustment+t.scrollLeft)*(e.railXWidth-e.scrollbarXWidth)/(e.contentWidth-e.containerWidth))):e.scrollbarXActive=!1,!e.settings.suppressScrollY&&e.containerHeight+e.settings.scrollYMarginOffset<e.contentHeight?(e.scrollbarYActive=!0,e.railYHeight=e.containerHeight-e.railYMarginHeight,e.railYRatio=e.containerHeight/e.railYHeight,e.scrollbarYHeight=E(e,_(e.railYHeight*e.containerHeight/e.contentHeight)),e.scrollbarYTop=_(t.scrollTop*(e.railYHeight-e.scrollbarYHeight)/(e.contentHeight-e.containerHeight))):e.scrollbarYActive=!1,e.scrollbarXLeft>=e.railXWidth-e.scrollbarXWidth&&(e.scrollbarXLeft=e.railXWidth-e.scrollbarXWidth),e.scrollbarYTop>=e.railYHeight-e.scrollbarYHeight&&(e.scrollbarYTop=e.railYHeight-e.scrollbarYHeight),function(e,t){var n={width:t.railXWidth};t.isRtl?n.left=t.negativeScrollAdjustment+e.scrollLeft+t.containerWidth-t.contentWidth:n.left=e.scrollLeft;t.isScrollbarXUsingBottom?n.bottom=t.scrollbarXBottom-e.scrollTop:n.top=t.scrollbarXTop+e.scrollTop;r(t.scrollbarXRail,n);var i={top:e.scrollTop,height:t.railYHeight};t.isScrollbarYUsingRight?t.isRtl?i.right=t.contentWidth-(t.negativeScrollAdjustment+e.scrollLeft)-t.scrollbarYRight-t.scrollbarYOuterWidth:i.right=t.scrollbarYRight-e.scrollLeft:t.isRtl?i.left=t.negativeScrollAdjustment+e.scrollLeft+2*t.containerWidth-t.contentWidth-t.scrollbarYLeft-t.scrollbarYOuterWidth:i.left=t.scrollbarYLeft+e.scrollLeft;r(t.scrollbarYRail,i),r(t.scrollbarX,{left:t.scrollbarXLeft,width:t.scrollbarXWidth-t.railBorderXWidth}),r(t.scrollbarY,{top:t.scrollbarYTop,height:t.scrollbarYHeight-t.railBorderYWidth})}(t,e),e.scrollbarXActive?t.classList.add(u.state.active("x")):(t.classList.remove(u.state.active("x")),e.scrollbarXWidth=0,e.scrollbarXLeft=0,t.scrollLeft=0),e.scrollbarYActive?t.classList.add(u.state.active("y")):(t.classList.remove(u.state.active("y")),e.scrollbarYHeight=0,e.scrollbarYTop=0,t.scrollTop=0)};function E(e,t){return e.settings.minScrollbarLength&&(t=Math.max(t,e.settings.minScrollbarLength)),e.settings.maxScrollbarLength&&(t=Math.min(t,e.settings.maxScrollbarLength)),t}function w(e,t){var n=t[0],i=t[1],r=t[2],o=t[3],a=t[4],s=t[5],l=t[6],c=t[7],u=e.element,d=null,p=null,v=null;function m(t){u[l]=d+v*(t[r]-p),h(e,c),T(e),t.stopPropagation(),t.preventDefault()}function g(){f(e,c),e.event.unbind(e.ownerDocument,"mousemove",m)}e.event.bind(e[a],"mousedown",function(t){d=u[l],p=t[r],v=(e[i]-e[n])/(e[o]-e[s]),e.event.bind(e.ownerDocument,"mousemove",m),e.event.once(e.ownerDocument,"mouseup",g),t.stopPropagation(),t.preventDefault()})}var L={"click-rail":function(e){e.event.bind(e.scrollbarY,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarYRail,"mousedown",function(t){var n=t.pageY-window.pageYOffset-e.scrollbarYRail.getBoundingClientRect().top>e.scrollbarYTop?1:-1;e.element.scrollTop+=n*e.containerHeight,T(e),t.stopPropagation()}),e.event.bind(e.scrollbarX,"mousedown",function(e){return e.stopPropagation()}),e.event.bind(e.scrollbarXRail,"mousedown",function(t){var n=t.pageX-window.pageXOffset-e.scrollbarXRail.getBoundingClientRect().left>e.scrollbarXLeft?1:-1;e.element.scrollLeft+=n*e.containerWidth,T(e),t.stopPropagation()})},"drag-thumb":function(e){w(e,["containerWidth","contentWidth","pageX","railXWidth","scrollbarX","scrollbarXWidth","scrollLeft","x"]),w(e,["containerHeight","contentHeight","pageY","railYHeight","scrollbarY","scrollbarYHeight","scrollTop","y"])},keyboard:function(e){var t=e.element;e.event.bind(e.ownerDocument,"keydown",function(n){if(!(n.isDefaultPrevented&&n.isDefaultPrevented()||n.defaultPrevented)&&(s(t,":hover")||s(e.scrollbarX,":focus")||s(e.scrollbarY,":focus"))){var i,r=document.activeElement?document.activeElement:e.ownerDocument.activeElement;if(r){if("IFRAME"===r.tagName)r=r.contentDocument.activeElement;else for(;r.shadowRoot;)r=r.shadowRoot.activeElement;if(s(i=r,"input,[contenteditable]")||s(i,"select,[contenteditable]")||s(i,"textarea,[contenteditable]")||s(i,"button,[contenteditable]"))return}var o=0,a=0;switch(n.which){case 37:o=n.metaKey?-e.contentWidth:n.altKey?-e.containerWidth:-30;break;case 38:a=n.metaKey?e.contentHeight:n.altKey?e.containerHeight:30;break;case 39:o=n.metaKey?e.contentWidth:n.altKey?e.containerWidth:30;break;case 40:a=n.metaKey?-e.contentHeight:n.altKey?-e.containerHeight:-30;break;case 32:a=n.shiftKey?e.containerHeight:-e.containerHeight;break;case 33:a=e.containerHeight;break;case 34:a=-e.containerHeight;break;case 36:a=e.contentHeight;break;case 35:a=-e.contentHeight;break;default:return}e.settings.suppressScrollX&&0!==o||e.settings.suppressScrollY&&0!==a||(t.scrollTop-=a,t.scrollLeft+=o,T(e),function(n,i){var r=t.scrollTop;if(0===n){if(!e.scrollbarYActive)return!1;if(0===r&&i>0||r>=e.contentHeight-e.containerHeight&&i<0)return!e.settings.wheelPropagation}var o=t.scrollLeft;if(0===i){if(!e.scrollbarXActive)return!1;if(0===o&&n<0||o>=e.contentWidth-e.containerWidth&&n>0)return!e.settings.wheelPropagation}return!0}(o,a)&&n.preventDefault())}})},wheel:function(e){var t=e.element;function n(n){var r=function(e){var t=e.deltaX,n=-1*e.deltaY;return void 0!==t&&void 0!==n||(t=-1*e.wheelDeltaX/6,n=e.wheelDeltaY/6),e.deltaMode&&1===e.deltaMode&&(t*=10,n*=10),t!=t&&n!=n&&(t=0,n=e.wheelDelta),e.shiftKey?[-n,-t]:[t,n]}(n),o=r[0],a=r[1];if(!function(e,n,r){if(!b.isWebKit&&t.querySelector("select:focus"))return!0;if(!t.contains(e))return!1;for(var o=e;o&&o!==t;){if(o.classList.contains(u.element.consuming))return!0;var a=i(o);if([a.overflow,a.overflowX,a.overflowY].join("").match(/(scroll|auto)/)){var s=o.scrollHeight-o.clientHeight;if(s>0&&!(0===o.scrollTop&&r>0||o.scrollTop===s&&r<0))return!0;var l=o.scrollLeft-o.clientWidth;if(l>0&&!(0===o.scrollLeft&&n<0||o.scrollLeft===l&&n>0))return!0}o=o.parentNode}return!1}(n.target,o,a)){var s=!1;e.settings.useBothWheelAxes?e.scrollbarYActive&&!e.scrollbarXActive?(a?t.scrollTop-=a*e.settings.wheelSpeed:t.scrollTop+=o*e.settings.wheelSpeed,s=!0):e.scrollbarXActive&&!e.scrollbarYActive&&(o?t.scrollLeft+=o*e.settings.wheelSpeed:t.scrollLeft-=a*e.settings.wheelSpeed,s=!0):(t.scrollTop-=a*e.settings.wheelSpeed,t.scrollLeft+=o*e.settings.wheelSpeed),T(e),(s=s||function(n,i){var r=0===t.scrollTop,o=t.scrollTop+t.offsetHeight===t.scrollHeight,a=0===t.scrollLeft,s=t.scrollLeft+t.offsetWidth===t.offsetWidth;return!(Math.abs(i)>Math.abs(n)?r||o:a||s)||!e.settings.wheelPropagation}(o,a))&&!n.ctrlKey&&(n.stopPropagation(),n.preventDefault())}}void 0!==window.onwheel?e.event.bind(t,"wheel",n):void 0!==window.onmousewheel&&e.event.bind(t,"mousewheel",n)},touch:function(e){if(b.supportsTouch||b.supportsIePointer){var t=e.element,n={},r=0,o={},a=null;b.supportsTouch?(e.event.bind(t,"touchstart",d),e.event.bind(t,"touchmove",h),e.event.bind(t,"touchend",f)):b.supportsIePointer&&(window.PointerEvent?(e.event.bind(t,"pointerdown",d),e.event.bind(t,"pointermove",h),e.event.bind(t,"pointerup",f)):window.MSPointerEvent&&(e.event.bind(t,"MSPointerDown",d),e.event.bind(t,"MSPointerMove",h),e.event.bind(t,"MSPointerUp",f)))}function s(n,i){t.scrollTop-=i,t.scrollLeft-=n,T(e)}function l(e){return e.targetTouches?e.targetTouches[0]:e}function c(e){return!(e.pointerType&&"pen"===e.pointerType&&0===e.buttons||(!e.targetTouches||1!==e.targetTouches.length)&&(!e.pointerType||"mouse"===e.pointerType||e.pointerType===e.MSPOINTER_TYPE_MOUSE))}function d(e){if(c(e)){var t=l(e);n.pageX=t.pageX,n.pageY=t.pageY,r=(new Date).getTime(),null!==a&&clearInterval(a)}}function h(a){if(c(a)){var d=l(a),h={pageX:d.pageX,pageY:d.pageY},f=h.pageX-n.pageX,p=h.pageY-n.pageY;if(function(e,n,r){if(!t.contains(e))return!1;for(var o=e;o&&o!==t;){if(o.classList.contains(u.element.consuming))return!0;var a=i(o);if([a.overflow,a.overflowX,a.overflowY].join("").match(/(scroll|auto)/)){var s=o.scrollHeight-o.clientHeight;if(s>0&&!(0===o.scrollTop&&r>0||o.scrollTop===s&&r<0))return!0;var l=o.scrollLeft-o.clientWidth;if(l>0&&!(0===o.scrollLeft&&n<0||o.scrollLeft===l&&n>0))return!0}o=o.parentNode}return!1}(a.target,f,p))return;s(f,p),n=h;var v=(new Date).getTime(),m=v-r;m>0&&(o.x=f/m,o.y=p/m,r=v),function(n,i){var r=t.scrollTop,o=t.scrollLeft,a=Math.abs(n),s=Math.abs(i);if(s>a){if(i<0&&r===e.contentHeight-e.containerHeight||i>0&&0===r)return 0===window.scrollY&&i>0&&b.isChrome}else if(a>s&&(n<0&&o===e.contentWidth-e.containerWidth||n>0&&0===o))return!0;return!0}(f,p)&&a.preventDefault()}}function f(){e.settings.swipeEasing&&(clearInterval(a),a=setInterval(function(){e.isInitialized?clearInterval(a):o.x||o.y?Math.abs(o.x)<.01&&Math.abs(o.y)<.01?clearInterval(a):(s(30*o.x,30*o.y),o.x*=.8,o.y*=.8):clearInterval(a)},10))}}},S=function(e,t){var n=this;if(void 0===t&&(t={}),"string"==typeof e&&(e=document.querySelector(e)),!e||!e.nodeName)throw new Error("no element is specified to initialize PerfectScrollbar");for(var a in this.element=e,e.classList.add(u.main),this.settings={handlers:["click-rail","drag-thumb","keyboard","wheel","touch"],maxScrollbarLength:null,minScrollbarLength:null,scrollingThreshold:1e3,scrollXMarginOffset:0,scrollYMarginOffset:0,suppressScrollX:!1,suppressScrollY:!1,swipeEasing:!0,useBothWheelAxes:!1,wheelPropagation:!1,wheelSpeed:1},t)n.settings[a]=t[a];this.containerWidth=null,this.containerHeight=null,this.contentWidth=null,this.contentHeight=null;var s,l,c=function(){return e.classList.add(u.state.focus)},d=function(){return e.classList.remove(u.state.focus)};this.isRtl="rtl"===i(e).direction,this.isNegativeScroll=(l=e.scrollLeft,e.scrollLeft=-1,s=e.scrollLeft<0,e.scrollLeft=l,s),this.negativeScrollAdjustment=this.isNegativeScroll?e.scrollWidth-e.clientWidth:0,this.event=new m,this.ownerDocument=e.ownerDocument||document,this.scrollbarXRail=o(u.element.rail("x")),e.appendChild(this.scrollbarXRail),this.scrollbarX=o(u.element.thumb("x")),this.scrollbarXRail.appendChild(this.scrollbarX),this.scrollbarX.setAttribute("tabindex",0),this.event.bind(this.scrollbarX,"focus",c),this.event.bind(this.scrollbarX,"blur",d),this.scrollbarXActive=null,this.scrollbarXWidth=null,this.scrollbarXLeft=null;var h=i(this.scrollbarXRail);this.scrollbarXBottom=parseInt(h.bottom,10),isNaN(this.scrollbarXBottom)?(this.isScrollbarXUsingBottom=!1,this.scrollbarXTop=_(h.top)):this.isScrollbarXUsingBottom=!0,this.railBorderXWidth=_(h.borderLeftWidth)+_(h.borderRightWidth),r(this.scrollbarXRail,{display:"block"}),this.railXMarginWidth=_(h.marginLeft)+_(h.marginRight),r(this.scrollbarXRail,{display:""}),this.railXWidth=null,this.railXRatio=null,this.scrollbarYRail=o(u.element.rail("y")),e.appendChild(this.scrollbarYRail),this.scrollbarY=o(u.element.thumb("y")),this.scrollbarYRail.appendChild(this.scrollbarY),this.scrollbarY.setAttribute("tabindex",0),this.event.bind(this.scrollbarY,"focus",c),this.event.bind(this.scrollbarY,"blur",d),this.scrollbarYActive=null,this.scrollbarYHeight=null,this.scrollbarYTop=null;var f=i(this.scrollbarYRail);this.scrollbarYRight=parseInt(f.right,10),isNaN(this.scrollbarYRight)?(this.isScrollbarYUsingRight=!1,this.scrollbarYLeft=_(f.left)):this.isScrollbarYUsingRight=!0,this.scrollbarYOuterWidth=this.isRtl?function(e){var t=i(e);return _(t.width)+_(t.paddingLeft)+_(t.paddingRight)+_(t.borderLeftWidth)+_(t.borderRightWidth)}(this.scrollbarY):null,this.railBorderYWidth=_(f.borderTopWidth)+_(f.borderBottomWidth),r(this.scrollbarYRail,{display:"block"}),this.railYMarginHeight=_(f.marginTop)+_(f.marginBottom),r(this.scrollbarYRail,{display:""}),this.railYHeight=null,this.railYRatio=null,this.reach={x:e.scrollLeft<=0?"start":e.scrollLeft>=this.contentWidth-this.containerWidth?"end":null,y:e.scrollTop<=0?"start":e.scrollTop>=this.contentHeight-this.containerHeight?"end":null},this.isAlive=!0,this.settings.handlers.forEach(function(e){return L[e](n)}),this.lastScrollTop=e.scrollTop,this.lastScrollLeft=e.scrollLeft,this.event.bind(this.element,"scroll",function(e){return n.onScroll(e)}),T(this)};S.prototype.update=function(){this.isAlive&&(this.negativeScrollAdjustment=this.isNegativeScroll?this.element.scrollWidth-this.element.clientWidth:0,r(this.scrollbarXRail,{display:"block"}),r(this.scrollbarYRail,{display:"block"}),this.railXMarginWidth=_(i(this.scrollbarXRail).marginLeft)+_(i(this.scrollbarXRail).marginRight),this.railYMarginHeight=_(i(this.scrollbarYRail).marginTop)+_(i(this.scrollbarYRail).marginBottom),r(this.scrollbarXRail,{display:"none"}),r(this.scrollbarYRail,{display:"none"}),T(this),y(this,"top",0,!1,!0),y(this,"left",0,!1,!0),r(this.scrollbarXRail,{display:""}),r(this.scrollbarYRail,{display:""}))},S.prototype.onScroll=function(e){this.isAlive&&(T(this),y(this,"top",this.element.scrollTop-this.lastScrollTop),y(this,"left",this.element.scrollLeft-this.lastScrollLeft),this.lastScrollTop=this.element.scrollTop,this.lastScrollLeft=this.element.scrollLeft)},S.prototype.destroy=function(){this.isAlive&&(this.event.unbindAll(),l(this.scrollbarX),l(this.scrollbarY),l(this.scrollbarXRail),l(this.scrollbarYRail),this.removePsClasses(),this.element=null,this.scrollbarX=null,this.scrollbarY=null,this.scrollbarXRail=null,this.scrollbarYRail=null,this.isAlive=!1)},S.prototype.removePsClasses=function(){this.element.className=this.element.className.split(" ").filter(function(e){return!e.match(/^ps([-_].+|)$/)}).join(" ")},t.a=S},function(e,t,n){"use strict";var i=n(0),r=n(1),o=n(2),a=n(3),s=n(7),l=n.n(s),c=n(53),u=n.n(c),d=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var h=!i.Utils.IS_CONTENT_SCRIPT,f=3,p=function(){function e(t){var n=this;!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._widget=t,this._sizeQueue=u()(function(e,t){n._checkFileSize(e,t)},f),this._downloads=null,location.protocol.includes("chrome")&&location.pathname.includes("popup.html")&&this.initPlayNowListener(),o.a.load()}return d(e,[{key:"setDownloads",value:function(e){this._downloads=e}},{key:"render",value:function(e,t,n){t.downloads=this._downloads.group(),h&&(t.is_only=this._downloads.isOneMedia());var r=i.Utils.query("#downloads",this._widget);r.innerHTML=h?l.a.render(e,t,{media_template:o.a.get("template-media-popup")}):l.a.render(e,t,{media_template:o.a.get("template-media")}),r.classList.add("content");var a=this.applyCurrentValues(n);if(h){var s=i.Utils.query(".downloads-list",this._widget);s.scrollHeight>s.offsetHeight&&s.addEventListener("scroll",this._getSizeOfVisibleMedia.bind(this),!1),this._widget.classList.add("done")}return a}},{key:"initPlayNowListener",value:function(){var e=this;chrome.runtime.onMessage.addListener(function(t){if("downloads"===t.requestType&&"widget_progress"===t.method){var n=t.params;if(n.mime&&n.mime.includes("video")&&!n.filename.match(/\.mp3$/)){var r,o=n.url,a=e._widget.querySelector('a[data-url="'+o+'"]');if(!a)return;r=i.Utils.nearestParent(a,".j-media-scope"),n.exists&&(n.playable||"complete"===n.state)?e._handleProgress(r,n):"interrupted"!==n.state&&n.exists||e._changeWidgetMode(r,"select_media")}}})}},{key:"_handleProgress",value:function(e,t){var n=0,o=e.querySelector(".play-now-btn"),a=parseInt(o.dataset.downloadId);if(a&&a===t.id||(o.dataset.downloadId=t.id),e.matches(".progress-mode")||(this._changeWidgetMode(e,"progress"),r.a.log("PlayNow",r.a.PLAY_NOW_SHOWN)),"complete"!==t.state){var s=(t.bytesReceived/t.totalBytes*100).toFixed(0);s<0&&(s=0),n=s+"%"}else n="100%";var l=e.querySelector(".progress-bar .bar");l&&(l.style.width=n);var c=i.Utils.beautifyFileSize(t.totalBytes,!0),u=i.Utils.beautifyFileSize(t.bytesReceived,!0),d=e.querySelector(".progress-box .progress-text");d&&(d.innerText="100%"!==n?u+" "+Object(i.i18n)("play_now_received_from")+" "+c:c);var h=e.dataset.prevReceived||0,f=t.bytesReceived-h;f<0&&(f=Math.abs(f)),f<0&&(f=0);var p=i.Utils.beautifyFileSize(f,!0),v=e.querySelector(".progress-box .speed-text");v&&(v.innerHTML="100%"!==n?'<span class="green-arrow-icon"></span> '+p+"/"+Object(i.i18n)("play_now_per_second"):""),e.dataset.prevReceived=t.bytesReceived}},{key:"_changeWidgetMode",value:function(e,t){e.classList.remove("progress-mode","select-mode"),e.classList.add(t+"-mode")}},{key:"_checkFileSize",value:function(e,t){var n=this,o=this._downloads.getMedia(e);if(o&&!o.size){r.a.log("Download",r.a.DOWNLOAD_REQUEST_SIZE);var a=i.Utils.query("#size_"+o.id,this._widget);a.classList.add("size-loading"),o.getSize().then(function(e){if("function"==typeof t&&t(),a&&(a.classList.add("done"),a.classList.remove("size-loading"),null!==e)){var o=i.Utils.beautifyFileSize(e);a.textContent="("+o+")",n._setSizeText(a,o),0===e&&r.a.log("Download",r.a.DOWNLOAD_REQUEST_SIZE_FAILED)}}).catch(function(){"function"==typeof t&&t(),a.classList.add("done"),a.textContent="(Error)",i.Utils.query("#media_"+o.id,n._widget).setAttribute("disabled","disabled"),n._setSizeText(a,"(Error)")})}else"function"==typeof t&&t()}},{key:"_setSizeText",value:function(e,t){var n=i.Utils.findParent(e,"select-wrapper");if(n){var r=n.querySelector(".j-quality.selected .j-checked-size");r&&(r.innerText=t)}}},{key:"_applyCurrentValues",value:function(e){var t=this,n=((arguments.length>1&&void 0!==arguments[1]?arguments[1]:null)||e.querySelector(".j-quality-selector")).getAttribute("data-selected-value");i.Utils.queryAll(".j-quality-option, .j-quality-download",e).forEach(function(e){e.hidden=e.dataset.quality!==n,h||e.hidden||!e.classList.contains("j-quality-download")||t._sizeQueue.push(e.dataset.id)},this),h&&this._getSizeOfVisibleMedia()}},{key:"applyCurrentValues",value:function(e){var t=this._downloads,n=o.a.get("prefer_last_quality")&&o.a.get("preferred_quality:"+e),r=i.Utils.queryAll(".j-media-scope",this._widget);return r.forEach(function(r){var o=i.Utils.queryAll(".j-quality-download",r).map(function(e){return e.dataset.id}),s=a.a.chooseBestDownload(t.getMediaGroup(o),e,n),l=i.Utils.query(".j-quality-selector",r);if(l){var c=s.extQuality();l.setAttribute("data-selected-value",c);var u=l.querySelector('[data-quality-value="'+c+'"]');u&&u.classList.add("selected")}this._applyCurrentValues(r,l)},this),r}},{key:"_getSizeOfVisibleMedia",value:function(){for(var e=i.Utils.query(".downloads-list",this._widget),t=e.scrollTop,n=e.offsetHeight,r=i.Utils.queryAll(".j-quality-download:not([hidden])",e),o=0,a=r.length;o<a;++o){var s=r[o];if(s.offsetTop>t+n+10)break;this._sizeQueue.push(s.dataset.id)}}},{key:"getMetricsParams",value:function(e,t){var n=e instanceof Node?e.dataset.id:e,i=this._downloads,r=i.getMedia(n),o=t||{},s=i.getAllMediaFormats(n),l=[];for(var c in s)l.push(c+":"+s[c].join("|"));var u=r.ext?r.ext:"unknown";return o.size=r.quality?a.a.getSizeByQuality(r.quality):0,o.ext=u,o.same_size_exts=i.getSameQualityMediaFormats(n).join("|"),o.same_ext_sizes=i.getSameFormatMediaQuality(n).join("|"),o.total=l.join(","),o}},{key:"download",value:function(e){var t=this;if(!e.classList.contains("j-disabled"))return e.classList.add("j-disabled"),e.classList.add("btn-progress"),new Promise(function(n){t._downloads.download(e.dataset.id).then(function(){e.classList.remove("btn-progress"),e.classList.add("btn-started"),n(!0)}).catch(function(t){e.classList.remove("btn-progress"),e.classList.remove("j-disabled"),console.warn("failed to download :(",e.dataset.id,t),n(!1)})})}}]),e}();t.a=p},function(e,t,n){"use strict";var i=n(1),r=n(3),o=n(0),a=n(4),s=n(2),l=n(9),c=function(){function e(e,t){for(var n=0;n<t.length;n++){var i=t[n];i.enumerable=i.enumerable||!1,i.configurable=!0,"value"in i&&(i.writable=!0),Object.defineProperty(e,i.key,i)}}return function(t,n,i){return n&&e(t.prototype,n),i&&e(t,i),t}}();var u=function(){function e(t,n,i){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this.api=window.downloads,this._uninitialized=!0,o.Utils.defined(n)||(n=-1),this._tid=n,this.data=[],this.setMediaData(t,i)}return c(e,[{key:"setMediaData",value:function(e,t){var n=this;return new Promise(function(i){if(!e)return i({model:n,updated:!1}),t&&t(),this;Promise.all([e]).then(function(e){var r=e[0];if(n._uninitialized&&0===r.length)return n._uninitialized=!1,i({model:n,updated:!0}),void(t&&t());n._uninitialized=!1;var a=n.data,s=new Array(a.length),c=a.map(function(e){return e.id});r.forEach(function(e){e.id=e.id||o.Utils.makeId(e);var t=c.indexOf(e.id),i=void 0;-1===t?(c.push(e.id),i=new l.a(e),a.push(i)):(t<s.length&&(s[t]=!0),(i=a[t]).merge(e)),i._ditem=n.api.item(n._tid,e.id)});for(var u=s.length!==a.length,d=s.length-1;d>=0;d--)s[d]||(u=!0,a.splice(d,1));i({model:n,updated:u}),t&&t()})})}},{key:"getMediaCountByTitle",value:function(){var e=this.data;if(0===e.length)return 0;var t=new Set;return e.forEach(function(e){t.has(e.title)||t.add(e.title)}),t.size}},{key:"getMedia",value:function(e){return this.data.filter(function(t){return t.id===e})[0]}},{key:"getMediaGroup",value:function(e){return this.data.filter(function(t){return-1!==e.indexOf(t.id)})}},{key:"download",value:function(e){var t=this.getMedia(e);if(t){var n={id:t.id,url:t.url,filename:t.getFilenameFromTitle(),referrer:t.referrer,hls:t._hls};return void 0!==t.soundOnly&&(n.soundOnly=t.soundOnly,n.resolution=t.resolution||128),void 0!==t.quality&&(n.quality=t.quality),void 0!==n.soundOnly&&n.soundOnly&&i.a.log("Download",i.a.DOWNLOAD_SOUND_ONLY),n.filename&&n.filename.match(/\.yt_srt$/i)&&i.a.log("Download",i.a.DOWNLOAD_SUBTITLES),this.api.download(this._tid,n).then(function(e){return t._ditem=e,Promise.resolve(e)}).catch(function(e){return Promise.reject(e)})}}},{key:"onChange",value:function(e){this.api.onChange(this._tid,e)}},{key:"group",value:function(){var e=this.sortMedia(this.data),t=this.splitMediaByTitle(e);return(t=t.map(this.excludeQualityDuplicates.bind(this))).map(this.splitMediaByType.bind(this))}},{key:"splitMediaByTitle",value:function(e){var t=[];return e.forEach(function(e){var n=e.title,i=t.find(function(e){return e.title===n});i?i.media.push(e):t.push({media:[e],title:n})}),t}},{key:"excludeQualityDuplicates",value:function(e){var t=new Set,n=Object.assign({},e),i=[].concat(function(e){if(Array.isArray(e)){for(var t=0,n=Array(e.length);t<e.length;t++)n[t]=e[t];return n}return Array.from(e)}(a.b.video.extensions));return s.a.get("show_3gp_ext")&&(i=i.sort(function(e,t){return"3gp"===e?-1:"3gp"===t?1:0})),n.media=e.media.filter(function(n){var r=void 0;r=void 0!==n.resolution?n.quality+"_"+n.resolution+"_"+n.ext:n.quality+"_"+n.ext;var o=e.media.some(function(e){if(e.quality!==n.quality)return!1;if(e===n)return!1;if(e.type!==n.type)return!1;var t=i.indexOf(e.ext)<i.indexOf(n.ext),r=!n.resolution&&!!e.resolution||e.resolution>n.resolution,o=n.resolution===e.resolution&&n.resolution&&e.resolution;return t&&o||r});return!t.has(r)&&!o&&(t.add(r),!0)}),n}},{key:"splitMediaByType",value:function(e){var t=[];return e.media.forEach(function(e){var n=e.type,i=t.find(function(e){return e.type===n});i?i.media.push(e):t.push({media:[e],i18n_type:Object(o.i18n)("media_fields_type_"+n),type:n})}),t=t.sort(function(e,t){return a.d.indexOf(e.type)<a.d.indexOf(t.type)?-1:1}),e.media=t,e}},{key:"sortMedia",value:function(e){var t=Array.isArray(e.media)?e.media:e;return t.forEach(function(t){var n=e.type||t.type;t.quality=t.quality||r.a.DEFAULT_QUALITY_TYPE;var i=a.b[n].extensions,o=i.length-1,s=i.indexOf(t.ext),l=o-(s=void 0!==s?s:o);t.sortValues=t.sortValues||{},t.sortValues.qualityValue||(t.sortValues.qualityValue=100*(r.a.getQualityIndexByVideoTitleQuality(t.quality)||1)),t.sortValues.extensionValue=l,t.sortValues.totalValue=t.sortValues.qualityValue+t.sortValues.extensionValue}),t=t.sort(function(e,t){return e.sortValues.totalValue>t.sortValues.totalValue?-1:1})}},{key:"filterByCommonFields",value:function(e,t,n){var i=this.getMedia(e);return n=n||[],this.data.filter(function(r){return e!==r.id&&t.reduce(function(e,t){return e&&i[t]&&r[t]&&i[t]===r[t]},!0)&&n.reduce(function(e,t){return e&&i[t]&&r[t]&&i[t]!==r[t]},!0)})}},{key:"getSameQualityMediaFormats",value:function(e){var t=this.filterByCommonFields(e,["title","type","quality"],["ext"]).map(function(e){return e.ext&&e.ext});return Array.from(new Set(t))}},{key:"getSameFormatMediaQuality",value:function(e){var t=this.filterByCommonFields(e,["title","type","ext"],["quality"]).map(function(e){return e.quality?r.a.getSizeByQuality(e.quality):0});return Array.from(new Set(t))}},{key:"getAllMediaFormats",value:function(e){return this.filterByCommonFields(e,["title","type"]).reduce(function(e,t){var n=t.ext&&t.ext,i=t.quality?r.a.getSizeByQuality(t.quality):0;return n?(e[n]||(e[n]=[]),-1===e[n].indexOf(i)&&e[n].push(i),e):e},{})}},{key:"isOneMedia",value:function(){for(var e=this.data,t={},n=void 0,i=0,r=0;i<e.length&&r<=1;++i)if(!t[n=e[i].title]&&(t[n]=!0,++r>1))return!1;return!0}}]),e}();t.a=u},,,,,,,,,,,,,,,,,,function(e,t){e.exports=function(e){return e.webpackPolyfill||(e.deprecate=function(){},e.paths=[],e.children||(e.children=[]),Object.defineProperty(e,"loaded",{enumerable:!0,get:function(){return e.l}}),Object.defineProperty(e,"id",{enumerable:!0,get:function(){return e.i}}),e.webpackPolyfill=1),e}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.isAsync=void 0;var i,r=n(85),o=(i=r)&&i.__esModule?i:{default:i};var a="function"==typeof Symbol;function s(e){return a&&"AsyncFunction"===e[Symbol.toStringTag]}t.default=function(e){return s(e)?(0,o.default)(e):e},t.isAsync=s},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){t|=0;for(var n=Math.max(e.length-t,0),i=Array(n),r=0;r<n;r++)i[r]=e[t+r];return i},e.exports=t.default},function(e,t,n){(function(e){var i=void 0!==e&&e||"undefined"!=typeof self&&self||window,r=Function.prototype.apply;function o(e,t){this._id=e,this._clearFn=t}t.setTimeout=function(){return new o(r.call(setTimeout,i,arguments),clearTimeout)},t.setInterval=function(){return new o(r.call(setInterval,i,arguments),clearInterval)},t.clearTimeout=t.clearInterval=function(e){e&&e.close()},o.prototype.unref=o.prototype.ref=function(){},o.prototype.close=function(){this._clearFn.call(i,this._id)},t.enroll=function(e,t){clearTimeout(e._idleTimeoutId),e._idleTimeout=t},t.unenroll=function(e){clearTimeout(e._idleTimeoutId),e._idleTimeout=-1},t._unrefActive=t.active=function(e){clearTimeout(e._idleTimeoutId);var t=e._idleTimeout;t>=0&&(e._idleTimeoutId=setTimeout(function(){e._onTimeout&&e._onTimeout()},t))},n(87),t.setImmediate="undefined"!=typeof self&&self.setImmediate||void 0!==e&&e.setImmediate||this&&this.setImmediate,t.clearImmediate="undefined"!=typeof self&&self.clearImmediate||void 0!==e&&e.clearImmediate||this&&this.clearImmediate}).call(this,n(8))},function(e,t,n){"use strict";(function(e,i){Object.defineProperty(t,"__esModule",{value:!0}),t.hasNextTick=t.hasSetImmediate=void 0,t.fallback=u,t.wrap=d;var r,o=n(40),a=(r=o)&&r.__esModule?r:{default:r};var s,l=t.hasSetImmediate="function"==typeof e&&e,c=t.hasNextTick="object"==typeof i&&"function"==typeof i.nextTick;function u(e){setTimeout(e,0)}function d(e){return function(t){var n=(0,a.default)(arguments,1);e(function(){t.apply(null,n)})}}s=l?e:c?i.nextTick:u,t.default=d(s)}).call(this,n(41).setImmediate,n(12))},,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t){var n=(0,r.default)(e);return(0,i.default)(function(e,t){n(e[0],t)},t,1)};var i=o(n(95)),r=o(n(39));function o(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},,,,,,,,,,,,,,,,,,,,,,,,,,,,,,function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){var t=(0,o.default)(arguments),n=t.pop();e.call(this,t,n)}};var i,r=n(40),o=(i=r)&&i.__esModule?i:{default:i};e.exports=t.default},function(e,t){e.exports=function(e){var t=typeof e;return null!=e&&("object"==t||"function"==t)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return(0,r.default)(function(t,n){var r;try{r=e.apply(this,t)}catch(e){return n(e)}(0,i.default)(r)&&"function"==typeof r.then?r.then(function(e){s(n,null,e)},function(e){s(n,e.message?e:new Error(e))}):n(null,r)})};var i=a(n(84)),r=a(n(83)),o=a(n(42));function a(e){return e&&e.__esModule?e:{default:e}}function s(e,t,n){try{e(t,n)}catch(e){(0,o.default)(l,e)}}function l(e){throw e}e.exports=t.default},function(e,t,n){"use strict";function i(){this.head=this.tail=null,this.length=0}function r(e,t){e.length=1,e.head=e.tail=t}Object.defineProperty(t,"__esModule",{value:!0}),t.default=i,i.prototype.removeLink=function(e){return e.prev?e.prev.next=e.next:this.head=e.next,e.next?e.next.prev=e.prev:this.tail=e.prev,e.prev=e.next=null,this.length-=1,e},i.prototype.empty=function(){for(;this.head;)this.shift();return this},i.prototype.insertAfter=function(e,t){t.prev=e,t.next=e.next,e.next?e.next.prev=t:this.tail=t,e.next=t,this.length+=1},i.prototype.insertBefore=function(e,t){t.prev=e.prev,t.next=e,e.prev?e.prev.next=t:this.head=t,e.prev=t,this.length+=1},i.prototype.unshift=function(e){this.head?this.insertBefore(this.head,e):r(this,e)},i.prototype.push=function(e){this.tail?this.insertAfter(this.tail,e):r(this,e)},i.prototype.shift=function(){return this.head&&this.removeLink(this.head)},i.prototype.pop=function(){return this.tail&&this.removeLink(this.tail)},i.prototype.toArray=function(){for(var e=Array(this.length),t=this.head,n=0;n<this.length;n++)e[n]=t.data,t=t.next;return e},i.prototype.remove=function(e){for(var t=this.head;t;){var n=t.next;e(t)&&this.removeLink(t),t=n}return this},e.exports=t.default},function(e,t,n){(function(e,t){!function(e,n){"use strict";if(!e.setImmediate){var i,r,o,a,s,l=1,c={},u=!1,d=e.document,h=Object.getPrototypeOf&&Object.getPrototypeOf(e);h=h&&h.setTimeout?h:e,"[object process]"==={}.toString.call(e.process)?i=function(e){t.nextTick(function(){p(e)})}:!function(){if(e.postMessage&&!e.importScripts){var t=!0,n=e.onmessage;return e.onmessage=function(){t=!1},e.postMessage("","*"),e.onmessage=n,t}}()?e.MessageChannel?((o=new MessageChannel).port1.onmessage=function(e){p(e.data)},i=function(e){o.port2.postMessage(e)}):d&&"onreadystatechange"in d.createElement("script")?(r=d.documentElement,i=function(e){var t=d.createElement("script");t.onreadystatechange=function(){p(e),t.onreadystatechange=null,r.removeChild(t),t=null},r.appendChild(t)}):i=function(e){setTimeout(p,0,e)}:(a="setImmediate$"+Math.random()+"$",s=function(t){t.source===e&&"string"==typeof t.data&&0===t.data.indexOf(a)&&p(+t.data.slice(a.length))},e.addEventListener?e.addEventListener("message",s,!1):e.attachEvent("onmessage",s),i=function(t){e.postMessage(a+t,"*")}),h.setImmediate=function(e){"function"!=typeof e&&(e=new Function(""+e));for(var t=new Array(arguments.length-1),n=0;n<t.length;n++)t[n]=arguments[n+1];var r={callback:e,args:t};return c[l]=r,i(l),l++},h.clearImmediate=f}function f(e){delete c[e]}function p(e){if(u)setTimeout(p,0,e);else{var t=c[e];if(t){u=!0;try{!function(e){var t=e.callback,i=e.args;switch(i.length){case 0:t();break;case 1:t(i[0]);break;case 2:t(i[0],i[1]);break;case 3:t(i[0],i[1],i[2]);break;default:t.apply(n,i)}}(t)}finally{f(e),u=!1}}}}}("undefined"==typeof self?void 0===e?this:e:self)}).call(this,n(8),n(12))},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e){return function(){if(null===e)throw new Error("Callback was already called.");var t=e;e=null,t.apply(this,arguments)}},e.exports=t.default},function(e,t){e.exports=function(){}},function(e,t){var n=Array.isArray;e.exports=n},function(e,t){e.exports=function(e,t,n){for(var i=n-1,r=e.length;++i<r;)if(e[i]===t)return i;return-1}},function(e,t){e.exports=function(e){return e!=e}},function(e,t){e.exports=function(e,t,n,i){for(var r=e.length,o=n+(i?1:-1);i?o--:++o<r;)if(t(e[o],o,e))return o;return-1}},function(e,t,n){var i=n(93),r=n(92),o=n(91);e.exports=function(e,t,n){return t==t?o(e,t,n):i(e,r,n)}},function(e,t,n){"use strict";Object.defineProperty(t,"__esModule",{value:!0}),t.default=function(e,t,n){if(null==t)t=1;else if(0===t)throw new Error("Concurrency must not be zero");var u=(0,c.default)(e),d=0,h=[],f=!1;function p(e,t,n){if(null!=n&&"function"!=typeof n)throw new Error("task callback must be a function");if(g.started=!0,(0,r.default)(e)||(e=[e]),0===e.length&&g.idle())return(0,s.default)(function(){g.drain()});for(var i=0,a=e.length;i<a;i++){var l={data:e[i],callback:n||o.default};t?g._tasks.unshift(l):g._tasks.push(l)}f||(f=!0,(0,s.default)(function(){f=!1,g.process()}))}function v(e){return function(t){d-=1;for(var n=0,r=e.length;n<r;n++){var o=e[n],a=(0,i.default)(h,o,0);0===a?h.shift():a>0&&h.splice(a,1),o.callback.apply(o,arguments),null!=t&&g.error(t,o.data)}d<=g.concurrency-g.buffer&&g.unsaturated(),g.idle()&&g.drain(),g.process()}}var m=!1,g={_tasks:new l.default,concurrency:t,payload:n,saturated:o.default,unsaturated:o.default,buffer:t/4,empty:o.default,drain:o.default,error:o.default,started:!1,paused:!1,push:function(e,t){p(e,!1,t)},kill:function(){g.drain=o.default,g._tasks.empty()},unshift:function(e,t){p(e,!0,t)},remove:function(e){g._tasks.remove(e)},process:function(){if(!m){for(m=!0;!g.paused&&d<g.concurrency&&g._tasks.length;){var e=[],t=[],n=g._tasks.length;g.payload&&(n=Math.min(n,g.payload));for(var i=0;i<n;i++){var r=g._tasks.shift();e.push(r),h.push(r),t.push(r.data)}d+=1,0===g._tasks.length&&g.empty(),d===g.concurrency&&g.saturated();var o=(0,a.default)(v(e));u(t,o)}m=!1}},length:function(){return g._tasks.length},running:function(){return d},workersList:function(){return h},idle:function(){return g._tasks.length+d===0},pause:function(){g.paused=!0},resume:function(){!1!==g.paused&&(g.paused=!1,(0,s.default)(g.process))}};return g};var i=u(n(94)),r=u(n(90)),o=u(n(89)),a=u(n(88)),s=u(n(42)),l=u(n(86)),c=u(n(39));function u(e){return e&&e.__esModule?e:{default:e}}e.exports=t.default},,,,,,,,,,,,,,,,function(e,t,n){n(7),e.exports=n(0)}]]);