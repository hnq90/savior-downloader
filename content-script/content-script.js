!function(a,b,c){function d(a){return-1!==["m3u8","m3u"].indexOf(a)}function e(a){var b=a.url;a="object"==typeof b?b.videoUrl+"\n"+b.audioUrl:b;var c=X.hash(a);return c.toString()}function f(a,b){var d=b[0],e={};if(!d){if(a.length>1)for(var g=0;g<a.length;++g){var h=a[g],i=h.url();if("object"==typeof i&&(i=i.videoUrl),-1!==i.indexOf(".googlevideo.com"))return[h]}return[a[0]]}return a.forEach(function(a){var b=a[d]&&a[d]()||"";e[b]=e[b]||[],e[b].push(a)}),Object.keys(e).map(function(a){var g=f(e[a],b.slice(1)),h={media:g};return h[d]=X.defined(a)?a:c,h.is_only=1===g.length&&(!X.defined(g[0].is_only)||g[0].is_only),h["i18n_"+d]=Y("media_fields_"+d+"_"+a),h})}function g(a){return a.forEach(function(a){var b=a.type;a.media.forEach(function(a){a.media=a.media.sort(function(a,c){return P[b].extensions.indexOf(a.ext)-P[b].extensions.indexOf(c.ext)})})}),a}function h(a){return a.ext?(a.media=a.media.sort(function(a,b){return quality.getQualityLevelByType(a.quality)-quality.getQualityLevelByType(b.quality)}),a):(Array.isArray(a)?a=a.map(h):a.media=h(a.media),a)}function i(a){return h(g(a))}function j(a,b){return a&&a[b]||""}function k(a){return function(b){return b[a]}}function l(a){var b=X.toArray(arguments);return b.shift(),function(c,d){return c[a].apply(c,b)}}function m(a){return a?T.check(a)?!1:!0:!1}function n(a){if(!m(a))return null;if(-1!==["PARAM","SOURCE"].indexOf(a.tagName)&&(a=a.parentElement),"OBJECT"===a.tagName){var b=a.querySelectorAll("embed");b&&1===b.length&&(a=b[0])}return a}function o(a){var b=a.parse,c=a.request;if(!c)return b;var d=c.url||function(a){return a},e=c.params||function(){},f=c.headers||function(){};return function(a){var g=d(a);if(!g)return b(a);var h=new $;return X.send(c.method,g,e(a),f(a)).done(function(a){try{var c=b(g,a);h.resolve(c)}catch(d){h.reject()}}),h}}function p(a){return{nocache:!!a.nocache,getPlaylist:o(a)}}function q(a,b,c){function d(b,d,e){var f=c&&c.pip||null,g={name:a,node:b,ids:d,scraper:e,getMedia:function(){var b=[],c=this.ids;if(!c.length)return b;var d=this.scraper;return d?(c.forEach(function(c){if(d.nocache)return void b.push(d.getPlaylist(c));var e=a+"_"+(c.url||c),f=new $;cache.get(e).success(function(a){f.resolve(a)}).fail(function(){var a=new $(d.getPlaylist(c));a.success(function(a){cache.put(e,a)}).done(function(a){f.resolve(a)})}),b.push(f)}),b):(b.push.apply(b,c),b)}};return f&&f.restore&&f.detach&&(g.restore=f.restore,g.detach=f.detach),g}var e=Boolean(c&&c.dynamic),f=e?function(){this._ids=[]}:function(){};return f.prototype={constructor:f,name:a,getMediaPlayers:b,makePlayer:function(a,b,c){return d(n(a),b,c)},makePlayer0:d},e&&(f.prototype.processRequest=function(a){a&&-1===this._ids.indexOf(a)&&this._ids.push(a)}),f}function r(a){return!!a&&X.endsWith(a,"adnetwork.vn")}function s(a,b,c,d){return{match:function(b){if(a.filename&&a.filename!==b.filename)return!1;var c=b.host;if(!c||b.title)return!1;if(!a.hosts)return!0;for(var d=a.hosts.length-1;d>=0;d--)if(X.endsWith(c,a.hosts[d]))return!0;return!1},location:Array.isArray(b)?b:[b],selector:c,auxSelector:d}}function t(a,b,c){return s({hosts:[".googlevideo.com","docs.google.com"],filename:"videoplayback"},a,b,c)}function u(a,b){return t(a,"title",b)}function v(){var a=location.href;if(!Fa.test(a))return null;a=a.replace(Fa,"");for(var b,c,d=0;d<Ca.length;++d)if(c=Ca[d],X.isMatches(a,c.location)){try{if(b=X.queryAll(c.selector).pop().textContent,"title"===c.selector&&(b=b.replace(Da,"").replace(Ea,"")),c.auxSelector){var e=X.query(c.auxSelector).textContent.trim();e&&(b+=" ("+e+")")}b=b.replace(/\s+/g," ").trim()}catch(f){}if(b)return{title:b,test:c.match}}return a.match(/^fptplay\.net/i)?{title:null,test:function(a){var b=a.pathname.split("/"),c=b.length-1,d=b[c];return"chunklist.m3u8"===d&&c>0&&(d=b[c-1]),d&&(this.title=d),!0}}:null}function w(){var a=this;a._callbacks=[],a._data={},a._media2id={}}function x(a,c){function d(){for(var a=10,b=c.scrollTop,d=-1;f-1>d&&e[d+1].top<=b;)d++;return-1===d?!1:(g!==d&&(-1!==g&&(e[g].node.style.position="static",e[g].placeholder.hidden=!0),e[d].node.style.position="fixed",e[d].placeholder.hidden=!1,g=d),d!==f-1&&b+e[d].height>e[d+1].top?(e[d].node.style.top=a-(b+e[d].height-e[d+1].top)+"px",e[d].node.classList.contains("pulled")||e[d].node.classList.add("pulled")):(e[d].node.style.top=a+"px",e[d].node.classList.contains("pulled")&&e[d].node.classList.remove("pulled")),!1)}var e=[],f=a.length,g=-1;1>f||(c.style.position="relative",e=a.map(function(a){var c=b.createElement("div");return c.style.height=a.offsetHeight+"px",c.hidden=!0,a.parentNode.insertBefore(c,a),{node:a,top:a.offsetTop,height:a.offsetHeight,placeholder:c}}),c.addEventListener("scroll",d,!1))}function y(a){this._widget=a,this._downloads=null}function z(a,c){var d=b.createElement(a);return c&&(d.className=c),d}function A(d){var e=d._dl.render(a.options.get("template-list"),{i18n_check_label:Y("popup_check_label"),i18n_check_all:Y("popup_check_all"),i18n_check_none:Y("popup_check_none"),i18n_download_selected:Y("popup_download_selected"),i18n_download:Y("popup_download"),i18n_wait:Y("popup_download_starting"),i18n_one_click:Y("popup_one_click"),i18n_preferred_quality:Y("popup_preferred_quality"),i18n_no_media_found:Y("popup_no_media_found"),i18n_download_failed:Y("popup_download_failed"),i18n_pip_button:Y("popup_pip_button"),has_pip:T.check(a.location.hostname,"pip")},d._preferredQuality),f=1===e.length?e[0]:null;if(f)if("select"===d._make_action){var g=X.query(".j-quality-selector:not([hidden])",f);g&&setTimeout(function(){var c=b.createEvent("MouseEvents");c.initMouseEvent("mousedown",!0,!0,a),g.dispatchEvent(c)},4)}else if("download"===d._make_action){var h=X.query(".j-quality-download:not([hidden])",f);h&&d._download(h)&&(metrics.log("Download",metrics.DOWNLOAD_AUTO),d._updateDownloadSelected())}d._make_action=c}function B(){this.overlayCtl=null,this.currentPlayer=null,this.tourState=options.get("pip_tour_state")||this.STATE.VIRGIN}function C(a){return(a.createShadowRoot||a.webkitCreateShadowRoot).call(a)}function D(a,b){for(b=b.parentNode;b&&b!==a;)b=b.parentNode;return!!b}function E(a){a=a||{};var b=z("div"),c=C(b),d=z("style"),e="",f=a.styles||chrome.runtime.getManifest().web_accessible_resources||[];f.forEach(function(a){X.endsWith(a,".css")&&(e+='@import "'+chrome.extension.getURL(a)+'";\n')}),d.innerHTML=e,c.appendChild(d);var g=z("div","body");return c.appendChild(g),{element:b,shadowElement:g}}function F(a){function b(a){return-1!==["mouseenter","mouseover","touchstart","touchmove"].indexOf(a)}function c(c){var d=a.getTarget(c.target);return d?(a.onFocus(d,b(c.type)),!0):void 0}function d(a){var b=f[a.type];b&&(null!==e&&(e=a),b(a)&&(a.preventDefault(),a.stopPropagation()))}var e,f={mouseenter:c,mouseleave:c},g=Object.keys(f);return{emitLastEvent:function(){var a=e&&f[e.type];a&&a(e),e=null},attach:function(a){for(var b=g.length-1;b>=0;b--)a.addEventListener(g[b],d,!0)},detach:function(a){for(var b=g.length-1;b>=0;b--)a.removeEventListener(g[b],d,!0)}}}function G(a,c){for(;c&&c!==b;){var d=a.getComputedStyle(c);if(d&&"fixed"===d.getPropertyValue("position"))return"fixed";c=c.parentNode}return"absolute"}function H(a){try{if(a.matches("object, embed")){var b=a.parentNode&&a.parentNode.matches("object")?a.parentNode:a.querySelector("embed");b&&b.offsetHeight>a.offsetHeight&&(a=b)}var c=a.ownerDocument.defaultView,d=G(c,a),e=a.getBoundingClientRect(),f=e.top,g=e.left;return"fixed"!==d&&(f+=c.pageYOffset,g+=c.pageXOffset),a.matches("video")&&a.controls&&a.offsetHeight<35&&(g+=5,f=f+a.offsetHeight-35),{position:d,top:f+"px",left:g+"px",height:e.height+"px",width:e.width+"px"}}catch(h){return null}}function I(c){function d(a){if(a){for(var b=a.parentNode;b;)a=b,b=a.parentNode;return a.activeElement}}function e(){metrics.log("PageShown",metrics.PAGE_CONTENT_SHOW_CONTROLS),h.hidden=!1}function f(){setTimeout(function(){if(i.hide){var a=X.query(".downloads-multi #downloads",h);a&&(a.hidden=!0),h.hidden=!0}},Ka)}function g(){if(i.node){var a="",b=H(i.node);Object.keys(b).forEach(function(c){a+=c+":"+b[c]+";"}),h.setAttribute("style",a)}}var h=z("div","base overlay");h.innerHTML="&nbsp;",h.hidden=!0;var i={hide:!0,node:null,forced:!1};a.addEventListener("resize",g);var j=F({onFocus:function(b,c){if(!i.forced){var j;if(!c&&(j=d(h),j&&j.matches("select"))){if("o"===b)return;j.blur()}if(!c||!a.options.get("on_page_buttons"))return i.hide=!0,void f();if(i.hide=!1,"o"!==b){i.node=b.node;var k=b.widget;k&&k.isReady()&&(k.attach(h),g(),e())}}},getTarget:function(a){return a?a===h?"o":c.findEntry(a):a}});return j.attach(h),j.attach(b),{attach:function(a){a.appendChild(h),j.emitLastEvent()},destroy:function(){j.detach(b),j.detach(h),a.removeEventListener("resize",g)},forceShow:function(a){var b=c.findEntry(a);return b&&b.widget.isReady()?(i.hide=!1,i.node=a,i.forced=!0,b.widget.attach(h),g(),e(),b.widget):!1},cancelForced:function(){i.hide=!0,i.forced=!1,i.node=null,f()}}}function J(){function a(a){if(!a)return!0;if("VIDEO"===a.tagName){var b=a.parentNode;if(b&&"BODY"===b.tagName&&1===b.childNodes.length)return!0}return!1}return{data:[],reset:function(){this.data=[]},findEntry:function(a){for(var b=this.data,c=b.length-1;c>=0;c--){var d=b[c];if(d.node===a||D(d.node,a))return d}return null},setMediaPlayers:function(b,c){for(var d=this.data,e=[],f=0;f<d.length;++f)e.push(d[f].node);var g=0;c.forEach(function(c){var f=c.node;if(!a(f)){f.parentNode instanceof Node&&f.parentNode.matches("object")&&(f=f.parentNode),(location.host.match(/^([\w\d_-]+\.)*fptplay.net$/)&&f.matches("object")||location.host.match(/^([\w\d_-]+\.)*vnexpress.net$/)&&f.matches("video#media-video, video.video-js")||location.host.match(/^([\w\d_-]+\.)*nhaccuatui.com$/)&&f.matches("video#videonctPlayer"))&&(f=f.parentNode);var h,i=e.indexOf(f);-1!==i?(e[i]=null,h=d[i].widget):(h=new Ja(f),d.push({node:f,widget:h})),h.setMediaData(b,c),++g}});for(var f=e.length-1;f>=0;f--){var h=e[f];h&&d.splice(f,1)}return!!g}}}function K(a){var b,c=J(),d=I(c),e=new B;return e.overlayCtl={forceShow:d.forceShow,cancelForced:d.cancelForced},{destroy:function(){d&&(d.destroy(),d=null),b&&(a.removeChild(b.element),b=null),c.reset()},setMediaPlayers:function(f,g){c.setMediaPlayers(f,g)&&!b&&(b=E(),a.appendChild(b.element),d.attach(b.shadowElement),e.attach(b.shadowElement)),e.processPlayers(f,g)}}}function L(){this.icon=X.dom.parseHTML('<a class="pip-btn standalone" hidden></a>').firstChild,this.icon.appendChild(b.createTextNode(Y("popup_pip_button"))),b.addEventListener("DOMContentLoaded",this.prepareDOM.bind(this)),this.scheduleHideIcon=this._scheduleHideIcon.bind(this),this.unscheduleHideIcon=this._unscheduleHideIcon.bind(this),setInterval(this._checkForNodes.bind(this),1e3),this.icon.addEventListener("mouseenter",this._onIconEnter.bind(this)),this.icon.addEventListener("mouseleave",this._onIconLeave.bind(this)),this.icon.addEventListener("click",this._onIconClick.bind(this)),this.nodes=[]}function M(){this._init()}var N=N||function(a,b){var c={},d=c.lib={},e=function(){},f=d.Base={extend:function(a){e.prototype=this;var b=new e;return a&&b.mixIn(a),b.hasOwnProperty("init")||(b.init=function(){b.$super.init.apply(this,arguments)}),b.init.prototype=b,b.$super=this,b},create:function(){var a=this.extend();return a.init.apply(a,arguments),a},init:function(){},mixIn:function(a){for(var b in a)a.hasOwnProperty(b)&&(this[b]=a[b]);a.hasOwnProperty("toString")&&(this.toString=a.toString)},clone:function(){return this.init.prototype.extend(this)}},g=d.WordArray=f.extend({init:function(a,c){a=this.words=a||[],this.sigBytes=c!=b?c:4*a.length},toString:function(a){return(a||i).stringify(this)},concat:function(a){var b=this.words,c=a.words,d=this.sigBytes;if(a=a.sigBytes,this.clamp(),d%4)for(var e=0;a>e;e++)b[d+e>>>2]|=(c[e>>>2]>>>24-8*(e%4)&255)<<24-8*((d+e)%4);else if(65535<c.length)for(e=0;a>e;e+=4)b[d+e>>>2]=c[e>>>2];else b.push.apply(b,c);return this.sigBytes+=a,this},clamp:function(){var b=this.words,c=this.sigBytes;b[c>>>2]&=4294967295<<32-8*(c%4),b.length=a.ceil(c/4)},clone:function(){var a=f.clone.call(this);return a.words=this.words.slice(0),a},random:function(b){for(var c=[],d=0;b>d;d+=4)c.push(4294967296*a.random()|0);return new g.init(c,b)}}),h=c.enc={},i=h.Hex={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++){var e=b[d>>>2]>>>24-8*(d%4)&255;c.push((e>>>4).toString(16)),c.push((15&e).toString(16))}return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d+=2)c[d>>>3]|=parseInt(a.substr(d,2),16)<<24-4*(d%8);return new g.init(c,b/2)}},j=h.Latin1={stringify:function(a){var b=a.words;a=a.sigBytes;for(var c=[],d=0;a>d;d++)c.push(String.fromCharCode(b[d>>>2]>>>24-8*(d%4)&255));return c.join("")},parse:function(a){for(var b=a.length,c=[],d=0;b>d;d++)c[d>>>2]|=(255&a.charCodeAt(d))<<24-8*(d%4);return new g.init(c,b)}},k=h.Utf8={stringify:function(a){try{return decodeURIComponent(escape(j.stringify(a)))}catch(b){throw Error("Malformed UTF-8 data")}},parse:function(a){return j.parse(unescape(encodeURIComponent(a)))}},l=d.BufferedBlockAlgorithm=f.extend({reset:function(){this._data=new g.init,this._nDataBytes=0},_append:function(a){"string"==typeof a&&(a=k.parse(a)),this._data.concat(a),this._nDataBytes+=a.sigBytes},_process:function(b){var c=this._data,d=c.words,e=c.sigBytes,f=this.blockSize,h=e/(4*f),h=b?a.ceil(h):a.max((0|h)-this._minBufferSize,0);if(b=h*f,e=a.min(4*b,e),b){for(var i=0;b>i;i+=f)this._doProcessBlock(d,i);i=d.splice(0,b),c.sigBytes-=e}return new g.init(i,e)},clone:function(){var a=f.clone.call(this);return a._data=this._data.clone(),a},_minBufferSize:0});d.Hasher=l.extend({cfg:f.extend(),init:function(a){this.cfg=this.cfg.extend(a),this.reset()},reset:function(){l.reset.call(this),this._doReset()},update:function(a){return this._append(a),this._process(),this},finalize:function(a){return a&&this._append(a),this._doFinalize()},blockSize:16,_createHelper:function(a){return function(b,c){return new a.init(c).finalize(b)}},_createHmacHelper:function(a){return function(b,c){return new m.HMAC.init(a,c).finalize(b)}}});var m=c.algo={};return c}(Math);!function(){var a=N,b=a.lib.WordArray;a.enc.Base64={stringify:function(a){var b=a.words,c=a.sigBytes,d=this._map;a.clamp(),a=[];for(var e=0;c>e;e+=3)for(var f=(b[e>>>2]>>>24-8*(e%4)&255)<<16|(b[e+1>>>2]>>>24-8*((e+1)%4)&255)<<8|b[e+2>>>2]>>>24-8*((e+2)%4)&255,g=0;4>g&&c>e+.75*g;g++)a.push(d.charAt(f>>>6*(3-g)&63));if(b=d.charAt(64))for(;a.length%4;)a.push(b);return a.join("")},parse:function(a){var c=a.length,d=this._map,e=d.charAt(64);e&&(e=a.indexOf(e),-1!=e&&(c=e));for(var e=[],f=0,g=0;c>g;g++)if(g%4){var h=d.indexOf(a.charAt(g-1))<<2*(g%4),i=d.indexOf(a.charAt(g))>>>6-2*(g%4);e[f>>>2]|=(h|i)<<24-8*(f%4),f++}return b.create(e,f)},_map:"ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/="}}(),function(a){function b(a,b,c,d,e,f,g){return a=a+(b&c|~b&d)+e+g,(a<<f|a>>>32-f)+b}function c(a,b,c,d,e,f,g){return a=a+(b&d|c&~d)+e+g,(a<<f|a>>>32-f)+b}function d(a,b,c,d,e,f,g){return a=a+(b^c^d)+e+g,(a<<f|a>>>32-f)+b}function e(a,b,c,d,e,f,g){return a=a+(c^(b|~d))+e+g,(a<<f|a>>>32-f)+b}for(var f=N,g=f.lib,h=g.WordArray,i=g.Hasher,g=f.algo,j=[],k=0;64>k;k++)j[k]=4294967296*a.abs(a.sin(k+1))|0;g=g.MD5=i.extend({_doReset:function(){this._hash=new h.init([1732584193,4023233417,2562383102,271733878])},_doProcessBlock:function(a,f){for(var g=0;16>g;g++){var h=f+g,i=a[h];a[h]=16711935&(i<<8|i>>>24)|4278255360&(i<<24|i>>>8)}var g=this._hash.words,h=a[f+0],i=a[f+1],k=a[f+2],l=a[f+3],m=a[f+4],n=a[f+5],o=a[f+6],p=a[f+7],q=a[f+8],r=a[f+9],s=a[f+10],t=a[f+11],u=a[f+12],v=a[f+13],w=a[f+14],x=a[f+15],y=g[0],z=g[1],A=g[2],B=g[3],y=b(y,z,A,B,h,7,j[0]),B=b(B,y,z,A,i,12,j[1]),A=b(A,B,y,z,k,17,j[2]),z=b(z,A,B,y,l,22,j[3]),y=b(y,z,A,B,m,7,j[4]),B=b(B,y,z,A,n,12,j[5]),A=b(A,B,y,z,o,17,j[6]),z=b(z,A,B,y,p,22,j[7]),y=b(y,z,A,B,q,7,j[8]),B=b(B,y,z,A,r,12,j[9]),A=b(A,B,y,z,s,17,j[10]),z=b(z,A,B,y,t,22,j[11]),y=b(y,z,A,B,u,7,j[12]),B=b(B,y,z,A,v,12,j[13]),A=b(A,B,y,z,w,17,j[14]),z=b(z,A,B,y,x,22,j[15]),y=c(y,z,A,B,i,5,j[16]),B=c(B,y,z,A,o,9,j[17]),A=c(A,B,y,z,t,14,j[18]),z=c(z,A,B,y,h,20,j[19]),y=c(y,z,A,B,n,5,j[20]),B=c(B,y,z,A,s,9,j[21]),A=c(A,B,y,z,x,14,j[22]),z=c(z,A,B,y,m,20,j[23]),y=c(y,z,A,B,r,5,j[24]),B=c(B,y,z,A,w,9,j[25]),A=c(A,B,y,z,l,14,j[26]),z=c(z,A,B,y,q,20,j[27]),y=c(y,z,A,B,v,5,j[28]),B=c(B,y,z,A,k,9,j[29]),A=c(A,B,y,z,p,14,j[30]),z=c(z,A,B,y,u,20,j[31]),y=d(y,z,A,B,n,4,j[32]),B=d(B,y,z,A,q,11,j[33]),A=d(A,B,y,z,t,16,j[34]),z=d(z,A,B,y,w,23,j[35]),y=d(y,z,A,B,i,4,j[36]),B=d(B,y,z,A,m,11,j[37]),A=d(A,B,y,z,p,16,j[38]),z=d(z,A,B,y,s,23,j[39]),y=d(y,z,A,B,v,4,j[40]),B=d(B,y,z,A,h,11,j[41]),A=d(A,B,y,z,l,16,j[42]),z=d(z,A,B,y,o,23,j[43]),y=d(y,z,A,B,r,4,j[44]),B=d(B,y,z,A,u,11,j[45]),A=d(A,B,y,z,x,16,j[46]),z=d(z,A,B,y,k,23,j[47]),y=e(y,z,A,B,h,6,j[48]),B=e(B,y,z,A,p,10,j[49]),A=e(A,B,y,z,w,15,j[50]),z=e(z,A,B,y,n,21,j[51]),y=e(y,z,A,B,u,6,j[52]),B=e(B,y,z,A,l,10,j[53]),A=e(A,B,y,z,s,15,j[54]),z=e(z,A,B,y,i,21,j[55]),y=e(y,z,A,B,q,6,j[56]),B=e(B,y,z,A,x,10,j[57]),A=e(A,B,y,z,o,15,j[58]),z=e(z,A,B,y,v,21,j[59]),y=e(y,z,A,B,m,6,j[60]),B=e(B,y,z,A,t,10,j[61]),A=e(A,B,y,z,k,15,j[62]),z=e(z,A,B,y,r,21,j[63]);g[0]=g[0]+y|0,g[1]=g[1]+z|0,g[2]=g[2]+A|0,g[3]=g[3]+B|0},_doFinalize:function(){var b=this._data,c=b.words,d=8*this._nDataBytes,e=8*b.sigBytes;c[e>>>5]|=128<<24-e%32;var f=a.floor(d/4294967296);for(c[(e+64>>>9<<4)+15]=16711935&(f<<8|f>>>24)|4278255360&(f<<24|f>>>8),c[(e+64>>>9<<4)+14]=16711935&(d<<8|d>>>24)|4278255360&(d<<24|d>>>8),b.sigBytes=4*(c.length+1),this._process(),b=this._hash,c=b.words,d=0;4>d;d++)e=c[d],c[d]=16711935&(e<<8|e>>>24)|4278255360&(e<<24|e>>>8);return b},clone:function(){var a=i.clone.call(this);return a._hash=this._hash.clone(),a}}),f.MD5=i._createHelper(g),f.HmacMD5=i._createHmacHelper(g)}(Math),function(){var a=N,b=a.lib,c=b.Base,d=b.WordArray,b=a.algo,e=b.EvpKDF=c.extend({cfg:c.extend({keySize:4,hasher:b.MD5,iterations:1}),init:function(a){this.cfg=this.cfg.extend(a)},compute:function(a,b){for(var c=this.cfg,e=c.hasher.create(),f=d.create(),g=f.words,h=c.keySize,c=c.iterations;g.length<h;){i&&e.update(i);var i=e.update(a).finalize(b);e.reset();for(var j=1;c>j;j++)i=e.finalize(i),e.reset();f.concat(i)}return f.sigBytes=4*h,f}});a.EvpKDF=function(a,b,c){return e.create(c).compute(a,b)}}(),N.lib.Cipher||function(a){var b=N,c=b.lib,d=c.Base,e=c.WordArray,f=c.BufferedBlockAlgorithm,g=b.enc.Base64,h=b.algo.EvpKDF,i=c.Cipher=f.extend({cfg:d.extend(),createEncryptor:function(a,b){return this.create(this._ENC_XFORM_MODE,a,b)},createDecryptor:function(a,b){return this.create(this._DEC_XFORM_MODE,a,b)},init:function(a,b,c){this.cfg=this.cfg.extend(c),this._xformMode=a,this._key=b,this.reset()},reset:function(){f.reset.call(this),this._doReset()},process:function(a){return this._append(a),this._process()},finalize:function(a){return a&&this._append(a),this._doFinalize()},keySize:4,ivSize:4,_ENC_XFORM_MODE:1,_DEC_XFORM_MODE:2,_createHelper:function(a){return{encrypt:function(b,c,d){return("string"==typeof c?o:n).encrypt(a,b,c,d)},decrypt:function(b,c,d){return("string"==typeof c?o:n).decrypt(a,b,c,d)}}}});c.StreamCipher=i.extend({_doFinalize:function(){return this._process(!0)},blockSize:1});var j=b.mode={},k=function(b,c,d){var e=this._iv;e?this._iv=a:e=this._prevBlock;for(var f=0;d>f;f++)b[c+f]^=e[f]},l=(c.BlockCipherMode=d.extend({createEncryptor:function(a,b){return this.Encryptor.create(a,b)},createDecryptor:function(a,b){return this.Decryptor.create(a,b)},init:function(a,b){this._cipher=a,this._iv=b}})).extend();l.Encryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize;k.call(this,a,b,d),c.encryptBlock(a,b),this._prevBlock=a.slice(b,b+d)}}),l.Decryptor=l.extend({processBlock:function(a,b){var c=this._cipher,d=c.blockSize,e=a.slice(b,b+d);c.decryptBlock(a,b),k.call(this,a,b,d),this._prevBlock=e}}),j=j.CBC=l,l=(b.pad={}).Pkcs7={pad:function(a,b){for(var c=4*b,c=c-a.sigBytes%c,d=c<<24|c<<16|c<<8|c,f=[],g=0;c>g;g+=4)f.push(d);c=e.create(f,c),a.concat(c)},unpad:function(a){a.sigBytes-=255&a.words[a.sigBytes-1>>>2]}},c.BlockCipher=i.extend({cfg:i.cfg.extend({mode:j,padding:l}),reset:function(){i.reset.call(this);var a=this.cfg,b=a.iv,a=a.mode;if(this._xformMode==this._ENC_XFORM_MODE)var c=a.createEncryptor;else c=a.createDecryptor,this._minBufferSize=1;this._mode=c.call(a,this,b&&b.words)},_doProcessBlock:function(a,b){this._mode.processBlock(a,b)},_doFinalize:function(){var a=this.cfg.padding;if(this._xformMode==this._ENC_XFORM_MODE){a.pad(this._data,this.blockSize);var b=this._process(!0)}else b=this._process(!0),a.unpad(b);return b},blockSize:4});var m=c.CipherParams=d.extend({init:function(a){this.mixIn(a)},toString:function(a){return(a||this.formatter).stringify(this)}}),j=(b.format={}).OpenSSL={stringify:function(a){var b=a.ciphertext;return a=a.salt,(a?e.create([1398893684,1701076831]).concat(a).concat(b):b).toString(g)},parse:function(a){a=g.parse(a);var b=a.words;if(1398893684==b[0]&&1701076831==b[1]){var c=e.create(b.slice(2,4));b.splice(0,4),a.sigBytes-=16}return m.create({ciphertext:a,salt:c})}},n=c.SerializableCipher=d.extend({cfg:d.extend({format:j}),encrypt:function(a,b,c,d){d=this.cfg.extend(d);var e=a.createEncryptor(c,d);return b=e.finalize(b),e=e.cfg,m.create({ciphertext:b,key:c,iv:e.iv,algorithm:a,mode:e.mode,padding:e.padding,blockSize:a.blockSize,formatter:d.format})},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),a.createDecryptor(c,d).finalize(b.ciphertext)},_parse:function(a,b){return"string"==typeof a?b.parse(a,this):a}}),b=(b.kdf={}).OpenSSL={execute:function(a,b,c,d){return d||(d=e.random(8)),a=h.create({keySize:b+c}).compute(a,d),c=e.create(a.words.slice(b),4*c),a.sigBytes=4*b,m.create({key:a,iv:c,salt:d})}},o=c.PasswordBasedCipher=n.extend({cfg:n.cfg.extend({kdf:b}),encrypt:function(a,b,c,d){return d=this.cfg.extend(d),c=d.kdf.execute(c,a.keySize,a.ivSize),d.iv=c.iv,a=n.encrypt.call(this,a,b,c.key,d),a.mixIn(c),a},decrypt:function(a,b,c,d){return d=this.cfg.extend(d),b=this._parse(b,d.format),c=d.kdf.execute(c,a.keySize,a.ivSize,b.salt),d.iv=c.iv,n.decrypt.call(this,a,b,c.key,d)}})}(),function(){for(var a=N,b=a.lib.BlockCipher,c=a.algo,d=[],e=[],f=[],g=[],h=[],i=[],j=[],k=[],l=[],m=[],n=[],o=0;256>o;o++)n[o]=128>o?o<<1:o<<1^283;for(var p=0,q=0,o=0;256>o;o++){var r=q^q<<1^q<<2^q<<3^q<<4,r=r>>>8^255&r^99;d[p]=r,e[r]=p;var s=n[p],t=n[s],u=n[t],v=257*n[r]^16843008*r;f[p]=v<<24|v>>>8,g[p]=v<<16|v>>>16,h[p]=v<<8|v>>>24,i[p]=v,v=16843009*u^65537*t^257*s^16843008*p,j[r]=v<<24|v>>>8,k[r]=v<<16|v>>>16,l[r]=v<<8|v>>>24,m[r]=v,p?(p=s^n[n[n[u^s]]],q^=n[n[q]]):p=q=1}var w=[0,1,2,4,8,16,32,64,128,27,54],c=c.AES=b.extend({_doReset:function(){for(var a=this._key,b=a.words,c=a.sigBytes/4,a=4*((this._nRounds=c+6)+1),e=this._keySchedule=[],f=0;a>f;f++)if(c>f)e[f]=b[f];else{var g=e[f-1];f%c?c>6&&4==f%c&&(g=d[g>>>24]<<24|d[g>>>16&255]<<16|d[g>>>8&255]<<8|d[255&g]):(g=g<<8|g>>>24,g=d[g>>>24]<<24|d[g>>>16&255]<<16|d[g>>>8&255]<<8|d[255&g],g^=w[f/c|0]<<24),e[f]=e[f-c]^g}for(b=this._invKeySchedule=[],c=0;a>c;c++)f=a-c,g=c%4?e[f]:e[f-4],b[c]=4>c||4>=f?g:j[d[g>>>24]]^k[d[g>>>16&255]]^l[d[g>>>8&255]]^m[d[255&g]]},encryptBlock:function(a,b){this._doCryptBlock(a,b,this._keySchedule,f,g,h,i,d)},decryptBlock:function(a,b){var c=a[b+1];a[b+1]=a[b+3],a[b+3]=c,this._doCryptBlock(a,b,this._invKeySchedule,j,k,l,m,e),c=a[b+1],a[b+1]=a[b+3],a[b+3]=c},_doCryptBlock:function(a,b,c,d,e,f,g,h){for(var i=this._nRounds,j=a[b]^c[0],k=a[b+1]^c[1],l=a[b+2]^c[2],m=a[b+3]^c[3],n=4,o=1;i>o;o++)var p=d[j>>>24]^e[k>>>16&255]^f[l>>>8&255]^g[255&m]^c[n++],q=d[k>>>24]^e[l>>>16&255]^f[m>>>8&255]^g[255&j]^c[n++],r=d[l>>>24]^e[m>>>16&255]^f[j>>>8&255]^g[255&k]^c[n++],m=d[m>>>24]^e[j>>>16&255]^f[k>>>8&255]^g[255&l]^c[n++],j=p,k=q,l=r;p=(h[j>>>24]<<24|h[k>>>16&255]<<16|h[l>>>8&255]<<8|h[255&m])^c[n++],q=(h[k>>>24]<<24|h[l>>>16&255]<<16|h[m>>>8&255]<<8|h[255&j])^c[n++],r=(h[l>>>24]<<24|h[m>>>16&255]<<16|h[j>>>8&255]<<8|h[255&k])^c[n++],m=(h[m>>>24]<<24|h[j>>>16&255]<<16|h[k>>>8&255]<<8|h[255&l])^c[n++],a[b]=p,a[b+1]=q,a[b+2]=r,a[b+3]=m},keySize:8});a.AES=b._createHelper(c)}(),N.pad.NoPadding={pad:function(){},unpad:function(){}};var O=function(){this.events={}};O.prototype.on=function(a,b){"object"!=typeof this.events[a]&&(this.events[a]=[]),this.events[a].push(b)},O.prototype.removeListener=function(a,b){var c;"object"==typeof this.events[a]&&(c=indexOf(this.events[a],b),c>-1&&this.events[a].splice(c,1))},O.prototype.emit=function(a){var b,c,d,e=[].slice.call(arguments,1);if("object"==typeof this.events[a])for(c=this.events[a].slice(),d=c.length,b=0;d>b;b++)c[b].apply(this,e)},O.prototype.once=function(a,b){this.on(a,function c(){this.removeListener(a,c),b.apply(this,arguments)})};const P={audio:{title:"Audio",rgxp:/audio/i,extensions:["mp3","flac","m4a","wma","ogg","wav","aif","mid","opus"],ctype2extension:{midi:"mid",mp4:"m4a",m4a:"m4a",mpeg:"mp3",mpeg3:"mp3",wav:"wav",aiff:"aif",opus:"opus"}},video:{title:"Video",rgxp:/video/i,extensions:["mp4","mpeg4","mpg","mpeg","m4v","avi","divx","mov","wmv","movie","asf","webm","flv","3gp"],ctype2extension:{mpeg:"mp4",mp4:"mp4",m4v:"mp4","3gpp":"3gp",flv:"flv",quicktime:"mov",msvideo:"avi","ms-wmv":"wmv","ms-asf":"asf"}}},Q=function(){var a={};return Object.keys(P).forEach(function(b){for(var c=P[b].extensions,d=0;d<c.length;d++)a[c[d]]=b}),a}(),R=[/^(.+\.)?youtube.com/i,/^(.+\.)?zing.vn/i,/^(.+\.)?nhaccuatui.com/i,/^(.+\.)?vimeo.com/i,/^(.+\.)?clip.vn/i,/vietgiaitri\.com/i];var S=function(){this.extra={}};if(S.prototype={check:function(a,b){var c=b?this.extra[b]:this.rules;return this._testRules(a,c)},_testRules:function(a,b){Date.now();if(!b)return!1;var c;if("string"==typeof a?c=a:(a.src||a.href)&&(c=a.src||a.href),c){for(var d=b.wlUrls.length,e=0;d>e;e++)if(b.wlUrls[e].test(c))return!1;d=b.blUrls.length;for(var e=0;d>e;e++)if(b.blUrls[e].test(c))return!0}if(!(a instanceof Node))return!1;for(var f=a.ownerDocument.location.href,e=0;e<b.wlCosmetics.length;e++){var g=b.wlCosmetics[e];if(("~"===g.domain[0]&&f.match(g.domain.substr(1))||f.match(g.domain))&&g.selectors.some(a.matches.bind(a)))return!1}for(var e=0;e<b.blCosmetics.length;e++){var g=b.blCosmetics[e];if(("~"===g.domain[0]&&f.match(g.domain.substr(1))||f.match(g.domain))&&g.selectors.some(a.matches.bind(a)))return!0}return!1},convertWildcard:function(a){if(/^\/.*?\/$/.test(a)&&/[\[\\(){}]/.test(a))return new RegExp(a.replace(/^\/|\/$/g,""),"i");var b=a.replace(/[.?+\\\[{()]/g,function(a){return"\\"+a}).replace(/\^/g,"[\\w\\d_.%-]").replace(/\*/g,".*").replace(/\|\|/g,"^\\w+://([\\d\\w-]+\\.)*").replace(/\|/g,"$");return new RegExp(b,"i")},getParsingRegex:function(){if(this.regex)return this.regex;var a="^\\s*(@@)?(/(?:[^/]|\\\\/)+/|(?:[^#$]+|#(?!#))+)?(?:(#@#|##)([^$]+))?(?:\\$(.*))?\\s*$";return this.regex=new RegExp(a,"i"),this.regex},parseFilters:function(a){var b=a;"string"==typeof b&&(b=b.split(/[\r\n]+/));for(var c={blUrls:[],wlUrls:[],blCosmetics:[],wlCosmetics:[]},d={"":{bl:[],wl:[]}},e=0;e<b.length;e++){var f=b[e];if(!/^\s*!|^\s*\[.*?\]\s*$/.test(f)){var g=this.getParsingRegex().exec(f);if(g){var h={whitelist:g[1],url:g[2],separator:g[3],selector:g[4],comment:g[5]};if(h.separator)for(var i=h.url?h.url.split(/,/):[""],j=0;j<i.length;j++){var k=i[j];k in d||(d[k]={bl:[],wl:[]}),k=d[k],"#@#"===h.separator?(h.whiteList||d[""].wl.push(h.selector),k[h.whitelist?"bl":"wl"].push(h.selector)):k[h.whitelist?"wl":"bl"].push(h.selector)}else{if(!h.url)continue;var l="@@"===h.whitelist?c.wlUrls:c.blUrls,m=this.convertWildcard(h.url);l.push(m)}}}}for(var n=Object.keys(d),e=0;e<n.length;e++){var o=n[e],k=d[o];k.bl.length&&c.blCosmetics.push({domain:this.convertWildcard(o),selectors:d[o].bl}),k.wl.length&&c.wlCosmetics.push({domain:this.convertWildcard(o),selectors:d[o].wl})}return c},loadRules:function(a,b){var c=this.parseFilters(a);b?this.extra[b]=c:this.rules=c}},"undefined"!=typeof module)module.exports=S;else var T=new S;T.loadRules(["/pre-roll/","/preroll/","/ads/","||histats.com/","||adnetwork.vn/","||doubleclick.net/","||admicro/","||adnet.vn/","||ds-vn.serving-sys.com/","||lavanetwork.net/","||video.sgame.vn:8080/","||cdn.blueseed/","||vcmedia.vn/","||innity.net/","||serving-sys.com/","||ambientplatform.vn/","||gvt1.com/","||comment.dantri.com.vn/","||adsquangcao.com/","||facebook.com/connect","||facebook.com/plugins/likebox.php","||facebook.com/plugins/comments.php","||facebook.com/connect/xd_arbiter","||facebook.com/plugins/page.php","||googlesyndication.com","||qccoccocmedia.vn/","||coccoc.com/webhp##*","||meme.vn/##*","||ads.phimnhanh.net/","||adsquangcao.com/","||edgecastcdn.net/","||qccoccocmedia.vn/","||dev-qccoccocmedia.vn/","||media.adnetwork.vn/","@@||vhosting.vcmedia.vn/","@@||vcplayer.vcmedia.vn/","@@||vscc.hosting.vcmedia.vn/","@@||vscc.dantri.hosting.vcmedia.vn/","@@||vscc-kenh14-hosting.vcmedia.vn/","##.adsbygoogle iframe","###adcontainer *","##.ad-container *",'##.facebook-top *, .fb-like-box *, iframe[title^="fb:like_box"]','##iframe[title^="fb:page"]','##[id^="AbdVideoPreroll"]','##[data^="player-ads"]','##[id^="google_ads_iframe_"]',"###pyv-iframe","##.box-ads *","##.ads *","##.video-ads *",'##iframe[onload*="google_iframe_oncopy"]','||youtube.com##[id*="sidebar-ads"] *',"||bit.ly/",'##[name*="zeroclipboard"],[data*="zeroclipboard"]',"||xemphimso.com/##.right-menu *","###AbdPopupAd_left iframe",'||phim.hayhd.vn/###adsdiv iframe,div[class*="ads"] iframe',"||nhaccuatui.com/##.box_right *,#banner-container-bottom *","||adxpansion.com/","||porn99.net##.content-right *","||thuvienanh.org/","||xemvtv.net/###ads-slider *",'||yeucahat.com/##div[id^="adscont"] *',"||sexad.net/","||ads.sex.com/",'||redtube.com/##div[id^="as_"] *','##object[id^="abdPopup"]',"||adnetwork.vn/",'##object[data*=".adnetwork.vn/"]',"||phim3s.net/##.ad_location *","||xhamster.com/###plAds *,.adVideo *,#adBottom *","||exoclick.com/","||trafficstars.com/","||traffichaus.com/","||trafficjunky.net/","||vivo.vn##.content-right-sidebar *",'||dailymotion.com##div[id^="mc_"] *',"||pornhub.com/###pb_block *,.right-ads *",'||xemphimso.com/##[id^="ebAd"],#eyeDiv *','||vivo.vn/##div[class*="ads"] *',"||phim.hayhd.vn/###block-resize-sidebar *","||phim.hayhd.vn/##.container .col-sm-8+.col-sm-4 *","||pornhub.com,tube8.com,youporn.com,redtube.com###pb_template *","||nhac.vui.vn/##.colRight *","||tube8.com/##.blockHtml *","||vkool.net/##.float-ck *,.col-left *,#sidebar *, #boxes *","||comment.vietid.net/comments","||dantri.com.vn/comment","||dantri.com.vn/##.fr.w510 *",'||vnexpress.net/##[id*="_BANNER_"] *, .block_banner *','||24h.com.vn/##[id*="ADS_"] *',"||ngoisao.net/###right *","||nhaccuatui.com/##.coverImage *","||phimsexporn.com/##.balloons-ck *"]),T.loadRules(["||mail.google.com/","||docs.google.com/","||dropbox.com/","||meme.vn/","||facebook.com/"],"pip"),T.loadRules(["||fptplay.net/##.hls-playback embed","||pubvn.tv/bar/threads/##iframe#player","||www.24h.com.vn/###player_video_kieu_moi iframe"],"pip-allowfullscreen-false"),T.loadRules(["||mail.google.com/","||docs.google.com/","||drive.google.com/","||dropbox.com/","||fptplay.net/livetv"],"download"),T.loadRules(["/fbcdn([^.]+\\.akamaihd)?\\.net$/","/.*dailymotion.*\\/frag\\(\\d+\\)\\//","||youtube.com/","||vimeo.com/","||vimeocdn.com/","||clip.vn/","||subs.xemphimonlines.com/","||dailymotion.com/","||dmcdn.net/","||nhacrap.tv/","||nixcdn.com/","||zdn.vn/","||vui.vn/","/fptplay\\.net\\/.*?seg\\d*-frag\\d*/","/hlscache\\.fptplay\\.net(?:\\.vn)?\\//","/49ef4358-e34d-484f-a18e-495cd9fe3817","/75247339-7897-437d-9627-55b1a1528700"],"requests");var U=function(){function a(a,b){var c=a[0]-b[0];return 0!==c?c:(c=a[1]-b[1],0!==c?c:(c=a[2]-b[2],0!==c?c:c=a[3]-b[3]))}var b="",c={mp4:!0},d=0,e=navigator.userAgent.match(/Chrome\/([\d\.]+)/);return e&&e[1]&&(e=e[1].split("."),e=[+e[0],+e[1],+e[2],+e[3]],a(e,[39,0,2171,103])>=0&&(b+=" webm!",c.webm=!0),a(e,[39,0,2171,105])>=0&&(b+=" m3u8!",d=1)),{YT:c,M3U8:d}}(),V=function(){function a(a){return a&&0!==a.indexOf("data:image")?f.exec(a):[]}var c=b.createElement("a"),d=/([^/]+)$/i,e=/\.([^/.]*)$/i,f={
strict:/^(?:([^:\/?#]+):)?(?:\/\/((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?))?((((?:[^?#\/]*\/)*)([^?#]*))(?:\?([^#]*))?(?:#(.*))?)/,loose:/^(?:(?![^:@]+:[^:@\/]*@)([^:\/?#.]+):)?(?:\/\/)?((?:(([^:@]*)(?::([^:@]*))?)?@)?([^:\/?#]*)(?::(\d*))?)(((\/(?:[^?#](?![^?#\/]*\.[^?#\/.]+(?:[?#]|$)))*\/?)?([^?#\/]*))(?:\?([^#]*))?(?:#(.*))?)/}.strict,g=a(b.location.href);return{parse:function(a,b){var f=c;f.setAttribute("href",a);var g=(f.pathname.match(d)||[])[1]||"",h=g.split(".").map(function(a){return a.toLowerCase()});g=decodeURIComponent(g.replace(e,"")),h.shift();var i=h[h.length-1]||"",j={url:a,protocol:f.protocol,host:f.host,port:f.port,pathname:f.pathname,filename:g,ext:i,exts:h,hash:f.hash,search:f.search};return j.port||delete j.port,b&&(j.query={},f.search.replace(/^\?/,"").split(/\&/).forEach(function(a){a=a.split("="),j.query[a[0]]=a[1]})),j},parseParamString:function(a){a=a.replace(/^[#?]{1}/,"");var b=a.split("&"),c={};return b.forEach(function(a){var b=a.split("=");X.defined(b[0])&&X.defined(b[1])&&(c[b[0]]=decodeURIComponent(b[1].replace(/\+/g," ")))}),c},format:function(a){if(a=Object.create(a),a.query){a.search=[];for(var b in a.query)"undefined"!=typeof a.query[b]?a.search.push(b+"="+encodeURIComponent(a.query[b])):a.search.push(b);a.search="?"+a.search.join("&"),delete a.query}for(var d in a)c[d]=a[d];var e=c.href;return e},parse0:a,resolve:function(b,c){b=a(b),c||(c=g);var d=b[1],e=b[2],f=b[9],h=b[12],i=b[13];if(!d&&(d=c[1],!e))if(e=c[2],f){if("/"!==f.charAt(0)){var j=c[10]||"/";f=j+f}}else f=c[9],h||(h=c[12]);var k=d+"://"+e+f;return h&&(k+="?"+h),i&&(k+="#"+i),k},getHost:function(b){return a(b)[6]||""},getMediaType:function(b){var c=a(b)[11]||"";if(!c)return"";var d=c.split("."),e=d.length-1;if(0>=e)return"";var f=d[e].toLowerCase();return Q[f]}}}(),W={sendMessage:function(a,b){try{chrome.runtime.sendMessage(a,b)}catch(c){return!1}return!0}},X={SIZES:["B","KB","MB","GB","TB","PB"],_BASE:-1!==navigator.appVersion.indexOf("Win")?1024:1e3,xmlParser:new DOMParser,endsWith:function(a,b){var c=a.length-b.length;return c>=0&&a.indexOf(b,c)===c},hash:function(a,b){if(b=0|b,0===a.length)return b;var c,d;for(c=0,d=a.length;d>c;c++)b=(b<<5)-b+a.charCodeAt(c),b|=0;return b},query:function(a,c){return c=c||b,c.querySelector(a)},queryAll:function(a,c){return c=c||b,X.toArray(c.querySelectorAll(a))},findParent:function(a,b){for(;null!==a&&!a.classList.contains(b);)a=a.parentNode;return a},nearestParent:function(a,c){for(;null!==a&&a!==b&&!a.matches(c);)a=a.parentNode;return a},closest:function(a,b){return a.matches(b)?[a]:X.queryAll(b,a)},toArray:function(a){return Array.prototype.slice.call(a)},unique:function(a){var b=[];return Array.isArray(a)?(a.forEach(function(a){-1===b.indexOf(a)&&b.push(a)}),b):a},extend:function(a,b){var c=function(){};c.prototype=a.prototype,b.prototype=new c,b.prototype.constructor=b,b._super=a.prototype},extendObject:function(a){return Array.prototype.forEach.call(Array.prototype.slice.call(arguments,1),function(b){if(b)for(var c in b)a[c]=b[c]}),a},isMatches:function(a,b){var c,d,e;if(Array.isArray(a)){for(c=0;c<a.length;++c)if(X.isMatches(a[c],b))return!0;return!1}for(b=Array.isArray(b)?b:[b],c=0,d=b.length,e;d>c;++c)if(e=b[c],"string"==typeof e&&-1!==a.indexOf(e)||e instanceof RegExp&&a.match(e))return!0;return!1},_sendBackgroundRequest:function(a,b,c,d){var e=new $;return chrome.runtime.sendMessage({requestType:"make_http_request",method:a,url:b,params:c,headers:d},function(a){e[a.success?"resolve":"reject"](a.data)}),e},send:function(a,b,c,d){var e=new $,f=null;if(X.IS_CONTENT_SCRIPT)return X._sendBackgroundRequest(a,b,c,d);try{var g=new XMLHttpRequest;if(g.open(a,b,!0),g.setRequestHeader("Cache-Control","no-cache"),"object"==typeof c&&(f=Object.keys(c).map(function(a){return a+"="+c[a]}).join("&")),"object"==typeof d)for(var h in d)g.setRequestHeader(h,d[h]);"POST"===a&&(g.setRequestHeader("Content-type","application/x-www-form-urlencoded"),f&&g.setRequestHeader("Content-Length",f.length)),g.onload=function(){e.resolve(this.responseText)},g.onerror=function(){e.reject()},g.send(f)}catch(i){e.reject()}return e},get:function(a,b){return X.send("GET",a,{},b)},post:function(a,b,c){return X.send("POST",a,b,c)},_getSize:function(a){function b(a){d&&d[a?"resolve":"reject"](a),d=null,c.abort(),clearTimeout(e),e=null}var c=new XMLHttpRequest,d=new $,e=null,f=1e4;return c.open("GET",a),c.setRequestHeader("Cache-Control","no-cache"),c.url=a,c.onreadystatechange=function(){if(!(this.readyState<2)){var a=null;try{a=+this.getResponseHeader("Content-Length"),Number.isNaN(a)&&(a=null)}catch(c){}(null!==a||200===this.status)&&(200!==this.status&&(a=null),b(a))}},c.send(null),e=setTimeout(b,f),d},getSize:function(b){var c=new $,d=a.cache;return d.get(b).success(function(a){a?(c.resolve(a),d.put(b,a)):c.bind(X._getSize(b)).success(d.put.bind(d,b))}).fail(function(){c.bind(X._getSize(b)).success(d.put.bind(d,b))}),c},beautifyFileSize:function(a){if(null===a||"undefined"==typeof a)return"???";for(var b=X._BASE,c=0;c<X.SIZES.length&&a>=b;++c,a/=b);return Math.round(10*a)/10+X.SIZES[c]},detectMediaTypeAndExt:function(a,b){b=b||"";var c=["application/x-mpegurl","application/vnd.apple.mpegurl","audio/x-mpegurl","audio/mpegurl"];if(-1!==c.indexOf(b))return a.type="video",a.ext="m3u8",a;var d=X.getMediaType(b,a.exts);return d&&P[d]&&(a.type=d,a.ext=this._findIntersection(a.exts,P[d].extensions)||X.extByContentType(b,d)||a.ext),a},getMediaType:function(a,b){var c;for(var d in P){if(c=P[d],a.match(c.rgxp))return d;if(Array.isArray(b)&&X._findIntersection(b,c.extensions)||-1!==c.extensions.indexOf(b))return d}return null},_findIntersection:function(a,b){for(var c=a.concat(b),d={},e=0;e<c.length;++e){var f=c[e];if(d[f])return f;d[f]=!0}return null},extByContentType:function(a,b){var c=P[b].ctype2extension;for(var d in c)if(-1!==a.indexOf(d))return c[d];return null},call:function(a,b){if(a&&!(a.length<=0))for(var c=[].slice.call(arguments,2),d=0;d<a.length;d++)a[d].apply(b,c)},isTrue:function(a){return!!a},noop:function(){},defined:function(a){return"undefined"!=typeof a},notNull:function(a){return null!==a},debounce:function(a,b,c){var d;return function(){function e(){c||a.apply(f,g),d=null}var f=this,g=arguments;d?clearTimeout(d):c&&a.apply(f,g),d=setTimeout(e,b||100)}},unescapeHTML:function(){var a;return function(c){a=a||b.createElement("div"),a.innerHTML=(""+c).replace(/</g,"&lt;");var d=a.firstChild.textContent;return a.innerHTML="",d}}(),replaceEntities:function(a){var b={"&amp;":"&"};return String(a).replace(/&amp;/g,function(a){return b[a]})},xpath:function(){function a(a){return a&&a.id&&!/\d/.test(a.id)?"//"+a.tagName+'[@id="'+a.id+'"]':c(a)}function c(a){for(var b=[];a&&a.nodeType==Node.ELEMENT_NODE;a=a.parentNode){for(var c=0,d=!1,e=a.previousSibling;e;e=e.previousSibling)e.nodeType!=Node.DOCUMENT_TYPE_NODE&&e.nodeName==a.nodeName&&++c;for(e=a.nextSibling;e&&!d;e=e.nextSibling)e.nodeName==a.nodeName&&(d=!0);var f=(a.prefix?a.prefix+":":"")+a.localName,g=c||d?"["+(c+1)+"]":"";b.splice(0,0,f+g)}return b.length?"/"+b.join("/"):null}function d(a,c){return c=c||b,b.evaluate(a,c,null,XPathResult.FIRST_ORDERED_NODE_TYPE,null).singleNodeValue}return{forElement:a,find:d}}(),dom:function(){function a(a,b){return Object.keys(b).forEach(function(c){a.setAttribute(c,b[c])}),a}function c(a,b){return Object.keys(b).forEach(function(c){a.style[c]=b[c]}),a}function d(a){var c=b.createElement("div"),d=b.createDocumentFragment();return c.innerHTML=a,[].slice.call(c.childNodes).forEach(d.appendChild,d),c=null,d}function e(a){if(!(a instanceof HTMLElement))return{width:0,height:0};a.matches("embed")&&a.parentNode.matches("object")&&(a=a.parentNode);var b=a.querySelector("embed");return b&&!T.check(b)&&b.offsetWidth&&b.offsetHeight&&(a=b),{width:a.offsetWidth,height:a.offsetHeight}}function f(a){return a.split(";").reduce(function(a,b){var c=b.indexOf(":");if(-1!==c){var d=b.substr(0,c).trim(),e=b.substr(c+1);a[d]=e}return a},{})}function g(a){return Object.keys(a).map(function(b){return b+":"+a[b]}).join(";")}function h(a){for(var b={top:0,left:0,height:a.offsetHeight,width:a.offsetWidth};a;)b.left+=a.offsetLeft,b.top+=a.offsetTop,a=a.offsetParent;return b}return{attr:function(b,c){Array.isArray(b)?b.forEach(function(b){a(b,c)}):a(b,c)},style:function(a,b){Array.isArray(a)?a.forEach(function(a){c(a,b)}):c(a,b)},setStyleAttr:function(a,b){var c=function(a){var c=a.getAttribute("style")||"",d=f(c);for(var e in b)b.hasOwnProperty(e)&&(d[e]=b[e]);var h=g(d);c!==h&&a.setAttribute("style",h)}.bind(this);Array.isArray(a)?a.forEach(c):c(a)},parseHTML:d,getOffset:h,getEmbedSize:e}}(),google:function(){var a="com|ac|ad|ae|al|am|as|at|az|ba|be|bf|bg|bi|bj|bs|bt|by|ca|cc|cd|cf|cat|cg|ch|ci|cl|cm|cn|cv|cz|de|dj|dk|ee|fi|dm|dz|es|fm|fr|ga|ge|gf|gg|gl|gm|gp|gr|gy|hn|hr|ht|hu|ir|iq|ie|im|io|is|it|je|ki|kg|jo|kz|la|lt|lu|lv|li|lk|md|me|mg|mk|ml|mn|ms|mu|mv|mw|nl|no|nr|nu|pl|ne|pn|ps|pt|ro|rs|ru|rw|sc|se|sh|si|sn|sm|so|tk|tl|tm|to|tn|st|sk|tt|td|vu|ws|vg|tg|us",b="th|id|il|in|jp|ke|ma|kr|mz|ls|nz|tz|ug|uk|uz|ve|vi|za|zm|zw|ao|ck|bw|cr",c="pr|py|qa|sa|sb|sg|sl|sv|tj|tn|tr|tw|gh|gi|gt|hk|jm|kw|lb|lc|ly|mm|mt|mx|my|na|nf|ng|ni|np|om|pa|pe|ph|pk|pg|ua|uy|vc|vn|af|ag|ai|ar|au|bd|bh|bn|bo|br|bz|kh|co|cu|cy|do|ec|eg|et|fj",d=new RegExp("^(www\\.)?google\\.(("+a+")|(co((\\.("+b+"))|m\\.("+c+"))))$","i"),e=/[&?]q=[^&]/i;return{isSERPHost:function(a){return Boolean(a.match(d))},isSERPRequest:function(a){var b=V.parse(a);return Boolean(this.isSERPHost(b.host)&&b.pathname.match(/\/s(earch)?/i)&&b.search.match(e))},getSearchParams:function(a){var b=V.parse(a),c=V.parseParamString(b.search),d=V.parseParamString(b.hash||"#"),e=X.defined(d.q);return{_rawSearch:c,_rawHash:d,q:e?d.q:c.q||null,s:e?d.start||0:c.start||0,tbm:e?d.tbm:c.tbm||null,isXHR:c.tch,isHash:e}}}}()},Y=chrome.i18n.getMessage;try{chrome.extension.getBackgroundPage(),X.IS_CONTENT_SCRIPT=!1}catch(Z){X.IS_CONTENT_SCRIPT=!0}try{X.IS_INCOGNITO=chrome.extension.inIncognitoContext}catch(Z){X.IS_INCOGNITO=!1}var $=function(a){if(0===arguments.length)return this._init(),this;if(a instanceof $)return a;var b=new $;return b.resolve(a),b};$.RUNNING=0,$.RESOLVED=1,$.FAILED=2,$.prototype={constructor:$,_init:function(){this._results=[],this._subscribers=[],this.state=$.RUNNING},_notify:function(){var a=this;this._subscribers.forEach(function(b){b.apply(a,a._results)}),this._subscribers=[]},resolve:function(){return this.state=$.RESOLVED,this._results=arguments,this._notify(),this},reject:function(){return this.state=$.FAILED,this._results=arguments,this._notify(),this},subscribe:function(a){this.state!==$.RUNNING?a.apply(this,this._results):this._subscribers.push(a)},done:function(a){return this.subscribe(a),this},success:function(a){var b=this;return this.subscribe(function(){b.state===$.RESOLVED&&a.apply(b,b._results)}),this},fail:function(a){var b=this;return this.subscribe(function(){b.state===$.FAILED&&a.apply(b,b._results)}),this},bind:function(a){return a=new $(a),a.success(this.resolve.bind(this)).fail(this.reject.bind(this)),this}},$.when=function(){var a=[];return a=Array.isArray(arguments[0])?arguments[0]:X.toArray(arguments),new $.When(a)},$.When=function(a){this._doneCallbacks=[],this._successCallbacks=[],this._failCallbacks=[],this._state=$.RUNNING,this._thingsToDo=a.length,this._results=Array(this._thingsToDo),this._init(a)},$.When.prototype={constructor:$.When,_init:function(a){var b=this;a.forEach(function(a,c){a=new $(a),a.subscribe(function(){a.state===$.FAILED&&(b._state=$.FAILED),b._results[c]=X.toArray(arguments),b._thingsToDo--,b._checkIsDone()})}),this._checkIsDone()},_checkIsDone:function(){if(0!==this._thingsToDo)return!1;var a=[];this._results.forEach(function(b){a=a.concat(b)}),this._state===$.FAILED?this._runCallbacks(this._failCallbacks,a):this._runCallbacks(this._successCallbacks,a),this._runCallbacks(this._doneCallbacks,a),this._doneCallbacks=[],this._successCallbacks=[],this._failCallbacks=[]},_runCallbacks:function(a,b){a.forEach(function(a){a.apply(this,b)})},done:function(a){return this._doneCallbacks.push(a),this._checkIsDone(),this},success:function(a){return this._successCallbacks.push(a),this._checkIsDone(),this},fail:function(a){return this._failCallbacks.push(a),this._checkIsDone(),this}},$.chain=function(){function a(b){if(!b.length)return c.resolve.apply(c,d);var e,f=b.shift();"function"==typeof f?(e=$(f()),e.done(function(c){d.push(c),a(b)})):(d.push(f),a(b))}var b,c=new $,d=[];return b=Array.isArray(arguments[0])?arguments[0]:X.toArray(arguments),a(b),c};var _=function(){};_.QL_HIGH="High",_.QL_MEDIUM="Medium",_.QL_LOW="Low",_.QL_VIDEO_ULTRAHD="Ultra HD",_.QL_VIDEO_FULLHD="Full HD",_.QL_VIDEO_HD="HD",_.QL_VIDEO_STANDARD="Standard",_.QL_VIDEO_MEDIUM="Medium",_.QL_VIDEO_SMALL="Small",_.QL_VIDEO_MOBILE="Mobile";var aa={};aa[_.QL_VIDEO_ULTRAHD]={quality:_.QL_HIGH,qualityIndex:6,size:3072,videoTitle:"Ultra HD",itag:[38,138]},aa[_.QL_VIDEO_FULLHD]={quality:_.QL_HIGH,qualityIndex:5,size:1080,videoTitle:"Full HD",audioTitle:"High",itag:[37,46,137],vimeoQuality:"",zingTag:"f1080",dailymotionQuality:"hd1080",clipvnQuality:"5"},aa[_.QL_VIDEO_HD]={quality:_.QL_HIGH,qualityIndex:4,size:720,videoTitle:"HD",audioTitle:"High",itag:[22,45,120,136,247],zingTag:["f720","hq"],vimeoQuality:"hd",dailymotionQuality:["hd","hd720"],facebookQuality:["hd_src","hd_src_no_ratelimit"],JWQuality:"highquality",clipvnQuality:"4"},aa[_.QL_VIDEO_STANDARD]={quality:_.QL_MEDIUM,qualityIndex:3,size:480,videoTitle:"Standard",audioTitle:"Normal",itag:[44,35,135,244],zingTag:["f480"],dailymotionQuality:"hq",vimeoQuality:"sd",facebookQuality:["sd_src","sd_src_no_ratelimit"],JWQuality:"location",clipvnQuality:"3"},aa[_.QL_VIDEO_MEDIUM]={quality:_.QL_MEDIUM,qualityIndex:2,size:360,videoTitle:"Medium",audioTitle:"Normal",itag:[18,43,34,134,243],vimeoQuality:"",dailymotionQuality:"sd",zingTag:["source","f360"],JWQuality:"lowquality",clipvnQuality:"2"},aa[_.QL_VIDEO_SMALL]={quality:_.QL_LOW,qualityIndex:1,size:240,videoTitle:"Small",audioTitle:"Low",itag:[36,5,133,242],dailymotionQuality:"ld",vimeoQuality:"mobile",zingTag:["f","f240"],clipvnQuality:"1"},aa[_.QL_VIDEO_MOBILE]={quality:_.QL_LOW,qualityIndex:0,size:144,videoTitle:"Mobile",audioTitle:"Low",itag:[17,6,160],vimeoQuality:"",clipvnQuality:"0"};var ba={};ba[_.QL_HIGH]=aa[_.QL_VIDEO_ULTRAHD].qualityIndex,ba[_.QL_MEDIUM]=aa[_.QL_VIDEO_STANDARD].qualityIndex,ba[_.QL_LOW]=aa[_.QL_VIDEO_SMALL].qualityIndex,_.prototype={constructor:_,DEFAULT_QUALITY_LEVEL:_.QL_HIGH,QUALITY_LEVELS:[_.QL_HIGH,_.QL_MEDIUM,_.QL_LOW],VIDEO_QUALITY_LEVELS:[_.QL_VIDEO_ULTRAHD,_.QL_VIDEO_FULLHD,_.QL_VIDEO_HD,_.QL_VIDEO_STANDARD,_.QL_VIDEO_MEDIUM,_.QL_VIDEO_SMALL,_.QL_VIDEO_MOBILE],DEFAULT_QUALITY_TYPE:_.QL_VIDEO_STANDARD,QUALITY_TYPES:aa,getFacebookQuality:function(a){return this._getVideoQuality("facebookQuality",a).videoTitle},getDailymotionQuality:function(a){return this._getVideoQuality("dailymotionQuality",a).videoTitle},getZingVideoQuality:function(a){return this._getVideoQuality("zingTag",a).videoTitle},getZingAudioQuality:function(a){return this._getVideoQuality("zingTag",a).audioTitle},getYoutubeQuality:function(a,b){var c=this._getVideoQuality("itag",+a,b);return c&&c.videoTitle},getVimeoQuality:function(a){return this._getVideoQuality("vimeoQuality",a).videoTitle},getClipvnQuality:function(a){return this._getVideoQuality("clipvnQuality",a).videoTitle},getJWQuality:function(a){return this._getVideoQuality("JWQuality",a).videoTitle},_getVideoQuality:function(a,b,c){for(var d in this.QUALITY_TYPES){var e=this.QUALITY_TYPES[d][a];if(Array.isArray(e)||(e=[e]),-1!==e.indexOf(b))return this.QUALITY_TYPES[d]}return c?null:this.QUALITY_TYPES[this.DEFAULT_QUALITY_TYPE]},_getTypeByQualityType:function(a){for(var b in this.QUALITY_TYPES)if(a===b||a===this.QUALITY_TYPES[b].videoTitle||a===this.QUALITY_TYPES[b].audioTitle)return this.QUALITY_TYPES[b];return this.QUALITY_TYPES[this.DEFAULT_QUALITY_TYPE]},_calculateWeight:function(a,b){var c=P[a.get("type")].extensions,d=c.indexOf(a.get("ext")),e=this._getTypeByQualityType(a.get("quality")).qualityIndex,f=d/c.length+Math.abs(b-e)/7;return f},getQualityLevelByType:function(a){return Object.keys(this.QUALITY_TYPES).indexOf(this._getTypeByQualityType(a).videoTitle)},getVideoQualityIndex:function(a){return this.VIDEO_QUALITY_LEVELS.concat().reverse().indexOf(a)},getOneClickQualityIndex:function(a){return this.QUALITY_LEVELS.concat().reverse().indexOf(a)},getQualityLevelByQualityType:function(a){return this._getTypeByQualityType(a).quality},chooseBestDownload:function(a,b,c){var d=a.length;if(c)for(var e=0;d>e;++e){var f=a[e];if(f.extQuality()===c)return f}b=b||this.DEFAULT_QUALITY_LEVEL;for(var g=ba[b],h=1e3,i=-1,e=0;d>e;++e){var f=a[e],j=this._calculateWeight(f,g);h>j&&(h=j,i=e)}return a[i]}},a.quality=new _;var ca=function(a){this._date=Date.now(),this._values={},this._sizePromise=null,this._hls=!1,this.merge(a)};ca.MAX_FILE_NAME_LENGTH=128,ca.isValidData=function(a){if(U.M3U8&&d(a.ext))return!0;var b=P[a.type];return b&&-1!==b.extensions.indexOf(a.ext)},ca.prototype._createFieldGetter=function(a){this[a]=function(){return this.get(a)}},ca.prototype._generateFakeName=function(){return[this._values.type,e(this._values)].join("-").replace(/-+/g,"-")},ca.prototype.get=function(a){return"string"==typeof a||"number"==typeof a?this._values[a]:void 0},ca.prototype.set=function(a,b){return"string"!=typeof a&&"number"!=typeof a||this._values[a]===b||(this._values[a]=b,this[a]||this._createFieldGetter(a)),this},ca.prototype.merge=function(a){var b=a instanceof ca?a._values:a;for(var c in b)this.set(c,"undefined"!=typeof b[c]?b[c]:b[c]||null);return d(this.get("ext"))&&(this.set("ext","mp4"),this._hls=!0),this},ca.prototype.getName=function(){return X.replaceEntities(this._values.title||this._values.filename||this._generateFakeName())},ca.prototype.title=function(){return this.getName().substr(0,ca.MAX_FILE_NAME_LENGTH)},ca.prototype.getFilename=function(){var a=this.getName(),b="."+this._values.ext;return X.endsWith(a,b)||(a+=b),a=a.replace(/\s+/g," ").replace(/[\/\\:*?"<>|\u200c\u200d]/g,"-"),a.substr(0,ca.MAX_FILE_NAME_LENGTH)},ca.prototype.extQuality=function(){return(this.get("ext")||"")+"/"+(this.get("quality")||"")},ca.prototype.size=function(){var a=this.get("size");return a?"("+X.beautifyFileSize(a)+")":""},ca.prototype.getSize=function(){function a(a){a&&e.push(X.getSize(a))}var b=this;if(b._sizePromise)return b._sizePromise;var c=new $;b._sizePromise=c;var d=b.get("size")||0;if(d||b._hls)return c.resolve(d),c;var e=[],f=b.get("url");if("object"==typeof f){var g=[f.audioUrl,f.videoUrl];g.forEach(a)}else a(f);e.length>0?e=1===e.length?e[0]:$.when(e):(e=new $,e.reject());var h=b.get("altUrl");return e.success(function(){for(var a=arguments,d=0,e=a.length-1;e>=0;e--)d+=a[e];b.set("size",d),c.resolve(d)}).fail(function(){if(h){var a=X.getSize(h);a.success(function(a){b.set("size",a)}),c.bind(a)}else c.reject(null)}),c};var da=function(a,b){this.api=Ha,this._uninitialized=!0,X.defined(b)||(b=-1),this._tid=b,this.data=[],this.setMediaData(a)};da.prototype={setMediaData:function(a){var b=this,c=new $;return a?($(a).done(function(a){if(b._uninitialized&&0===a.length)return b._uninitialized=!1,void c.reject(b,!0);b._uninitialized=!1;var d=b.data,f=new Array(d.length),g=d.map(function(a){return a.id()});a.forEach(function(a){a.id=a.id||e(a);var c,h=g.indexOf(a.id);-1===h?(g.push(a.id),c=new ca(a),d.push(c)):(h<f.length&&(f[h]=!0),c=d[h],c.merge(a)),c._ditem=b.api.item(b._tid,a.id)});for(var h=f.length!==d.length,i=f.length-1;i>=0;i--)f[i]||(h=!0,d.splice(i,1));c.resolve(b,h)}),c):(c.reject(this,!1),c)},getMediaCount:function(){var a=this.data;if(0===a.length)return 0;for(var b=0,c={},d=0;d<a.length;++d){var e=a[d],f=e.title()+e.type();c[f]||(c[f]=!0,++b)}return b},getMedia:function(a){return this.data.filter(function(b){return b.id()==a})[0]},getMediaGroup:function(a){return this.data.filter(function(b){return-1!==a.indexOf(b.id())})},download:function(a){var b=this.getMedia(a);if(b){var c={id:b.id(),url:b.url(),filename:b.getFilename(),referrer:b.referrer(),hls:b._hls},d=this.api.download(this._tid,c);return d.success(function(a){b._ditem=a}),d}},onChange:function(a){this.api.onChange(this._tid,a)},group:function(){return i(f(this.data,["type","title","ext","quality"]))},isOneMedia:function(){for(var a,b,c=this.data,d={},e=0,f=0;e<c.length&&1>=f;++e)if(a=c[e],b=a.title()+a.type(),!d[b]&&(d[b]=!0,++f>1))return!1;return!0}};var ea=function(){this._storage=chrome.storage.local,this._options={},this._default={detach_enabled:!0,on_page_buttons:!0,min_stream_size:30720,prefer_last_quality:!0};var a=this;chrome.storage.onChanged.addListener(function(b,c){if("local"===c)for(var d in b)a._options[d]=b[d].newValue})};ea.prototype={load:function(){var a=new $,b=this;return this._storage.get(null,function(c){b._options=c,a.resolve(c)}),a},set:function(a,b){var c={};("string"==typeof a||"number"==typeof a&&"undefined"!=typeof b)&&(c[a]=b,this._options[a]=b,this._storage.set(c))},get:function(a){return a in this._options?this._options[a]:this._default[a]}},function(){var c=function(){};c.SOURCE_POPUP_PAGE=0,c.SOURCE_OPTIONS_PAGE=10,c.SOURCE_CONTENT_SCRIPT=20,c.SOURCE_BACKGROUND_PAGE=30,c.prototype={LEGACY_METRICS_NAME_MAP:{ButtonClicked:"TryItNowButtonClicked",CheckBoxClicked:"OneClickCheckbox"},get source(){if(!chrome.extension.getBackgroundPage)return c.SOURCE_CONTENT_SCRIPT;switch(b.location.pathname){case"/popup.html":return c.SOURCE_POPUP_PAGE;case"/options.html":return c.SOURCE_OPTIONS_PAGE;case"/background.html":return c.SOURCE_BACKGROUND_PAGE;default:return}},_getFullName:function(a){return"Savior."+(this.LEGACY_METRICS_NAME_MAP[a]||a)},_getTotalValue:function(a,b,c){return c||"PageShown"===a||"number"!=typeof b?b:b+this.source},_doLog:function(a,b,d){var e=this._getFullName(b);if(this.source===c.SOURCE_CONTENT_SCRIPT)chrome.runtime.sendMessage({requestType:"metrics",method:"log",params:{name:b,value:d}});else if(chrome.metricsPrivate)switch(a){case"recordSmallCount":chrome.metricsPrivate.recordSmallCount(e,d);break;case"recordValue":chrome.metricsPrivate.recordValue({metricName:e,type:"histogram-linear",min:0,max:1e3,buckets:1002},d);break;case"recordSerpData":case"recordClickData":chrome.metricsPrivate[a](d)}},_getMethodByName:function(a){switch(a){case"Refr":case"RefrSE":case"RefrFE":return"recordValue";case"SerpData":return"recordSerpData";case"SerpClickData":return"recordClickData";default:return"recordSmallCount"}},log:function(a,b,c){var d=this._getMethodByName(a),e=this._getTotalValue(a,b,c);this._doLog(d,a,e)},logFromContentScript:function(a,b){this.log(a,b,!0)},PAGE_WELCOME_SCREEN:0,PAGE_DOWNLOADS_LIST:1,PAGE_ONE_CLICK_DOWNLOAD:2,PAGE_NO_MEDIA_FOUND:3,PAGE_OPTIONS:4,PAGE_CONTENT_SHOW_CONTROLS:5,PAGE_CONTENT_NO_MEDIA:9,DOWNLOAD_AUTO:0,DOWNLOAD_BUTTON:1,DOWNLOAD_ALL:2,DOWNLOAD_REQUEST_SIZE:3,DOWNLOAD_REQUEST_SIZE_FAILED:4,DOWNLOAD_CANCELED:7,BUTTON_MAIN:0,BUTTON_TRY_IT_NOW:1,BUTTON_SHOW_DOWNLOADS:2,BUTTON_HIDE_DOWNLOADS:3,BUTTON_DOWNLOAD_ALL:4,BUTTON_CHECK_ALL:5,BUTTON_CHECK_NONE:6,BUTTON_FAKE_QUALITY:7,BUTTON_DETACH:8,CHECK_BOX_ENABLE_ONE_CLICK:0,CHECK_BOX_SHOW_ON_PAGE_BUTTONS:2,CHECK_BOX_PREFER_LAST_QUALITY:4,CHECK_BOX_DETACH_ENABLED:6,PIP_DETACH_CLICK:0,PIP_RESTORE_CLICK:1,PIP_SITE_LINK_CLICK:2},a.metrics=new c}();var fa,ga=function(){var c=function(a,b){var c=new Set(["string","number","boolean","undefined"]),d=function(a){if(null===a||c.has(typeof a))return a;if(Array.isArray(a))return a.map(d);if("object"==typeof a&&Object.getPrototypeOf(a)===Object.prototype){var b={};return Object.keys(a).forEach(function(c){b[c]=d(a[c])}),b}return null},e={report:function(b,c){b(Array.isArray(c)?d(c.reduce(function(a,b){return a&&a[b]},a)):null)},eval:function(a,b){var c=null;try{c=new Function(b).call(this)}catch(e){c=e.toString()}a(d(c))}};a.addEventListener("message",function(c){if(c.origin===location.origin&&c.data&&c.data.port===b&&"coc_crx2page"===c.data.type){const d=c.data.id;var f=c.data.data,g=function(c){c={data:c,id:d,port:b,type:"coc_page2crx"},a.postMessage(c,location.origin)};"method"in f&&f.method in e&&e[f.method].apply(e,[g].concat(f.args))}})},d=function(){this.port=Math.floor(Math.random()*Math.pow(2,32)),this.msgId=0,this._promises={},this._initPage(),a.addEventListener("message",this._listener.bind(this))};return d.prototype={send:function(b){b={data:b,id:this.msgId,port:this.port,type:"coc_crx2page"};var c=new $;return this._promises[this.msgId]=c,this.msgId++,a.postMessage(b,location.origin),c},_initPage:function(){var a=b.head||b.body;if(a){var d=b.createElement("script"),e="("+c.toString()+")(window,"+this.port+")";d.innerText=e,a.appendChild(d),setTimeout(function(){a.removeChild(d)},100)}},_listener:function(a){if(a.origin===location.origin&&a.data&&a.data.port===this.port&&"coc_page2crx"===a.data.type){var b=a.data;try{this._promises[b.id]instanceof $&&this._promises[b.id].resolve(b.data)}finally{delete this._promises[b.id]}}}},d}();b.addEventListener("DOMContentLoaded",function(){fa=new ga});var ha=X.query.bind(X),ia=X.queryAll.bind(X),ja=function(a,b,c,d,e){this._node=b,this._docId=d,this._index=e,this._data=this._extractData(b,c),this._validateAndSetDataType(a),this._attachClickHandler()};ja.prototype={TITLE_SELECTOR:"h3",VISIBLE_URL_SELECTOR:"cite",LINK_SELECTOR:"h3 a:not([id])",DESC_SELECTOR:".st",_extractData:function(a,b){var c=ha(this.TITLE_SELECTOR,a),d=ha(this.VISIBLE_URL_SELECTOR,a),e=ha(this.DESC_SELECTOR,a),f=ha(this.LINK_SELECTOR,a),g={url:j(f,"href"),visibleUrl:j(d,"textContent"),position:b,title:j(c,"textContent"),description:j(e,"textContent"),addRawContent:""};return g},_validateAndSetDataType:function(a){this._isDataValid(this._data)?this._data.type=a:this._data.type="unknown"},_isDataValid:function(a){return Boolean(a.title&&a.visibleUrl&&a.url&&a.description)},_attachClickHandler:function(){this._clickHandler=this._onClick.bind(this),this._node.addEventListener("click",this._clickHandler,!0)},_onClick:function(a){var b,c,d=X.nearestParent(a.target,"a");return d&&d.nodeType===Node.ELEMENT_NODE&&(b=d.getAttribute("href"),b.trim().match(/^(#|javascript:)/)||(c=d.dataset.href||d.href||this.data.url||"",gserp.triggeResultClicked(),this._reportClick(c))),!0},_reportClick:function(a){metrics.log("SerpClickData",{serpId:this._docId,itemIndex:this._index,timestamp:Date.now(),url:a})},_reportClickConsole:function(a){},destroy:function(){this._node.removeEventListener(this._clickHandler),this._node=null,this._data=null},get data(){return this._data},renderToConsole:function(){this.data.type;this.data.addRawContent}};var ka=function(){ja.apply(this,arguments)};ka.prototype={__proto__:ja.prototype,DESC_SELECTOR:".ads-creative",LINK_SELECTOR:"h3 a:last-child",NOT_RAW_CONTENT_SELECTOR:"h3, .ads-visurl, .ads-creative",_extractAdditionalContent:function(){var a="";return X.toArray(this._node.children).forEach(function(b){b.matches(this.NOT_RAW_CONTENT_SELECTOR)||(a+=b.outerHTML+"\n")}.bind(this)),a},_extractData:function(){var a=ja.prototype._extractData.apply(this,arguments),b=this._extractAdditionalContent();return a.addRawContent=b,a}};var la={"top-ad":ka,"bottom-ad":ka,"side-ad":ka},ma=function(a,b,c,d,e){var f=la[a]||ja;return new f(a,b,c,d,e)};GoogleSERPResults=function(){this._items=[],this._isReported=!1,this._scrape()},GoogleSERPResults.VERSION=1,GoogleSERPResults.prototype={ITEMS_PER_PAGE:10,_addItem:function(a,b,c){var d=this._items.length;this._items.push(new ma(a,b,c,this._docId,d))},_scrapeAds:function(a){var b={"top-ad":"#tads > ol > li","bottom-ad":"#tadsb > ol >li","side-ad":"#mbEnd > ol > li"},c=ia(b[a]);return c.forEach(function(b,c){this._addItem(a,b,c)}.bind(this)),c.length},_scrapeSER:function(a,b){var c=X.toArray(a.children).filter(function(a){return a.nodeType===Node.ELEMENT_NODE});return c.forEach(function(a,c){this._addItem("organic",a,b+c)}.bind(this)),c.length},_scrapeResults:function(){var a=ia("#ires ol > *"),b=0,c="hr";return a.forEach(function(a,d){if(""!==a.textContent.trim()&&!a.matches(c)){var e=a.matches(".srg")?a:a.querySelector(".srg");e?b+=this._scrapeSER(e,b):this._addItem("organic",a,b++)}}.bind(this)),b},_generateDocId:function(){return Date.now().toString(32)+"-"+Math.random().toString(32).slice(2)},_parseQuery:function(){var a=ha(".qs"),b=ha(".spell_orig b");return b?b.textContent.trim():a&&a.href?X.google.getSearchParams(a.href).q:null},_parsePage:function(){var a=ha("#nav .cur");return a?parseInt(a.textContent.trim()):1},_scrape:function(a){this._docId=this._generateDocId(),this._q=this._parseQuery(),this._s=(this._parsePage()-1)*this.ITEMS_PER_PAGE,this._scrapeAds("top-ad"),this._scrapeResults(),this._scrapeAds("bottom-ad"),this._scrapeAds("side-ad")},_metricsReport:function(){var a={type:"gsearch",id:this._docId,searchQuery:this._q,searchStart:this._s,timestamp:Date.now(),items:this._items.map(k("data")),version:GoogleSERPResults.VERSION};metrics.log("SerpData",a)},_consoleReport:function(){this._items.forEach(l("renderToConsole"))},isSameSearchAs:function(a){return a&&a.q===this._q&&a.s==this._s},report:function(){this._isReported||(this._isReported=!0,this._metricsReport())},destroy:function(){this._items.forEach(l("destroy"))}};var ha=X.query.bind(X);GoogleSERPPage=function(){X.google.isSERPHost(location.host)&&(this._lastQs=null,this._timerId=null,this._currentQParams=X.google.getSearchParams(location.href),a.addEventListener("popstate",this._onPopState.bind(this)),this._startPolling())},GoogleSERPPage.prototype={POLLING_INTERVAL:200,get _isOrganic(){return!X.google.getSearchParams(location.href).tbm},_clearResults:function(){this._currentResults&&this._currentResults.destroy(),this._currentResults=null,this._currentQParams=null},_reportResultsIfQueriesMatch:function(){this._currentResults&&this._currentResults.isSameSearchAs(this._currentQParams)&&this._currentResults.report()},_onPopState:function(a){return this._isOrganic?(this._currentQParams=X.google.getSearchParams(location.href),void this._reportResultsIfQueriesMatch()):void this._clearResults()},_onResultsRendered:function(a){return this._isOrganic?(this._currentResults&&this._currentResults.destroy(),this._currentResults=new GoogleSERPResults,void this._reportResultsIfQueriesMatch()):void this._clearResults()},triggeResultClicked:function(){return this._isOrganic?void(this._currentResults&&this._currentResults.report()):void this._clearResults()},get _isDOMStateDifferent(){var a=ha(".qs");return a&&a!==this._lastQs?(this._lastQs=a,!0):!1},_startPolling:function(){this._timerId=setInterval(this._onTimerTick.bind(this),this.POLLING_INTERVAL)},_onTimerTick:function(){this._isDOMStateDifferent&&this._onResultsRendered()}},gserp=new GoogleSERPPage;var na,oa={extract:function(a){var b,c=a.getAttribute("flashvars").split("&");return c.forEach(function(a){a=a.split("="),"file"===a[0]&&(b=decodeURIComponent(a[1]))}),b},parsePlaylist:function(a,b){var c=X.xmlParser.parseFromString(b,"text/xml"),e=[],f="location, highquality, lowquality";return X.queryAll("track",c).forEach(function(a){X.queryAll(f,a).forEach(function(b){var c=b.textContent.trim(),f=V.parse(c);if(!d(f.ext)){var g=[a.querySelector("title").textContent.trim()],h=a.querySelector("creator");h&&""!==h.textContent.trim()&&g.unshift(h.textContent.trim()),f.type="mp3"===f.ext?"audio":"video",f.title=g.join(" – "),f.quality=quality.getJWQuality(b.nodeName),e.push(f)}})}),e}},pa={_getMedia:function(a){var b=V.parse(a);return b.type="video",b.ext="m3u8",b},parsePlaylist:function(a,b){var c=[];if(0!==b.indexOf("#EXTM3U"))return c;for(var d,e,f=V.parse0(a),g=0,h=0,i=b.split("\n"),j=0;j<i.length;j++){var k=i[j];if(k)if(0===k.indexOf("#"))0===k.indexOf("#EXTINF:")?g=1:0===k.indexOf("#EXT-X-STREAM-INF:")&&(g=2);else{switch(g){case 1:h+=1;break;case 2:d=V.resolve(k,f),e=pa._getMedia(d),e&&c.push(e)}g=0}}return 0===c.length&&h>0&&(e=pa._getMedia(a),e&&c.push(e)),c}};!function(){function a(a){return X.isMatches(a,R)}function b(){
var a=X.queryAll(c).map(n).filter(X.notNull);return a=X.unique(a),1===a.length?a[0]:null}var c='embed[type="application/x-shockwave-flash"], object[type="application/x-shockwave-flash"], object[classid="clsid:D27CDB6E-AE6D-11cf-96B8-444553540000"]';const e=p({request:{method:"GET",url:function(a){return d(a.ext)?a.url:null}},parse:function(a,b){return b?pa.parsePlaylist(a,b):[a]}});na=q("default",function(){var c=location.host,d=[];if(a(c))return d;for(var f=X.queryAll("[src]"),g=[],h=0,i=f.length;i>h;++h){var j=f[h],k=j.src,l=V.getMediaType(k);if(l&&j.getAttribute("src")){var m=V.parse(k);r(m.host)||(m.type=l,ca.isValidData(m)&&(j=n(j),j?d.push(this.makePlayer0(j,[m],e)):g.push(m)))}}return g.length&&d.push(this.makePlayer(null,g,e)),d.push(this.makePlayer0(b(),this._ids,e)),d},{dynamic:!0}),T.check(location.href,"download")&&(na.prototype.processRequest=X.noop)}();var qa;const ra={"3072p":"Super HD","2160p":"Ultra HD","1440p":"Quad HD","1080p":"Full HD","720p":"HD","480p":"Standard","360p":"Medium","270p":"Small","240p":"Small","144p":"Mobile"};!function(){function a(b){var c=b.split("&"),d={},e=0;return c.forEach(function(b){var c=b.split("="),f=c[0],g=c[1];if(f&&"undefined"!=typeof g){var h="undefined"==typeof d[f]?f:f+e++;if("url"==f||"title"==f||"type"===f)d[h]=decodeURIComponent(g);else if("url_encoded_fmt_stream_map"===f||"adaptive_fmts"===f){var i=decodeURIComponent(g).split(",");d[h]=i.map(a)}else d[h]=a(decodeURIComponent(g||""))}else d=b}),d}function c(a){for(var b,c=0;c<k.length;++c)if(b=a.match(k[c]))return b[1];return null}function d(a){var b=new $;return X.get(l+a).success(function(a){try{var c=JSON.parse(f(a))}catch(d){return b.reject(d)}i({},"todme",c,e.bind(this,b))}).fail(function(a){return b.reject(a)}),b}function e(a,b,c){var d={},e=[],f=c.formats.map(function(a){a.resolution&&ra[a.resolution]&&(a.quality=ra[a.resolution]);var b={ext:a.container,filename:c.title,quality:a.quality,url:a.url,type:X.getMediaType(a.type)},f=V.parse(a.url);return f.host=a.fallback_host,f.host&&(b.altUrl=V.format(f)),!a.encoding&&a.audioEncoding&&(d[a.container]=d[a.container]||{audioBitrate:0},d[a.container].audioBitrate<a.audioBitrate&&(d[a.container]=a)),a.audioEncoding||e.push(b),b});e.forEach(function(a,b){if(!d[a.ext]||!d[a.ext].url||!r[a.ext])return a.url=null,void(a.quality=null);var c=a.url;a.url={videoUrl:decodeURIComponent(c),audioUrl:decodeURIComponent(d[a.ext].url)}}),a.resolve(f.filter(function(a){return!!a.url}))}function f(a){var b=/ytplayer.config = (\{[\s\S]*?\});ytplayer.load/,c=a.match(b);return c&&c[1]||null}function g(b,c){var d=[];return b.url_encoded_fmt_stream_map&&(d=d.concat(b.url_encoded_fmt_stream_map.split(","))),b.adaptive_fmts&&(d=d.concat(b.adaptive_fmts.split(","))),d=d.map(function(b){var c=a(b);c.conn&&0===c.conn.indexOf("rtmp")&&(c.rtmp=!0);var d=t[c.itag];return X.extendObject(c,d),c}),delete b.url_encoded_fmt_stream_map,delete b.adaptive_fmts,d.sort(h),d}function h(a,b){var c=a.resolution?parseInt(a.resolution.slice(0,-1),10):0,d=b.resolution?parseInt(b.resolution.slice(0,-1),10):0,e=a.audioBitrate||0,f=b.audioBitrate||0,g=2*~~!!c+~~!!e,h=2*~~!!d+~~!!f;if(g===h){if(c===d){var i,j,k;return a.bitrate?(k=a.bitrate.split("-"),i=parseFloat(k[k.length-1],10)):i=0,b.bitrate?(k=b.bitrate.split("-"),j=parseFloat(k[k.length-1],10)):j=0,i===j?f-e:j-i}return d-c}return h-g}function i(a,b,c,d){var e=c.args;return"fail"===e.status?void d(new Error("Error "+e.errorcode+": "+e.reason)):(u.forEach(function(a){e[a]&&(e[a]=e[a].split(",").filter(function(a){return""!==a}))}),e.fmt_list=e.fmt_list?e.fmt_list.map(function(a){return a.split("/")}):[],e.video_verticals&&(e.video_verticals=e.video_verticals.slice(1,-1).split(", ").filter(function(a){return""!==a}).map(function(a){return parseInt(a,10)})),e.formats=g(e),e.description=b,void v.get(e,c.assets.js,!1,d))}const j="https:"===location.protocol.toLowerCase()?"https:":"http:",k=[/^https?:\/\/(?:www\.)?youtube(?:-nocookie)?(?:\.googleapis)?\.com\/(?:(?:v)|(?:embed)|(?:e))\/([^&\?]+)/i,/https?:\/\/(?:www\.)?youtube\.com\/.*(?:\?|&)v=([^&\?]+)/i],l=j+"//www.youtube.com/watch?v=",m=[/^https?:\/\/(?:www\.)?facebook.com\//i],o=X.isMatches(b.location.href,m),r=U.YT,s=(["&keepalive=yes","alr=yes","gir=yes","c=WEB","cver=html5"].join("&"),p({parse:function(a){return movies=d(a),movies}}));qa=q("youtube",function(){var a,b=this,d=[],e=[];if(!X.query("#player-unavailable:not(.hid)")){a=X.query(".html5-video-player")||X.query("#player, #movie_player, #movie_player-html5, #movie_player-flash");var f=X.queryAll('embed[type="application/x-shockwave-flash"]',a);if(1===f.length&&(f=n(f[0]),f&&(a=f)),a){a=b.makePlayer(a,[],s);var g=c(location.href);g&&(a.ids.push(g),e.push(g))}}var h=X.query(".channels-video-player, #upsell-video");if(h){var i=h.dataset;if(h=b.makePlayer(h,[],s),i){var g=i.videoId;g&&(h.ids.push(g),e.push(g))}a||(a=h,h=null)}var j='iframe[src*="youtube"], embed[src*="youtube"]';return o&&(j+=', a[href*="youtube.com"]'),X.queryAll(j).forEach(function(a){var f=c(a.src||decodeURIComponent(a.href));f&&-1===e.indexOf(f)&&(e.push(f),"A"===a.tagName&&(a=null),d.push(b.makePlayer(a,[f],s)))}),h&&h.ids.length&&d.splice(0,0,h),a&&a.ids.length&&d.splice(0,0,a),d.push(b.makePlayer(null,this._ids,s)),d},{dynamic:!0,pip:{detach:function(a){if(this.node.matches("iframe"))return a(this.node);var c=location.search.match(/[?&]v=([0-9A-Za-z_-]*)/);if(c){c=c[1];var d="https://www.youtube";d+=".com/embed/"+c+"?showinfo=0&autohide=1&enablejsapi=1";var e=X.closest(this.node,"video");e.length&&(e=e[0],e.currentTime>0&&(d+="&start="+Math.floor(e.currentTime)),e.ended||(d+="&autoplay=1",e.pause())),b.body.style.overflow="hidden";var f=b.createElement("iframe");X.dom.style(f,{position:"fixed",left:0,right:0,top:0,bottom:0,width:"100%",height:"100%","z-index":Number.MAX_SAFE_INTEGER-1}),f.setAttribute("allowfullscreen",!0),f.src=d;var g=b.body.children[0];g?b.body.insertBefore(f,g):b.body.appendChild(f),this._pipNode=f}},restore:function(a){if(this.node.matches("iframe"))return a(this.node);if(this._pipNode){var c=this._pipNode&&this._pipNode.contentWindow,d=c&&c.document.querySelector("video"),e=c&&c.document.querySelector("a.ytp-title-link");d&&e&&(location.href=e.href+"#t="+Math.floor(d.currentTime)),b.body.removeChild(this._pipNode),b.body.style.overflow="auto"}}}}),qa.getMoviesById=d;const t={5:{container:"flv",resolution:"240p",encoding:"Sorenson H.283",profile:null,bitrate:"0.25",audioEncoding:"mp3",audioBitrate:64},6:{container:"flv",resolution:"270p",encoding:"Sorenson H.263",profile:null,bitrate:"0.8",audioEncoding:"mp3",audioBitrate:64},13:{container:"3gp",resolution:null,encoding:"MPEG-4 Visual",profile:null,bitrate:"0.5",audioEncoding:"aac",audioBitrate:null},17:{container:"3gp",resolution:"144p",encoding:"MPEG-4 Visual",profile:"simple",bitrate:"0.05",audioEncoding:"aac",audioBitrate:24},18:{container:"mp4",resolution:"360p",encoding:"H.264",profile:"baseline",bitrate:"0.5",audioEncoding:"aac",audioBitrate:96},22:{container:"mp4",resolution:"720p",encoding:"H.264",profile:"high",bitrate:"2-3",audioEncoding:"aac",audioBitrate:192},34:{container:"flv",resolution:"360p",encoding:"H.264",profile:"main",bitrate:"0.5",audioEncoding:"aac",audioBitrate:128},35:{container:"flv",resolution:"480p",encoding:"H.264",profile:"main",bitrate:"0.8-1",audioEncoding:"aac",audioBitrate:128},36:{container:"3gp",resolution:"240p",encoding:"MPEG-4 Visual",profile:"simple",bitrate:"0.175",audioEncoding:"aac",audioBitrate:36},37:{container:"mp4",resolution:"1080p",encoding:"H.264",profile:"high",bitrate:"3-5.9",audioEncoding:"aac",audioBitrate:192},38:{container:"mp4",resolution:"3072p",encoding:"H.264",profile:"high",bitrate:"3.5-5",audioEncoding:"aac",audioBitrate:192},43:{container:"webm",resolution:"360p",encoding:"VP8",profile:null,bitrate:"0.5",audioEncoding:"vorbis",audioBitrate:128},44:{container:"webm",resolution:"480p",encoding:"VP8",profile:null,bitrate:"1",audioEncoding:"vorbis",audioBitrate:128},45:{container:"webm",resolution:"720p",encoding:"VP8",profile:null,bitrate:"2",audioEncoding:"vorbis",audioBitrate:192},46:{container:"webm",resolution:"1080p",encoding:"vp8",profile:null,bitrate:null,audioEncoding:"vorbis",audioBitrate:192},82:{container:"mp4",resolution:"360p",encoding:"H.264",profile:"3d",bitrate:"0.5",audioEncoding:"aac",audioBitrate:96},83:{container:"mp4",resolution:"240p",encoding:"H.264",profile:"3d",bitrate:"0.5",audioEncoding:"aac",audioBitrate:96},84:{container:"mp4",resolution:"720p",encoding:"H.264",profile:"3d",bitrate:"2-3",audioEncoding:"aac",audioBitrate:192},85:{container:"mp4",resolution:"1080p",encoding:"H.264",profile:"3d",bitrate:"3-4",audioEncoding:"aac",audioBitrate:192},100:{container:"webm",resolution:"360p",encoding:"VP8",profile:"3d",bitrate:null,audioEncoding:"vorbis",audioBitrate:128},101:{container:"webm",resolution:"360p",encoding:"VP8",profile:"3d",bitrate:null,audioEncoding:"vorbis",audioBitrate:192},102:{container:"webm",resolution:"720p",encoding:"VP8",profile:"3d",bitrate:null,audioEncoding:"vorbis",audioBitrate:192},133:{container:"mp4",resolution:"240p",encoding:"H.264",profile:"main",bitrate:"0.2-0.3",audioEncoding:null,audioBitrate:null},134:{container:"mp4",resolution:"360p",encoding:"H.264",profile:"main",bitrate:"0.3-0.4",audioEncoding:null,audioBitrate:null},135:{container:"mp4",resolution:"480p",encoding:"H.264",profile:"main",bitrate:"0.5-1",audioEncoding:null,audioBitrate:null},136:{container:"mp4",resolution:"720p",encoding:"H.264",profile:"main",bitrate:"1-1.5",audioEncoding:null,audioBitrate:null},137:{container:"mp4",resolution:"1080p",encoding:"H.264",profile:"high",bitrate:"2-3",audioEncoding:null,audioBitrate:null},138:{container:"mp4",resolution:"2160p",encoding:"H.264",profile:"high",bitrate:"13.5",audioEncoding:null,audioBitrate:null},160:{container:"mp4",resolution:"144p",encoding:"H.264",profile:"main",bitrate:"0.1",audioEncoding:null,audioBitrate:null},242:{container:"webm",resolution:"240p",encoding:"VP9",profile:null,bitrate:"0.14",audioEncoding:null,audioBitrate:null},243:{container:"webm",resolution:"360p",encoding:"VP9",profile:null,bitrate:"0.26",audioEncoding:null,audioBitrate:null},244:{container:"webm",resolution:"480p",encoding:"VP9",profile:null,bitrate:"0.585",audioEncoding:null,audioBitrate:null},247:{container:"webm",resolution:"720p",encoding:"VP9",profile:null,bitrate:"1.184",audioEncoding:null,audioBitrate:null},248:{container:"webm",resolution:"1080p",encoding:"VP9",profile:null,bitrate:"1.895",audioEncoding:null,audioBitrate:null},264:{container:"mp4",resolution:"1440p",encoding:"H.264",profile:"high",bitrate:"4-5",audioEncoding:null,audioBitrate:null},266:{container:"mp4",resolution:"2160p",encoding:"H.264",profile:"high",bitrate:"12.5-13.5",audioEncoding:null,audioBitrate:null},271:{container:"webm",resolution:"1440p",encoding:"VP9",profile:null,bitrate:"9",audioEncoding:null,audioBitrate:null},272:{container:"webm",resolution:"2160p",encoding:"VP9",profile:null,bitrate:"20",audioEncoding:null,audioBitrate:null},278:{container:"webm",resolution:"144p",encoding:"VP9",profile:null,bitrate:"0.08",audioEncoding:null,audioBitrate:null},298:{container:"mp4",resolution:"720p",encoding:"H.264",profile:"main",bitrate:"3-3.5",audioEncoding:null,audioBitrate:null},299:{container:"mp4",resolution:"1080p",encoding:"H.264",profile:"high",bitrate:"5.5",audioEncoding:null,audioBitrate:null},302:{container:"webm",resolution:"720p",encoding:"VP9",profile:null,bitrate:"2.5",audioEncoding:null,audioBitrate:null},303:{container:"webm",resolution:"1080p",encoding:"VP9",profile:null,bitrate:"5",audioEncoding:null,audioBitrate:null},139:{container:"mp4",resolution:null,encoding:null,profile:null,bitrate:null,audioEncoding:"aac",audioBitrate:48},140:{container:"mp4",resolution:null,encoding:null,profile:null,bitrate:null,audioEncoding:"aac",audioBitrate:128},141:{container:"mp4",resolution:null,encoding:null,profile:null,bitrate:null,audioEncoding:"aac",audioBitrate:256},171:{container:"webm",resolution:null,encoding:null,profile:null,bitrate:null,audioEncoding:"vorbis",audioBitrate:128},172:{container:"webm",resolution:null,encoding:null,profile:null,bitrate:null,audioEncoding:"vorbis",audioBitrate:192},92:{container:"ts",resolution:"240p",encoding:"H.264",profile:"main",bitrate:"0.15-0.3",audioEncoding:"aac",audioBitrate:48},93:{container:"ts",resolution:"480p",encoding:"H.264",profile:"main",bitrate:"0.5-1",audioEncoding:"aac",audioBitrate:128},94:{container:"ts",resolution:"720p",encoding:"H.264",profile:"main",bitrate:"0.8-1.25",audioEncoding:"aac",audioBitrate:128},95:{container:"ts",resolution:"1080p",encoding:"H.264",profile:"main",bitrate:"1.5-3",audioEncoding:"aac",audioBitrate:256},96:{container:"ts",resolution:"720p",encoding:"H.264",profile:"main",bitrate:"2.5-6",audioEncoding:"aac",audioBitrate:256},120:{container:"flv",resolution:"720p",encoding:"H.264",profile:"Main@L3.1",bitrate:"2",audioEncoding:"aac",audioBitrate:128},127:{container:"ts",resolution:null,encoding:null,profile:null,bitrate:null,audioEncoding:"aac",audioBitrate:96},128:{container:"ts",resolution:null,encoding:null,profile:null,bitrate:null,audioEncoding:"aac",audioBitrate:96},132:{container:"ts",resolution:"240p",encoding:"H.264",profile:"baseline",bitrate:"0.15-0.2",audioEncoding:"aac",audioBitrate:48},151:{container:"ts",resolution:"720p",encoding:"H.264",profile:"baseline",bitrate:"0.05",audioEncoding:"aac",audioBitrate:24}},u=["keywords","fmt_list","fexp","watermark"];var v=function(a){function b(a,b){var c=a[0];return a[0]=a[b%a.length],a[b]=c,a}a.get=function(b,c,d,e){b.formats[0]&&b.formats[0].s?(c=j+c,X.get(c).success(function(c){var f=a.extractActions(c);return f&&f.length?(b.formats.forEach(function(b){var c=a.decipher(f,b.s);b.url=a.getDownloadURL(b,c,d)}),void e(null,b)):void e(new Error("could not extract signature deciphering actions"))}).fail(e)):(b.formats.forEach(function(b){var c=b.sig||"";b.url=a.getDownloadURL(b,c,d)}),e(null,b))},a.getDownloadURL=function(a,b,c){var d;if(a.url)d=a.url;else{if(!a.stream)return null;a.conn?(d=a.conn,"/"!==d[d.length-1]&&(d+="/"),d+=a.stream):d=a.stream}try{d=decodeURIComponent(d)}catch(e){return null}var f=V.parse(d,!0);delete f.search;var g=f.query;return g.ratebypass="yes",b&&(g.signature=b),V.format(f)},a.decipher=function(a,c){c=c.split("");for(var d,e=0,f=a.length;f>e;e++){var g=a[e];switch(g[0]){case"r":c=c.reverse();break;case"w":d=~~g.slice(1),c=b(c,d);break;case"s":d=~~g.slice(1),c=c.slice(d);break;case"p":d=~~g.slice(1),c.splice(0,d)}}return c.join("")};var c="[a-zA-Z_\\$][a-zA-Z_0-9]*",d=":function\\(a\\)\\{(?:return )?a\\.reverse\\(\\)\\}",e=":function\\(a,b\\)\\{return a\\.slice\\(b\\)\\}",f=":function\\(a,b\\)\\{a\\.splice\\(0,b\\)\\}",g=":function\\(a,b\\)\\{var c=a\\[0\\];a\\[0\\]=a\\[b%a\\.length\\];a\\[b\\]=c(?:;return a)?\\}",h=new RegExp("var ("+c+")=\\{((?:(?:"+c+d+"|"+c+e+"|"+c+f+"|"+c+g+"),?)+)\\};function "+c+'\\(a\\)\\{a=a\\.split\\(""\\);((?:(?:a=)?\\1\\.'+c+'\\(a,\\d+\\);)+)return a\\.join\\(""\\)\\}'),i=new RegExp("(?:^|,)("+c+")"+d),k=new RegExp("(?:^|,)("+c+")"+e),l=new RegExp("(?:^|,)("+c+")"+f),m=new RegExp("(?:^|,)("+c+")"+g);return a.extractActions=function(a){var b=h.exec(a);if(!b)return null;var c=b[1].replace("$","\\$"),d=b[2].replace("$","\\$"),e=b[3].replace("$","\\$");b=i.exec(d);var f=b&&b[1].replace("$","\\$");b=k.exec(d);var g=b&&b[1].replace("$","\\$");b=l.exec(d);var j=b&&b[1].replace("$","\\$");b=m.exec(d);for(var n=b&&b[1].replace("$","\\$"),o="(?:a=)?"+c+"\\.("+[f,g,j,n].join("|")+")\\(a,(\\d+)\\)",p=new RegExp(o,"g"),q=[];null!==(b=p.exec(e));)switch(b[1]){case n:q.push("w"+b[2]);break;case f:q.push("r");break;case g:q.push("s"+b[2]);break;case j:q.push("p"+b[2])}return q},a}({})}();var sa;!function(){function c(a){for(var b,c=0;c<h.length;++c)if(b=a.match(h[c]),b&&b[1])return b[1];return null}function d(a){var b=a.match(i)||[];return b[1]}function e(b){var c=[],d=[];try{d=b.request.files.h264}catch(e){return c}return Object.keys(d).forEach(function(e){c.push({type:"video",title:b.video.title,filename:b.video.title,ext:"mp4",url:d[e].url,quality:a.quality.getVimeoQuality(e)})}),c}function f(a){switch(a.tagName){case"IFRAME":return c(a.src);case"PARAM":return d(a.value);case"VIDEO":return d(a.src);default:return c(a.getAttribute("data-fallback-url")||"")}return null}const g="https:"===location.protocol.toLowerCase()?"https:":"http:",h=[/\/\/(?:player\.)?vimeo\.com(?:\/video)?\/([0-9]+)/i,/\/\/vimeo.com\/couchmode\/.*\/([0-9]+)/i,/\/\/player.vimeo.com\/v[0-9]\/video\/([0-9]+)/i,/\/\/player.vimeo.com\/moog\/([0-9]+)/i],i=/(?:&|\?)clip_id=([0-9]+)(?:&|$)/i,j=g+"//player.vimeo.com/video/{{id}}/config",k=p({request:{method:"GET",url:function(a){return a.match(/\/video\/(\d+)\/config(\?|$)/i)?a:j.replace("{{id}}",a).replace("{{location}}",location.href)},headers:function(a){return{"X-Savior-Replace-Referer":b.location.href}}},parse:function(a,b){var c=JSON.parse(b);return e(c)}});sa=q("vimeo",function(){var a=this,b=[],d=[],e=X.queryAll('iframe[src*="vimeo.com"], param[value*="vimeo.com"], video[src*="vimeo.com"], .player[data-fallback-url]');if(e.forEach(function(c){var e=f(c);e&&-1===d.indexOf(e)&&(d.push(e),b.push(a.makePlayer(c,[e],k)))}),"vimeo.com"===location.host||"player.vimeo.com"===location.host){var g=X.query("#videos_gallery li.selected a"),h=g&&g.href||location.href,i=c(h);i&&-1===d.indexOf(i)&&(d.push(i),b.push(a.makePlayer(g,[i],k)))}return b.push(a.makePlayer(null,a._ids,k)),b},{dynamic:!0})}();var ta;!function(){function a(a){var b={};return a.split("&").forEach(function(a){var c=a.split("=");if("params"===c[0])try{b[c[0]]=JSON.parse(decodeURIComponent(c[1]))}catch(d){}else b[c[0]]=decodeURIComponent(c[1])}),b}function b(a,b){var c=[],d=a.video_data||a.params&&a.params.video_data;if(d){var f=X.query("h2.uiHeaderTitle")||X.query(".fbPhotoMediaTitleNoFullScreen");b=b||f&&f.textContent,j.forEach(function(a){d.forEach(function(d){var f=e(d[a],b||d.video_id,a);f&&c.push(f)})})}return c}function c(a){for(var b=/fbPhotoMediaTitleNoFullScreen\\">([^>]*)\\u003C|fbPhotoSnowliftVideoTitle\\">([^>]*)\\u003C/g,c=null;c=b.exec(a);)if(c&&(c[1]||c[2]))return c[1];return null}function d(a){var b=a.match(/\[\\"params\\",\\"([^"]+)\\"/i),c={};try{c=JSON.parse(decodeURIComponent(b[1].replace(/\\\\u0025/g,"%")))}catch(d){}return c}function e(a,b,c){var d;return a&&(d=V.parse(a),d.type="video",c&&(d.quality=quality.getFacebookQuality(c)),b&&(d.title=b.replace(/\+(?!\+)/g," ").trim())),d}function f(a){var b=a.href||"",c=b.match(l);if(!c||!c[1])return null;for(var d=c[1],e=null;(a=a.parentNode)&&!(e=a.getAttribute("data-gt")););try{e=JSON.parse(e)}catch(f){return null}var g=e.viewerid;return g?k.replace("{{user_id}}",g).replace("{{data}}",encodeURIComponent(JSON.stringify({v:d,theater:null,firstLoad:!0}))):null}const g='embed[flashvars*="fbcdn.net"], embed[flashvars*="fbcdn-video"]',h="a.videoThumb",i=/(\.|^)(facebook|fb).com$/i,j=["hd_src","hd_src_no_ratelimit","sd_src","sd_src_no_ratelimit"],k="https://www.facebook.com/ajax/pagelet/generic.php/PhotoViewerInitPagelet?no_script_path=1&data={{data}}&__user={{user_id}}&__a=1&__dyn={{dyn}}&__req=jsonp_2&__adt=2",l=/^https?:\/\/(?:www\.)(?:facebook|fb)\.com\/(?:v\/|photo\.php\?v=)([0-9]+)/i,m=p({request:{method:"GET",url:function(a){return a.replace("{{dyn}}",Math.random().toString().slice(2))}},parse:function(a,e){var f=d(e),g=c(e);return b(f,g)}}),n=p({nocache:!0,parse:b});ta=q("facebook",function(){var b=this,c=[];if(location.host.match(i)){var d=X.queryAll(h);d.forEach(function(a){var d=f(a);d&&c.push(b.makePlayer(a,[d],m))})}var d=X.queryAll(g);return d.forEach(function(d){var e=d.getAttribute("flashvars");e=a(e),e&&c.push(b.makePlayer(d,[e],n))}),c})}();var ua;!function(){function a(a){for(var b,c=[],d=[],e=/"stream_h264_(|ld_|hq_|hd_|hd1080_)url":"(http.*?)"/g;b=e.exec(a);)d.push(b[0]);if(0===d.length)return c;d=JSON.parse("{"+d.join(",")+"}");var g=a.match(/<title>(.*?)<\/title>/);return g&&(g=g[1].trim()),Object.keys(d).forEach(function(a){var b=d[a];if(b){var e=V.parse(b);e.ext="mp4",e.type="video",e.quality=quality.getDailymotionQuality(f[a]),g&&(e.title=g),c.push(e)}}),c}const b=/^https?:\/\/(?:www\.)dailymotion\.com\/embed\/video\/([a-z0-9]+)/i,c=/"videoId":"([a-z0-9]+)"/i,d=/^#video=([a-z0-9]+)/i,e='param[name="flashvars"][value*="dailymotion.com"], iframe[src*="http://www.dailymotion.com/embed/video/"], embed[src*="http://www.dailymotion.com/embed/video/"]',f={stream_h264_url:"sd",stream_h264_ld_url:"ld",stream_h264_hq_url:"hq",stream_h264_hd_url:"hd",stream_h264_hd1080_url:"hd1080"},g=p({request:{method:"GET",url:function(a){return"http://www.dailymotion.com/embed/video/"+a}},parse:function(b,c){return a(c)}});ua=q("dailymotion",function(){var a,f=this,h=[],i=[],j=X.queryAll(e);if(j.forEach(function(d){var e,j,k=!1;"PARAM"===d.tagName?(e=c,j=decodeURIComponent(d.value)):(e=b,j=d.src,k=!0);var l=j.match(e),m=l&&l[1];if(m&&-1===i.indexOf(m)){i.push(m);var n=f.makePlayer(d,[m],g);h.push(n),(k||!a)&&(a=n)}}),"www.dailymotion.com"===location.host){var k=location.hash.match(d)||location.href.match(b),l=k&&k[1];if(l&&-1===i.indexOf(l))if(a)a.ids.push(l);else{var m=f.makePlayer(null,[l],g);h.push(m)}}return a&&(this._ids!==a.ids&&(a.ids=X.unique(a.ids.concat(this._ids))),this._ids=a.ids),h},{dynamic:!0})}();var va;!function(){const a=p({nocache:!0,parse:function(a){return qa.getMoviesById(a)}}),b=p({request:{method:"GET"},parse:oa.parsePlaylist});va=q("vietgiaitri",function(){var c=this,d=[],e=location.href.match(/vietgiaitri\.com\/.*id\.([^\.]+)\.vgt/i),f=(e||[])[1];if(f){var g=X.query("object#youtube");d.push(this.makePlayer(g,[f],a))}return location.host.match(/vietgiaitri\.com/i)&&X.queryAll('embed[src*="vietgiaitri.com"]').forEach(function(a){var e=oa.extract(a);e&&d.push(c.makePlayer(a,[e],b))}),d})}();var wa;!function(){function a(a){a=a||{};try{var f;switch(a.tagName){case"IFRAME":f=a.src.match(b);break;case"PARAM":f=a.getAttribute("value").match(e);break;default:f=location.pathname.match(d)}return(f||[])[1]}catch(g){return c}}const b=/https?:\/\/clip\.vn\/embed\/([0-9a-z_-]+)/i,d=/\/watch\/[^,]+,([0-9a-z_-]+)\/?$/i,e=/(?:^|&)id=([0-9a-z_-]+)/i,f=/([^.]+\.)*clip\.vn/i,g=p({request:{method:"POST",url:function(a){return"http://clip.vn/movies/nfo/"+a},params:function(){return{referrer:encodeURIComponent(btoa(location.href)),onsite:"clip"}},headers:function(){return{"X-REFERRER":location.href,"Content-type":"application/x-www-form-urlencoded"}}},parse:function(a,b){var c=X.xmlParser.parseFromString(b,"text/xml"),d=c.querySelector("ClipInfo title"),e=X.queryAll("ClipInfo enclosure",c).map(function(a){var b=a.getAttribute("url"),c=V.parse(b),e=a.getAttribute("quality");return c.type="video",d&&(c.title=d.textContent),c.quality=quality.getClipvnQuality(e),c});return e}});wa=q("clipvn",function(){function b(a,b){a&&-1===e.indexOf(a)&&(e.push(a),d.push(c.makePlayer(b,[a],g)))}var c=this,d=[],e=[];location.hostname.match(f)&&b(a(),X.query("#player_wrapper object"));var h=X.queryAll('param[name="flashvars"][value*="clip.vn"], iframe[src*="clip.vn"]');return h.forEach(function(c){b(a(c),c)}),d})}();var xa;!function(){function a(a){try{return N.AES.decrypt({ciphertext:N.enc.Hex.parse(a),salt:""},N.enc.Utf8.parse(g),{iv:N.enc.Utf8.parse(h),mode:N.mode.CBC,padding:N.pad.NoPadding}).toString(N.enc.Utf8)}catch(b){return""}}function b(a){var b=X.queryAll("script"),c=[];return b.forEach(function(b){var d=b.textContent.match(/<source\s+src="([^"]+)"\s+type="([^"]+)"/i);if(d){var e=V.parse(d[1]);e=X.detectMediaTypeAndExt(e,d[2]),e.title=a,c.push(e)}}),c}function c(a){return-1===a.indexOf("load-song")}const e='param[value*=".zing.vn/xml/"], param[value*="tv.zing.vn/tv/xml/"], embed#player',f=/xmlURL=([^&]+)/i,g="f_pk_ZingTV_1_@z",h="f_iv_ZingTV_1_@z",i=/^https?:\/\//i,j=["f1080","f720","hq","f480","f360","source","f240","f"],k=p({request:{method:"GET"},parse:function(c,e){var f=X.xmlParser.parseFromString(e,"text/xml"),g=[];return X.queryAll("data > item",f).forEach(function(c){var e=c.getAttribute("type"),f=[c.querySelector("title").textContent],h=c.querySelector("performer");h&&""!==h.textContent.trim()&&f.unshift(h.textContent.trim()),f=f.join(" – "),X.toArray(c.childNodes).forEach(function(b){if(-1!==j.indexOf(b.tagName)){var c=b.textContent;if(X.isMatches(c,i)||(c=a(c)),"require vip"!==c&&""!==c&&-1===c.indexOf("/rplaylist")&&X.isMatches(c,i)){var h=V.parse(c);(U.M3U8||!d(h.ext))&&("mp3"===e?(h.type="audio",h.quality=quality.getZingAudioQuality(b.tagName)):(h.type="video",h.quality=quality.getZingVideoQuality(b.tagName)),h.ext=h.ext||e,h.title=f,g.push(h))}}}),g.length||(g=b(f))}),g}});var l=/^([\d\w_-]+\.)*zing\.vn$/,m=function(a){var b=a.mp3;if(!b)return null;var c=V.parse(b);c.type="audio";var d=a.artist?a.artist+" - ":"";return c.title=d+(a.title||"").trim(),c.force=!0,c.ext="mp3",c},n=function(a){var b=a.source[0];if(!b)return null;var c=V.parse(b);c.type="audio";var d=a.artist?a.artist+" - ":"";return c.title=d+(a.title||"").trim(),c.force=!0,c.ext="mp3",c};xa=q("zingvn",function(){var a=this,b=[],d=[],g=X.queryAll(e);if(g.forEach(function(e){var g=e.getAttribute("value")||e.getAttribute("flashvars"),h=(g.match(f)||[])[1];h&&c(h)&&-1===d.indexOf(h)&&(d.push(h),b.push(a.makePlayer(e,[h],k)))}),b.push(a.makePlayer(null,this._ids||[],k)),fa&&location.host.match(l)){var h=new $;fa.send({method:"report",args:[["zmp3HTML5","playlist"]]}).success(function(a){return Array.isArray(a)?(a=a.map(m).filter(function(a){return a}),void h.resolve(a)):void h.resolve([])}),b.push(a.makePlayer0(null,[h]));var i=new $;fa.send({method:"eval",args:['return [].map.call(zmCore("li[id^=\'fnPlayerItem\']"),function(el){return zmCore.data(el,"item")})']}).success(function(a){return Array.isArray(a)?(a=a.map(n).filter(function(a){return a}),void i.resolve(a)):void i.resolve([])}),b.push(a.makePlayer0(null,[i]))}return b},{dynamic:!0})}();var ya;!function(){function a(){if("www.nhaccuatui.com"!==location.hostname)return null;var a=X.query("video#videonctPlayer");if(a)return a;var b=X.queryAll('object[type="application/x-shockwave-flash"]');if(1!==b.length)return null;var c=b[0];return c.getAttribute("data").match(/flash\/player\.nct/)?c:n(c)}const c='meta[content*="flash/xml?key"], param[value*="flash/xml?key"], embed[flashvars*="flash/xml?key"]',d=/https?:\/\/[^\?]+xml\?key.*/,e=p({request:{method:"GET",headers:function(a){return{"X-Savior-Replace-Cookie":b.cookie+"; touchEnable=true;"}},method:"GET"},parse:oa.parsePlaylist});var f=/^([\w\d_-]+\.)*nhaccuatui.com$/,g=function(a){var b=a.location.replace(/^[\n\s]*|[\n\s]*$/gm,"");if(!b)return null;var c=V.parse(b);return c.type="audio",c.title=a.title.replace(/^[\n\s]*|[\n\s]*$/gm,""),c.force=!0,c.ext="mp3",c};ya=q("nhaccuatui",function(){function b(a,b){var c=k.indexOf(a);-1!==c?l[c]||(l[c]=b):(k.push(a),l.push(b))}function h(a,b){j.push(i.makePlayer(l[b],[a],e))}var i=this,j=[],k=[],l=[];if(X.queryAll(c).forEach(function(a){var c=a.getAttribute("content")||a.getAttribute("value")||a.getAttribute("flashvars")||"",e=c.match(d),f=e&&e[0];f&&b(f,a)}),k.length&&k.forEach(h),fa&&location.host.match(f)){var m=new $;fa.send({method:"report",args:[["__data","flashPlayer","mp3"]]}).success(function(a){return Array.isArray(a)?(a=a.map(g).filter(function(a){return a}),void m.resolve(a)):void m.resolve([])}),j.push(i.makePlayer0(null,[m]))}return j.push(this.makePlayer0(a(),this._ids,e)),j},{dynamic:!0})}();var za;!function(){function a(a){var b={};return a.split("&").forEach(function(a){var c=a.split("=");b[c[0]]=decodeURIComponent(c[1])}),b}function b(a){return a.replace(/&#(\d+);/g,function(a,b){return String.fromCharCode(+b)})}const c="http://nhac.vui.vn",d='param[name="flashvars"][value*="vui.vn"]',e="http://nhac.vui.vn/asx2.php?type={{type}}&id={{id}}",f=/playlistfile=([^?&]+)/i,g=/(a|m|clip)(\d+)[^-]+$/i,h={a:3,m:1,clip:1},i=p({request:{method:"GET",url:function(a){return a.match(/^https?:\/\//i)?a:c+a}},parse:function(a,c){var d=X.xmlParser.parseFromString(c,"text/xml"),e=[];return X.queryAll("item",d).forEach(function(a){try{var c=[b(a.querySelector("title").textContent)],d=a.querySelector("description");d&&(d=d.textContent.replace(/thể hiện:/i,"").trim(),""!==d&&c.unshift(d));var f=a.getElementsByTagNameNS("http://developer.longtailvideo.com/","file")[0].textContent;if(!f.match(/^https?:\/\//i))return;var g=V.parse(f);g.type="mp3"===g.ext?"audio":"video",g.title=c.join(" – "),e.push(g)}catch(h){}}),e}});za=q("vui",function(){var b=this,c=V.parse(location.href);if(c.host.match(/vui\.vn$/))if("html"===c.ext){var j=c.filename.match(g);if(j&&j[1]&&j[2]){for(var k=j[2],l=null,m=X.queryAll('param[name="flashvars"]'),n=m.length-1;n>=0;n--){var o=m[n];if(o.value&&-1!==o.value.indexOf(k)){l=o;break}}var c=e.replace("{{type}}",h[j[1]]).replace("{{id}}",k);return[b.makePlayer(l,[c],i)]}}else if("swf"===c.ext){var j=c.search.match(f);if(j&&j[1]){var c=decodeURIComponent(j[1]);return[b.makePlayer(null,[c],i)]}}var p=[],q=X.queryAll(d);return q.forEach(function(c){var d=a(c.value);d&&d.playlistfile&&p.push(b.makePlayer(c,[d.playlistfile],i))}),p})}();var Aa;!function(){function a(a){var b,c,d=/^https?:\/\/nhacso.net\/embed\/([^\/]+)\/(.+)/i;if(a.src){if(c=a.src.match(d),3!==c.length)return null;switch(c[1]){case"album":b=h+c[2];break;case"video":b=g+c[2];break;default:return null}}else b=a.value.replace(/^.*xmlPath=([^&]+).*$/i,"$1");return b}function b(a,b){var c=l[b];return c&&a?location.origin+c+encodeURIComponent(a):void 0}function c(a){var c=a.getAttribute("object-id"),d=a.getAttribute("object-type");return c?b(c,d):null}function d(){if(!location.host.match(i))return!1;var a=location.pathname;return 0===a.indexOf("/xem-video/")||0===a.indexOf("/nghe-playlist/")||0===a.indexOf("/nghe-album/")||0===a.indexOf("/nghe-nhac/")}const e=['param[name="flashvars"][value*="xmlPath=http://nhacso.net"]','iframe[src*="http://nhacso.net/embed"]','param[name="movie"][value*="xmlPath=http://nhacso.net"]'].join(","),f="a.play[object-type]",g="http://nhacso.net/flash/video2/xnl/1/id/",h="http://nhacso.net/flash/album/xnl/1/uid/X1xQVUNcZgQEBQ==,",i=/(\w+\.)?nhacso\.net$/,j=p({request:{method:"GET"},parse:function(a,b){var c=X.xmlParser.parseFromString(b,"text/xml"),d=[];return X.queryAll("track, song",c).forEach(function(a){try{var b=[a.querySelector("name, title").textContent],c=a.querySelector("artist");c&&""!==c.textContent.trim()&&b.unshift(c.textContent.trim());var e=a.querySelector("sourceUrl, url, mp3link").textContent,f=V.parse(e);f.type="mp3"===f.ext?"audio":"video",f.title=b.join(" – "),d.push(f)}catch(g){}}),d}}),k=p({nocache:!0,request:{method:"GET"},parse:function(a,b){var c=JSON.parse(b),d=(c.object_name||"").trim();d&&(d+=" - ");for(var e=c.songs||[],f=e.filter(function(a){return a.link_mp3}).map(function(a){}),g=0;g<e.length;g++){var h=e[g],i=h.link_mp3;if(i){var j=V.parse(i);j.type="audio",j.title=d+(h.name||"").trim(),f.push(j)}}return f}});var l={album:"/albums/ajax-get-detail-album?dataId=",playlist:"/playlists/ajax-get-detail-playlist?dataId=",song:"/songs/ajax-get-detail-song?dataId="},m=function(a){var b=a.url;if(!b)return null;var c=V.parse(b);c.type="audio";var d=a.singer[0]?a.singer[0].alias+" - ":"";return c.title=d+(a.name||"").trim(),c};Aa=q("nhacso",function(){var b=this,g=[],h=[];if(X.queryAll(e).forEach(function(c){var d=a(c);d&&-1===h.indexOf(d)&&(h.push(d),g.push(b.makePlayer(c,[d],j)))}),fa&&location.host.match(i)){var l=new $;fa.send({method:"report",args:[["myPeakPlayer","songs"]]}).success(function(a){return Array.isArray(a)?(a=a.map(m).filter(function(a){return a}),void l.resolve(a)):void l.resolve([])}),g.push(b.makePlayer0(null,[l]))}if(!d())return g;var n=[];return X.queryAll(f).forEach(function(a){var b=c(a);b&&-1===n.indexOf(b)&&n.push(b)}),n.length>0&&g.push(b.makePlayer(null,n,k)),X.queryAll(".video-details").forEach(function(a){var c=X.query("video",a),d=c&&c.src;if(d){var e=V.parse(d);e.type="video";var f=X.query(".singer-link",a);
f=f&&f.textContent.trim()||"";var h=X.query("h3.name");h=h&&h.textContent.trim()||"",f&&h&&(h=f+" - "+h),h&&(e.title=h),g.push(b.makePlayer(c,[e]))}}),g})}();var Ba=function(){this._providers=[new na,new qa,new sa,new ta,new xa,new ya,new va,new wa,new za,new Aa,new ua]};!function(){function a(a,b){Array.prototype.push.apply(a,b)}function b(a){var b=new $;return $.when(a).done(function(){var a=v(),c=[];Array.prototype.concat.apply([],arguments).forEach(function(b){b&&(ca.isValidData(b)||b.force)&&(/&\w+;/.exec(b.title)&&(b.title=X.unescapeHTML(b.title)),b.referrer=b.referrer||location.href,!b.title&&a&&a.test(b)&&(b.title=a.title),c.push(b))}),b.resolve(c)}),b}Ba.prototype={constructor:Ba,processRequest:function(a){for(var b=a.name,c=0;c<this._providers.length;++c){var d=this._providers[c];if(d.name===b&&d.processRequest){d.processRequest(a.result);break}}},getMedia:function(){var c=this._players;if(!c){var d=new $;return d.reject([]),d}var e=[];return c.forEach(function(b){a(e,b.getMedia())}),b(e)},getMediaForPlayer:function(a){return b(a.getMedia())},getMediaPlayers:function(){var b=[];return this._providers.forEach(function(c){a(b,c.getMediaPlayers())}),this._players=b,b}}}();var Ca=[s({hosts:["ustream.tv"]},/^ustream.tv\/recorded\/([0-9]+)/i,"#ViewerContent h2"),s({hosts:["yan.vn"]},/^yan\.vn/i,'title, [role="complementary"] h3'),s({hosts:["vcdn.vn",".googlevideo.com","docs.google.com"]},/^phim22\.com/i,"title"),s({hosts:["olivia24.com"]},/^olivia24\.com/,"h1.visible-lg.visible-md"),s({},/vipphim\.net/,"title"),s({},/kenh14\.vn/,"h1.title"),s({},/vtv\.vn/,"h1.news-title,h1.video-title"),s({},/dantri\.com\.vn/,"#video-title"),s({hosts:[".memeclip.com"]},/nguoiduatin\.vn/,"title"),t(/^phim3s.net\/phim/i,"h2.title a",".serverlist .server li a.active"),t(/^thegioiphim\.eu\/movie-episode-full\.php/i,".category-main"),t(/^hayghe\.com\/xem-phim/i,"#tit_player"),t(/^phim14\.net\/xem-phim/i,".blocktitle h1 a",".server_item .active a"),t(/^phimnhanh\.net\/movie/i,"h1 > a",".epicurrent"),t(/^xemnghe\.com\/phim/i,"h1"),t(/^phimhd\.vn\/xem-phim/i,"h1.title","a.playing"),u(/^phimmoi\.net\/phim/i,".episode-link.active"),u(/^phimtv\.vn\/xem-phim/i,"a.playing"),s({hosts:["203.162.121.25:88","110.164.180.35","130.211.247.87"]},/^m-viet\.com/i,"h1"),s({hosts:["memeclip.com"]},/^meme\.vn/i,"h1"),s({hosts:["memeclip.com"]},/^doisongphapluat\.com/,"title"),u(/phim/i)],Da=/^((xem )?phim)|(video:)/i,Ea=/(-? picasaweb( \d+)?)|(\| server .*)?$/i,Fa=/^https?:\/\/(www\.)?/i,Ga=function(){};Ga.prototype={constructor:Ga,_sendMessage:function(a,b,c){chrome.runtime.sendMessage({requestType:"cache",method:a,params:b},c)},get:function(a){var b=new $;return this._sendMessage("get",{key:a},function(a){b[a.success?"resolve":"reject"](a.data)}),b},put:function(a,b,c){this._sendMessage("put",{key:a,value:b,ttl:c})},"delete":function(a){this._sendMessage("delete",{key:a})},proxy:function(a,b,c,d){var e=this,f=new $;return this.get(b+d).success(f.resolve.bind(f)).fail(function(){var g=new $(c.call(a,d));g.success(function(a){e.put(b+d,a)}).done(function(a){f.resolve(a)})}),f}},w.prototype={processRequest:function(a,b){var c=this;switch(a){case"created":c._onCreated(b);break;case"erased":delete c._data[b];break;case"changed":c._onChange(b)}},_sendMessage:function(a,b,c){chrome.runtime.sendMessage({requestType:"downloads",method:a,params:b},c)},_onCreated:function(a){var b=this;if(a){var c=a.item.id;b._data[c]=a,b._media2id[a.mid]=c}},_onChange:function(a){var b=this,c=b._data[a.id];if(c){var d=c.item;for(var e in a)"id"!==e&&(d[e]=a[e].current);X.call(b._callbacks,b,c.mid,d,a)}},onChange:function(a,b){this._callbacks.push(b)},download:function(a,b){var c=this,d=b.id,e=new $;return this._sendMessage("download",b,function(a){var b=a.data;a.success?(c._data[b.id]={item:b,mid:d},c._media2id[d]=b.id,e.resolve(b)):e.reject(b)}),e},item:function(a,b){var c=this,d=c._media2id[b],e=c._data[d];return e&&e.item},pause:function(a){this._sendMessage("pause",a)},resume:function(a){this._sendMessage("resume",a)},cancel:function(a){this._sendMessage("cancel",a)},open:function(a){this._sendMessage("open",a)},show:function(a){this._sendMessage("show",a)}};var Ha=new w,Ia=!X.IS_CONTENT_SCRIPT;y.prototype={setDownloads:function(a){this._downloads=a},render:function(b,c,d){c.downloads=this._downloads.group(),Ia&&(c.is_only=this._downloads.isOneMedia());var e=X.query("#downloads",this._widget);e.innerHTML=Qa.render(b,c,{media_template:a.options.get("template-media")}),e.classList.add("content");var f=this.applyCurrentValues(d);if(Ia){var g=X.query(".downloads-list",this._widget);g.scrollHeight>g.offsetHeight&&(x(X.queryAll("h1",this._widget),g),g.addEventListener("scroll",this._getSizeOfVisibleMedia.bind(this),!1),X.query("#close-popup",this._widget).classList.add("pulled")),this._widget.classList.add("done")}return f},_checkFileSize:function(a){var b=this._downloads.getMedia(a);b&&!b.get("size")&&(metrics.log("Download",metrics.DOWNLOAD_REQUEST_SIZE),b.getSize().done(function(a){var c=X.query("#size_"+b.id(),this._widget);c&&(c.classList.add("done"),c.textContent=b.size(),a||metrics.log("Download",metrics.DOWNLOAD_REQUEST_SIZE_FAILED))}.bind(this)))},_applyCurrentValues:function(a){var b=a.querySelector(".j-quality-selector"),c=b.value;X.queryAll(".j-quality-option, .j-quality-download",a).forEach(function(a){a.hidden=a.dataset.quality!==c,Ia||a.hidden||!a.classList.contains("j-quality-download")||this._checkFileSize(a.dataset.id)},this),Ia&&this._getSizeOfVisibleMedia()},applyCurrentValues:function(a){var b=this._downloads,c=options.get("prefer_last_quality")&&options.get("preferred_quality:"+a),d=X.queryAll(".j-media-scope",this._widget);return d.forEach(function(d){var e=X.queryAll(".j-quality-download",d);if(e.length>1){var f=e.map(function(a){return a.dataset.id}),g=quality.chooseBestDownload(b.getMediaGroup(f),a,c),h=X.query(".j-quality-selector",d);h&&(h.value=g.extQuality())}this._applyCurrentValues(d)},this),d},_getSizeOfVisibleMedia:function(){for(var a=X.query(".downloads-list",this._widget),b=a.scrollTop,c=a.offsetHeight,d=X.queryAll(".j-quality-download:not([hidden])",a),e=0,f=d.length;f>e;++e){var g=d[e];if(g.offsetTop>b+c+10)break;this._checkFileSize(g.dataset.id)}},download:function(a){return a.classList.contains("j-disabled")?void 0:(a.classList.add("j-disabled"),a.classList.add("btn-progress"),this._downloads.download(a.dataset.id).success(function(){a.classList.remove("btn-progress"),a.classList.add("btn-started")}).fail(function(b){a.classList.remove("btn-progress"),a.classList.remove("j-disabled")}))}};var Ja=function(a){this._widget=z("div","downloads"),this._node=a,this._userInitiated=!1,this._ready=!1,this._make_action=c,this._rendered=!1};Ja.prototype={constructor:Ja,_init:function(a){this._widget=a,this._setPreferredQuality(options.get("preferred_quality_level")),this._widget.addEventListener("click",this._onWidgetClick.bind(this),!1),this._widget.addEventListener("change",this._onSelectChange.bind(this),!1)},_renderWidget:function(){if(!this._rendered){var b=!T.check(location.href,"pip");b=b&&a.pip.detector.isVideoNode(this._node),b=b||location.host.match(/^([\w\d_-]+\.)*youtube.com$/),b=b&&a.options.get("detach_enabled"),b&&a.pip.detector.markCandidate(this._node),this._widget.innerHTML=Qa.render(a.options.get("template-widget"),{i18n_download:Y("popup_download"),i18n_pip_button:Y("popup_pip_button"),has_pip:b}),this._dl=new y(this._widget),this._dl.setDownloads(new da),this._rendered=!0,this._init(this._widget)}},attach:function(a){this._renderWidget();var b=a.firstChild;b?b!==this._widget&&a.replaceChild(this._widget,b):a.appendChild(this._widget),this._updateDownloads()},_setPreferredQuality:function(a){if(a=a||quality.DEFAULT_QUALITY_LEVEL,!this._userInitiated&&this._preferredQuality!==a){var b=X.query("#preferred-select",this._widget);b&&(this._preferredQuality=a,b.value=a,b.innerText=Y("popup_preferred_quality_hint")+" "+Y("ql_"+a.toLowerCase()))}},_updateDownloads:function(){if(!this._player||!this._userInitiated)return void this._setPreferredQuality(options.get("preferred_quality_level"));var a=this._dl._downloads.setMediaData(this._manager.getMediaForPlayer(this._player));this._player=null,this._manager=null,a.done(this._showDownloads.bind(this))},_showDownloads:function(a,b){if(b){var c=this._widget,d=a.getMediaCount(),e=X.query("#showhide-all",c);if(0===d)return c.className="downloads-empty",e.textContent=e.title=Y("popup_no_media_found"),void metrics.log("PageShown",metrics.PAGE_CONTENT_NO_MEDIA);c.className=d>1?"downloads-multi":"downloads-single main",e.textContent=Y("popup_how_many_media_found",[d]),A(this)}},_onClick:function(a){var b=this,c=a.target;switch(c.id){case"download-main":case"preferred-select":if(!b._userInitiated){c.setAttribute("disabled",!0);var d="preferred-select"===c.id;b._make_action=d?"select":"download",b._userInitiated=!0,metrics.log("ButtonClicked",d?metrics.BUTTON_FAKE_QUALITY:metrics.BUTTON_MAIN),b._updateDownloads()}return;case"showhide-all":var e=X.query("#downloads",b._widget);if(e){var f=!e.hidden;e.hidden=f,metrics.log("ButtonClicked",f?metrics.BUTTON_HIDE_DOWNLOADS:metrics.BUTTON_SHOW_DOWNLOADS)}return;case"download-selected":return metrics.log("ButtonClicked",metrics.BUTTON_DOWNLOAD_ALL),X.queryAll(".j-media-scope.selected",b._widget).forEach(function(a){b._download(X.query(".j-quality-download:not([hidden])",a))&&metrics.log("Download",metrics.DOWNLOAD_ALL)}),void b._updateDownloadSelected();case"check-all":return metrics.log("ButtonClicked",metrics.BUTTON_CHECK_ALL),void b._toggleSelectMedia(X.queryAll(".j-media-scope",b._widget),!0);case"check-none":return metrics.log("ButtonClicked",metrics.BUTTON_CHECK_NONE),void b._toggleSelectMedia(X.queryAll(".j-media-scope",b._widget),!1);case"open-pip":return metrics.log("ButtonClicked",metrics.BUTTON_DETACH),void pip.detachPlayerOrNode(this._lastPlayer)}switch(c.tagName){case"LI":if(c.classList.contains("j-media-scope")){var g=!c.classList.contains("selected");return void b._toggleSelectMedia(c,g)}break;case"SPAN":var h=c.parentNode;return h.classList.contains("j-quality-download")?void(b._download(h)&&(metrics.log("Download",metrics.DOWNLOAD_BUTTON),b._updateDownloadSelected())):!0;case"SELECT":return;case"INPUT":if("checkbox"===c.type){var i=X.findParent(c,"j-media-scope");return i&&b._toggleSelectMedia(i,c.checked),!0}}return!0},_onSelectChange:function(a){var b=a.target;if("SELECT"===b.tagName){if("quality-level-selection"===b.id);else{var c=b.value.trim(),d=c.split("/")[1];if(options.get("prefer_last_quality")&&1===X.queryAll(".j-media-scope",this._widget).length){var e=quality.getQualityLevelByQualityType(d);options.set("preferred_quality_level",e),options.set("preferred_quality:"+e,c)}var f=X.findParent(b,"j-media-scope");this._dl._applyCurrentValues(f),metrics.log("VideoQualityChanged",quality.getVideoQualityIndex(d)),this._updateDownloadSelected()}return!1}},_onWidgetClick:function(a){return this._onClick(a)?void 0:(a.preventDefault(),a.stopPropagation(),!0)},_toggleSelectMedia:function(a,b){function c(a){a.classList.toggle("selected",b),X.query('.filename [type="checkbox"]',a).checked=b}Array.isArray(a)?a.forEach(c):c(a),this._updateDownloadSelected()},_updateDownloadSelected:function(){var a=!0;X.queryAll(".j-media-scope.selected",this._widget).some(function(b){return X.query(".j-quality-download:not([hidden]):not(.j-disabled)",b)?(a=!1,!0):void 0}),X.query("#download-selected",this._widget).classList.toggle("disabled",a)},_download:function(a){return!!this._dl.download(a)},setMediaData:function(a,b){this._manager=a,this._player=b,this._lastPlayer=b,this._ready=b.ids.length>0,this._updateDownloads()},isReady:function(){return this._ready},getDetachBtnRect:function(){var a=this._widget&&this._widget.querySelector(".pip-btn");return a?a.getBoundingClientRect():null}},B.prototype={STATE:{VIRGIN:0,CLOSED_POPUP:1,USED_PIP:2,CLOSED_TIP:3,REATTACHED:4},_initDom:function(){if(!this.node){var c=b.createElement("div");c.innerHTML=Qa.render(a.options.get("template-pip-tour-try"),{i18n_title:Y("pip_tour_title"),i18n_content:Y("pip_tour_content"),i18n_img_cls:Y("pip_tour_image_class"),i18n_try_now:Y("pip_tour_try_btn")}),this.node=c.firstElementChild,c.innerHTML=Qa.render(a.options.get("template-pip-tour-restore"),{i18n_restore_tip:Y("pip_tour_restore_tip")}),this.restoreNode=c.firstElementChild,this.restoreNode.style.zIndex=Number.MAX_SAFE_INTEGER-1,this.closeClicked=this._closeClicked.bind(this),this.closeRestoreClicked=this._closeRestoreClicked.bind(this),this.tryClicked=this._tryClicked.bind(this),this.tabDetached=this._tabDetached.bind(this),this.tabRestored=this._tabRestored.bind(this),this.adjustPosition=this._adjustPosition.bind(this),this._addListeners(),this.tourState>this.STATE.VIRGIN&&(this.processPlayers=X.noop)}},_addListeners:function(){var b=this.node.querySelector(".close-dialog-button"),c=this.node.querySelector(".try-now"),d=this.restoreNode.querySelector(".close-dialog-button");b.addEventListener("click",this.closeClicked),d.addEventListener("click",this.closeRestoreClicked),c.addEventListener("click",this.tryClicked),pip.on("tab_detached",this.tabDetached),pip.on("tab_restored",this.tabRestored),a.addEventListener("resize",this.adjustPosition)},_adjustPosition:function(){if(this.currentPlayer){var a=this.widget.getDetachBtnRect();a&&(this.node.style.left=Math.floor(a.right+24)+"px")}},_tabDetached:function(){this.hide(),this.bumpTourState(this.STATE.USED_PIP),this.tourState<this.STATE.CLOSED_TIP&&this.showRestoreTip()},_tabRestored:function(){this.hide(),this.hideRestoreTip(),this.bumpTourState(this.STATE.RESTORED)},_closeClicked:function(){this.hide(),this.bumpTourState(this.STATE.CLOSED_POPUP)},_closeRestoreClicked:function(){this.hideRestoreTip(),this.bumpTourState(this.STATE.CLOSED_TIP)},_tryClicked:function(){this.currentPlayer&&pip.detachPlayerOrNode(this.currentPlayer),this.hide(),this.bumpTourState(this.STATE.USED_PIP)},bumpTourState:function(a){var b=options.get("pip_tour_state");(!b||a>b)&&(options.set("pip_tour_state",a),this.tourState=a)},hide:function(){this.node&&(this.overlayCtl.cancelForced(),this.node.style.display="none",this.currentPlayer=null)},show:function(a){this.node&&(this.currentPlayer=a,this.widget=this.overlayCtl.forceShow(a.node),this.node.style.display="block",setTimeout(this.adjustPosition,100))},hideRestoreTip:function(){this.restoreNode.style.display="none"},showRestoreTip:function(){this.restoreNode.style.display="block"},attach:function(a){this._initDom(),a.appendChild(this.node),a.appendChild(this.restoreNode)},processPlayers:function(a,b){if(this.tourState>this.STATE.VIRGIN)return void(this.currentPlayer&&this.hide());if(location.host.match(/([\w\d-]+\.)*youtube.com$/i)){if(!location.pathname.match(/\/watch/))return void this.hide();for(var c=0;c<b.length;c++){var d=b[c];if("youtube"===d.name&&d.node&&d.node!==this.currentTarget){this.show(d);break}}}}};const Ka=1500;L.prototype={constructor:L,prepareDOM:function(){var a=E();b.body&&(b.body.appendChild(a.element),a.shadowElement.appendChild(this.icon))},_onIconEnter:function(){this.unscheduleHideIcon()},_onIconLeave:function(){this.removeTO||this.scheduleHideIcon()},_onIconClick:function(){pip.detachPlayerOrNode(this.currentNode)},attachTo:function(a){var b=this._showIconFactory(a);if(this.lastNode===a&&(this.currentNode=this.lastNode,this.unscheduleHideIcon(),this.lastNode=null),a.matches("object, embed")){var c=a.parentNode&&a.parentNode.matches("object")?a.parentNode:a.querySelector("embed");c&&c.offsetHeight>a.offsetHeight&&(a=c)}location.host.match(/^([\w\d_-]+\.)*fptplay.net$/i)&&a.matches("object")&&(a=a.parentNode),a.addEventListener("mouseover",b),a.addEventListener("mouseleave",this.scheduleHideIcon),this.nodes.push({node:a,show:b})},clear:function(){this.nodes.forEach(function(a){this.scheduleHideIcon(),a.node.removeEventListener("mouseover",a.show),a.node.removeEventListener("mouseleave",this.scheduleHideIcon)},this),this.nodes.length=0,this.lastNode=this.currentNode,this.currentNode=null},_hideIcon:function(){this.icon.setAttribute("hidden","hidden"),this.currentNode=null},_scheduleHideIcon:function(){this.removeTO&&(clearTimeout(this.removeTO),this.removeTO=null),this.removeTO=setTimeout(this._hideIcon.bind(this),Ka)},_unscheduleHideIcon:function(){this.removeTO&&(clearTimeout(this.removeTO),this.removeTO=null)},_showIconFactory:function(b){var c=X.dom.getOffset(b),d=c.top-26,e=c.left;return function(){a.options.get("on_page_buttons")&&a.options.get("detach_enabled")&&(this.currentNode=b,this.unscheduleHideIcon(),this.icon.removeAttribute("hidden"),X.dom.style(this.icon,{top:d+"px",left:e+"px"}))}.bind(this)},_checkForNodes:function(){this.currentNode&&!b.contains(this.currentNode)&&(this.unscheduleHideIcon(),this._hideIcon())}};var La=function(){this._nodes=new Set([]),this._detachButton=new L,T.check(a.location.href,"pip")&&(this.checkPage=X.noop)};La.prototype={_MARK_PIP_NODES_:!1,MIN_PROPORTION:1,MAX_PROPORTION:3,MEDIA_SELECTOR:"embed, object, iframe, video",FULLSCREENABLE_NODES_SELECTOR:'embed[allowfullscreen="true"], iframe[allowfullscreen], video',_getMediaSize:function(a){return a.offsetWidth*a.offsetHeight},_isVideoProportion:function(a,b){return a>b*this.MIN_PROPORTION&&a<b*this.MAX_PROPORTION},_isLargeEnough:function(a,b){return a>240},_isChildOf:function(a,b){for(var c=!1;a&&a.tagName&&"body"!==a.tagName.toLowerCase();){if(b.has(a)){c=!0;break}a=a.parentNode}return c},_isBanned:function(a){var b=!1,c=a.querySelector("embed");return c&&(b=T.check(c)),b||T.check(a)},_isFullscreenable:function(a){var b=!a.matches(this.MEDIA_SELECTOR)&&X.queryAll(this.MEDIA_SELECTOR,a),c=b&&b.reduce(function(a,b){return a||this._isFullscreenable(b)}.bind(this),!1);if(c)return!0;if(a.matches(this.FULLSCREENABLE_NODES_SELECTOR)||T.check(a,"pip-allowfullscreen-false"))return!0;if("OBJECT"===a.tagName){var d=X.queryAll('param[value="true"]',a).filter(function(a){return a.name&&"allowfullscreen"===a.name.toLowerCase()});return!!d.length}return!1},isVideoNode:function(a){var b=X.dom.getEmbedSize(a),c=b.width,d=b.height;return this._isLargeEnough(c,d)&&this._isVideoProportion(c,d)&&this._isFullscreenable(a)&&!this._isBanned(a)},_findVideos:function(){if(!T.check(location.href,"pip"))for(var a,b=X.queryAll(this.MEDIA_SELECTOR),c=0,d=b.length;d>c;c++){a=b[c];var e=a.querySelector("embed");this._isChildOf(a,this._nodes)||e&&this._isChildOf(e,this._nodes)||!this.isVideoNode(a)||a.dataset.linkSaviorIgnore||(this._detachButton.attachTo(a),this.markCandidate(a),this._nodes.add(a))}},markCandidate:function(a){if(this._MARK_PIP_NODES_&&!a.__hasOverlay){var c=X.dom.getOffset(a),d={position:"absolute",background:"linear-gradient(135deg, #000 25%, transparent 25%) -50px 0,linear-gradient(225deg, #000 25%, transparent 25%) -50px 0,linear-gradient(315deg, #000 25%, transparent 25%),linear-gradient(45deg, #000 25%, transparent 25%)","background-size":"20px 20px","background-color":"#EC173A",opacity:"0.5","pointer-events":"none","z-index":Number.MAX_SAFE_INTEGER-1,top:c.top+"px",left:c.left+"px",width:a.offsetWidth+"px",height:a.offsetHeight+"px"},e=b.createElement("div");X.dom.setStyleAttr(e,d),b.body.appendChild(e),a.__hasOverlay=!0}},checkPage:function(a){this._nodes.clear(),this._nodes=new Set(a),this._detachButton.clear(),this._findVideos()}};var Ma=function(){O.apply(this,arguments),this.detector=new La,this._resizeListener=X.debounce(this._reApplyStyles.bind(this),100),this._savedStyles=new Map,this._appliedStyles=new Map};Ma.prototype={__proto__:O.prototype,PIPED_PLAYER_STYLE:{left:"0!important",top:"0!important",padding:"0!important",margin:"0!important",border:"0px none!important",width:"100%!important",height:"100%!important","min-width":"100%!important","max-width":"none!important","min-height":"100%!important","max-height":"none!important"},PLAYER_SIBLINGS_STYLE:{display:"none!important",visibility:"hidden!important",opacity:"0!important",width:"0!important",height:"0!important",margin:"0!important",padding:"0!important",border:"0px none!important",overflow:"hidden!important"},GENERATE_STACKING_CONTEXT_STYLE:{left:"0!important",top:"0!important",padding:"0!important",margin:"0!important",border:"0px none!important",width:"100%!important",height:"100%!important","min-width":"100%!important","max-width":"none!important","min-height":"100%!important","max-height":"none!important",overflow:"hidden!important"},GENERATE_STACKING_OUTER_STYLE:{"font-size":"0!important","line-height":"0!important","z-index":Number.MAX_SAFE_INTEGER-1+"!important"},FLASH_DIMENSION_PROPS:{width:"100%!important",height:"100%!important",_width:"100%",_height:"100%"},TAGS_NON_AFFECTING_LAYOUT:"head, script, style, link, meta",_getNodeSize:function(a){var b=X.dom.getEmbedSize(a);return{width:b.width||640,height:b.height||480}},_iterateSiblings:function(a,b){for(var c=a.parentNode&&a.parentNode.children,d=0;c&&d<c.length;d++)c[d]!==a&&b(c[d])},_nodeInDocument:function(a){for(;a&&a!==b;)a=a.parentNode;return a===b},_saveStyle:function(a){var b=a.style,c={};for(var d in b)b.hasOwnProperty(d)&&""!==b[d]&&(c[d]=a.style[d]);["OBJECT","EMBED","IFRAME"].indexOf(a.tagName.toUpperCase())>-1&&a.width&&(c._width=a.width,c._height=a.height),0!==a.scrollTop&&(c._scrollTop=a.scrollTop),this._savedStyles.set(a,c)},_restoreStyle:function(a){var b=a.style,c=this._savedStyles.get(a);if(c){for(var d in b)b.hasOwnProperty(d)&&(d in c?b[d]=c[d]:""!==b[d]&&(b[d]=""));c._width&&(a.width=c._width),c._height&&(a.height=c._height),c._scrollTop&&(a.scrollTop=c._scrollTop)}},detachPlayerOrNode:function(a){var b,c;if(!this._currentPiP){if(a instanceof HTMLElement){if(!this._nodeInDocument(a))return;c=a,b=!1}else c=a.node,b=Boolean(a.restore&&a.detach);var d,e=this._getNodeSize(c);b?(a.detach(this._maximizeNode.bind(this)),d={player:a}):(this._maximizeNode(c),d={node:c}),this._currentPiP=d,chrome.extension.inIncognitoContext&&(e.incognito=!0),this.emit("tab_detached",e)}},_saveAppliedStyle:function(a,b){var c=this._appliedStyles.get(a)||{};for(var d in b)b.hasOwnProperty(d)&&(c[d]=b[d]);this._appliedStyles.set(a,c)},_applyStyleForNode:function(a){var b=this._appliedStyles.get(a);b&&X.dom.setStyleAttr(a,b),b._width&&(a.width=b._width),b._height&&(a.height=b._height)},_maximizeNode:function(c){var d=null,e=!1,f=this._getNodeSize(c);this._savedStyles.clear(),this._appliedStyles.clear(),this._saveAppliedStyle(c,this.PIPED_PLAYER_STYLE);var g=c.querySelector("embed");g&&(this._saveStyle(g),this._saveAppliedStyle(g,this.FLASH_DIMENSION_PROPS));for(var h=c;h&&h!==b;h=h.parentNode)if(!h.matches(this.TAGS_NON_AFFECTING_LAYOUT)){if(this._saveStyle(h),this._saveAppliedStyle(h,this.GENERATE_STACKING_CONTEXT_STYLE),e&&this._saveAppliedStyle(h,this.GENERATE_STACKING_OUTER_STYLE),h.matches("object, embed")&&this._saveAppliedStyle(h,this.FLASH_DIMENSION_PROPS),h.matches("iframe"))e=!0;else if(!e&&(Math.min(h.parentNode.scrollWidth,h.parentNode.offsetWidth)!==f.width||Math.min(h.parentNode.scrollHeight,h.parentNode.offsetHeight)!==f.height)){e=!0,d=a.getComputedStyle(h);var i={"font-size":d["font-size"]+"!important","line-height":d["line-height"]+"!important","z-index":Number.MAX_SAFE_INTEGER-1+"!important"};this._saveAppliedStyle(h,i)}e&&this._iterateSiblings(h,function(a){a.matches(this.TAGS_NON_AFFECTING_LAYOUT)||(this._saveStyle(a),this._saveAppliedStyle(a,this.PLAYER_SIBLINGS_STYLE))}.bind(this))}a.addEventListener("resize",this._resizeListener)},_restoreNode:function(){this._savedStyles.forEach(function(a,b){this._restoreStyle(b)}.bind(this)),this._savedStyles.clear(),this._appliedStyles.clear()},_reApplyStyles:function(){this._appliedStyles.forEach(function(a,b){this._applyStyleForNode(b)}.bind(this))},restore:function(){this._currentPiP&&(a.removeEventListener("resize",this._resizeListener),this._currentPiP.player?this._currentPiP.player.restore(this._restoreNode.bind(this)):this._restoreNode(this._currentPiP.node),this._currentPiP=null,this.emit("tab_restored",null))}},function(){var a={width:640,height:480};location.host.match(/^(?:[\w\d_-]+\.)*coccoc.com$/)&&b.addEventListener("click",function(b){if(b.target&&b.target.matches("a[x-coccoc-pip-url]")){var c=b.target,d=c.getAttribute("x-coccoc-pip-url"),e=c.getAttribute("x-coccoc-pip-size"),f=e&&/^(\d+)x(\d+)/.exec(e);e=f?{width:+f[1],height:+f[2]}:a,W.sendMessage({requestType:"pip",method:"pipUrl",params:{url:d,width:e.width,height:e.height}}),b.preventDefault(),b.stopPropagation()}})}(),M.prototype={STYLE:{background:"#000000",position:"fixed",left:"0px",top:"0px",right:"0px",bottom:"0px",opacity:.6,zIndex:2147483647},_init:function(){var a=b.createElement("savior:overlay");X.dom.style(a,this.STYLE),this._overlay=a,this._warp=b.createDocumentFragment(),this._styleElement=b.createElement("style"),this._styleElement.innerHTML="body { -webkit-filter: blur(3px)!important; }",a.addEventListener("mouseup",this.hide.bind(this),!0),a.addEventListener("mousedown",this.hide.bind(this),!0),this._port=null,this._onConnectCallback=this._onConnect.bind(this),this._onDisconnectCallback=this._onDisconnect.bind(this),chrome.runtime.onConnect.addListener(this._onConnectCallback)},_onConnect:function(a){this._port=a,"overlay"===a.name&&(this.show(),a.onDisconnect.addListener(this._onDisconnectCallback))},_onDisconnect:function(){this.hide(),this._port&&this._port.onDisconnect.removeListener(this._onDisconnectCallback),this._port=null},hide:function(a){this._warp&&(a&&a.stopPropagation&&(a.stopPropagation(),a.preventDefault()),this._warp.appendChild(this._overlay),this._warp.appendChild(this._styleElement))},show:function(){b.body.appendChild(this._overlay),b.body.offsetHeight,b.head.appendChild(this._styleElement)},destroy:function(){this.hide(),this._port&&this._port.onConnect.removeListener(this._onConnectCallback),this._port=null,this._styleElement=null,this._overlay=null,this._warp=null}};var Na=function(a){O.apply(this,arguments),this._manager=a,this._timeout=null,this._started=!1,this._paused=!1,this._pollCallback=this._poll.bind(this)};Na.prototype={__proto__:O.prototype,RECHECK_PERIOD:3e3,_init:function(){b.addEventListener("webkitvisibilitychange",this._pollCallback,!1)},_getPlayerNodes:function(a){for(var b,c=[],d=a.length;b=a[--d];)b.node&&b.ids.length&&c.push(b.node);return c},_poll:function(){if(clearTimeout(this._timeout),!this._paused&&!b.webkitHidden){var a=this._manager.getMediaPlayers(),c=this._getPlayerNodes(a);this.emit("media_update",a,c),this._timeout=setTimeout(this._pollCallback,this.RECHECK_PERIOD)}},start:function(){this._started?this._paused&&(this._paused=!1,this._poll()):(this._init(),this._poll(),this._started=!0)},pause:function(){clearTimeout(this._timeout),this._paused=!0},destroy:function(){clearTimeout(this._timeout),b.removeEventListener("webkitvisibilitychange",this._pollCallback,!1)}};var Oa=function(){this._options=new ea,this._cache=new Ga,this._manager=new Ba,this._mediaScanner=new Na(this._manager),this._overlay=new M,this._options.load().success(this._init.bind(this)),this._pip=new Ma,this._controls=null};Oa.prototype={_init:function(){this.onMediaUpdate=this._onMediaUpdate.bind(this),this.onUnload=this._onUnload.bind(this),this.onMessageReceived=this._onMessageReceived.bind(this),a.onbeforeunload=this.onUnload,this._mediaScanner.on("media_update",this.onMediaUpdate),this._pip.on("tab_detached",this._onPiPDetach.bind(this)),chrome.runtime.onMessage.addListener(this.onMessageReceived),this._exportGlobals()},_exportGlobals:function(){a.cache=this._cache,a.pip=this._pip,a.options=this._options,a.manager=this._manager},_hasMedia:function(a){var b=new $,c=a.reduce(function(a,b){return a.concat(b.ids)},[]);return $.when(c).done(function(){var a=X.toArray(arguments).reduce(function(a,b){return Array.isArray(b)||(b=[b]),a.concat(b)},[]).filter(X.isTrue);b.resolve(!!a.length)}),b},_onMediaUpdate:function(a,c){this._pip.detector.checkPage(c),this._hasMedia(a).done(function(a){var b=W.sendMessage({requestType:"media",method:"set_present",params:a});return b?void 0:void this.onUnload()}.bind(this)),!this._controls&&b.documentElement&&this.canShowControls&&(this._controls=K(b.documentElement)),this._controls&&this._controls.setMediaPlayers(this._manager,a)},_onMessageReceived:function(a,b,c){var d=null;switch(a.requestType){case"get_media":manager.getMedia().done(function(a){c(a)});break;case"downloads":d=Ha.processRequest(a.method,a.params);break;case"request.matched":manager.processRequest(a);break;case"restore_tab":this._mediaScanner.start(),this._pip.restore()}return d&&d.done(function(a){c({success:d.state===$.RESOLVED,data:a})}),!0},_onPiPDetach:function(a){this._mediaScanner.pause(),W.sendMessage({requestType:"pip",method:"detachTab",params:a})},_onUnload:function(){this._controls&&this._controls.destroy(),this._overlay.destroy(),this._mediaScanner.destroy()},get canShowControls(){return"file:"!==location.protocol&&""!==location.hostname&&"localhost"!==location.hostname},start:function(){W.sendMessage({requestType:"media",method:"reset_all"}),this._mediaScanner.start()}};var Pa=new Oa;Pa.start();var Qa;!function(a){"undefined"!=typeof module&&module.exports?module.exports=a:"function"==typeof define?define(a):Qa=a}(function(){function a(a,b){return RegExp.prototype.test.call(a,b)}function b(b){return!a(p,b)}function c(a){return a.replace(/[\-\[\]{}()*+?.,\\\^$|#\s]/g,"\\$&")}function d(a){return String(a).replace(/[&<>"'\/]/g,function(a){return u[a]})}function e(a){this.string=a,this.tail=a,this.pos=0}function f(a,b){this.view=a,this.parent=b,this.clearCache()}function g(){this.clearCache()}function h(a){for(var b,c=a[3],d=c;(b=a[4])&&b.length;)a=b[b.length-1],d=a[3];return[c,d]}function i(a){function b(a,b,c){if(!d[a]){var e=i(b);d[a]=function(a,b){return e(a,b,c)}}return d[a]}function c(c,d,e){for(var f,g,i="",j=0,k=a.length;k>j;++j)switch(f=a[j],f[0]){case"#":g=e.slice.apply(e,h(f)),i+=c._section(f[1],d,g,b(j,f[4],e));break;case"^":i+=c._inverted(f[1],d,b(j,f[4],e));break;case">":i+=c._partial(f[1],d);break;case"&":i+=c._name(f[1],d);break;case"name":i+=c._escaped(f[1],d);break;case"text":i+=f[1]}return i}var d={};return c}function j(a){for(var b,c,d=[],e=d,f=[],g=0;g<a.length;++g)switch(b=a[g],b[0]){case"#":case"^":b[4]=[],f.push(b),e.push(b),e=b[4];break;case"/":if(0===f.length)throw new Error("Unopened section: "+b[1]);if(c=f.pop(),c[1]!==b[1])throw new Error("Unclosed section: "+c[1]);e=f.length>0?f[f.length-1][4]:d;break;default:e.push(b)}if(c=f.pop())throw new Error("Unclosed section: "+c[1]);return d}function k(a){for(var b,c,d=0;d<a.length;++d)b=a[d],c&&"text"===c[0]&&"text"===b[0]?(c[1]+=b[1],c[3]=b[3],a.splice(d--,1)):c=b}function l(a){if(2!==a.length)throw new Error("Invalid tags: "+a.join(" "));return[new RegExp(c(a[0])+"\\s*"),new RegExp("\\s*"+c(a[1]))]}var m={};m.name="mustache.js",m.version="0.7.0",m.tags=["{{","}}"],m.Scanner=e,m.Context=f,m.Writer=g;var n=/\s*/,o=/\s+/,p=/\S/,q=/\s*=/,r=/\s*\}/,s=/#|\^|\/|>|\{|&|=|!/,t=Array.isArray||function(a){return"[object Array]"===Object.prototype.toString.call(a)},u={"&":"&amp;","<":"&lt;",">":"&gt;",'"':"&quot;","'":"&#39;","/":"&#x2F;"};m.escape=d,e.prototype.eos=function(){return""===this.tail},e.prototype.scan=function(a){var b=this.tail.match(a);return b&&0===b.index?(this.tail=this.tail.substring(b[0].length),this.pos+=b[0].length,b[0]):""},e.prototype.scanUntil=function(a){var b,c=this.tail.search(a);switch(c){case-1:b=this.tail,this.pos+=this.tail.length,this.tail="";break;case 0:b="";break;default:b=this.tail.substring(0,c),this.tail=this.tail.substring(c),this.pos+=c}return b},f.make=function(a){return a instanceof f?a:new f(a)},f.prototype.clearCache=function(){this._cache={}},f.prototype.push=function(a){return new f(a,this)},f.prototype.lookup=function(a){var b=this._cache[a];if(!b){if("."===a)b=this.view;else for(var c=this;c;){if(a.indexOf(".")>0){var d=a.split("."),e=0;for(b=c.view;b&&e<d.length;)b=b[d[e++]]}else b=c.view[a];if(null!=b)break;c=c.parent;
}this._cache[a]=b}return"function"==typeof b&&(b=b.call(this.view)),b},g.prototype.clearCache=function(){this._cache={},this._partialCache={}},g.prototype.compile=function(a,b){return this._compile(this._cache,a,a,b)},g.prototype.compilePartial=function(a,b,c){return this._compile(this._partialCache,a,b,c)},g.prototype.render=function(a,b,c){return this.compile(a)(b,c)},g.prototype._compile=function(a,b,c,d){if(!a[b]){var e=m.parse(c,d),g=i(e),h=this;a[b]=function(a,b){if(b)if("function"==typeof b)h._loadPartial=b;else for(var d in b)h.compilePartial(d,b[d]);return g(h,f.make(a),c)}}return a[b]},g.prototype._section=function(a,b,c,d){var e=b.lookup(a);switch(typeof e){case"object":if(t(e)){for(var f="",g=0,h=e.length;h>g;++g)f+=d(this,b.push(e[g]));return f}return e?d(this,b.push(e)):"";case"function":var i=this,j=function(a){return i.render(a,b)};return e.call(b.view,c,j)||"";default:if(e)return d(this,b)}return""},g.prototype._inverted=function(a,b,c){var d=b.lookup(a);return!d||t(d)&&0===d.length?c(this,b):""},g.prototype._partial=function(a,b){a in this._partialCache||!this._loadPartial||this.compilePartial(a,this._loadPartial(a));var c=this._partialCache[a];return c?c(b):""},g.prototype._name=function(a,b){var c=b.lookup(a);return"function"==typeof c&&(c=c.call(b.view)),null==c?"":String(c)},g.prototype._escaped=function(a,b){return m.escape(this._name(a,b))},m.parse=function(a,d){function f(){if(x&&!y)for(;w.length;)v.splice(w.pop(),1);else w=[];x=!1,y=!1}d=d||m.tags;for(var g,h,i,p,t=l(d),u=new e(a),v=[],w=[],x=!1,y=!1;!u.eos();){if(g=u.pos,i=u.scanUntil(t[0]))for(var z=0,A=i.length;A>z;++z)p=i.charAt(z),b(p)?w.push(v.length):y=!0,v.push(["text",p,g,g+1]),g+=1,"\n"===p&&f();if(g=u.pos,!u.scan(t[0]))break;if(x=!0,h=u.scan(s)||"name",u.scan(n),"="===h)i=u.scanUntil(q),u.scan(q),u.scanUntil(t[1]);else if("{"===h){var B=new RegExp("\\s*"+c("}"+d[1]));i=u.scanUntil(B),u.scan(r),u.scanUntil(t[1]),h="&"}else i=u.scanUntil(t[1]);if(!u.scan(t[1]))throw new Error("Unclosed tag at "+u.pos);v.push([h,i,g,u.pos]),("name"===h||"{"===h||"&"===h)&&(y=!0),"="===h&&(d=i.split(o),t=l(d))}return k(v),j(v)};var v=new g;return m.clearCache=function(){return v.clearCache()},m.compile=function(a,b){return v.compile(a,b)},m.compilePartial=function(a,b,c){return v.compilePartial(a,b,c)},m.render=function(a,b,c){return v.render(a,b,c)},m.to_html=function(a,b,c,d){var e=m.render(a,b,c);return"function"!=typeof d?e:void d(e)},m}()),a.addEventListener("DOMContentLoaded",function(){chrome.runtime.sendMessage({requestType:"tests_page_ready",url:location.href})},!1),chrome.runtime.onMessage.addListener(function(b,c,d){switch(b.requestType){case"tests_thegioiphim_play":d(X.query("#playerID").sendEvent("PLAY"));break;case"tests_call_function":var e=a,f=b.fn.split("."),g=b.args,h=f.pop();try{for(;e&&f.length;)e=e[f.shift()];d(e[h].apply(e,g))}catch(i){d(null)}}return!0})}(window,document);